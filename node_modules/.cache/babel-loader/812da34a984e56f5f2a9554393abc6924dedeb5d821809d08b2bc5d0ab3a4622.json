{"ast":null,"code":"// Lightweight EMA utilities\nexport function sma(values) {\n  if (!values || values.length === 0) return null;\n  const sum = values.reduce((s, v) => s + v, 0);\n  return sum / values.length;\n}\n\n// Calculate the last EMA value for an array of closing prices.\n// values: array of numbers (chronological oldest->newest), period: integer\nexport function calculateInitialEMA(values, period) {\n  if (!Array.isArray(values) || values.length < period) {\n    throw new Error('Not enough data to calculate initial EMA');\n  }\n\n  // Start with SMA of the first `period` values\n  let ema = sma(values.slice(0, period));\n  const multiplier = 2 / (period + 1);\n\n  // Apply EMA formula for the rest of the values\n  for (let i = period; i < values.length; i++) {\n    const price = values[i];\n    ema = (price - ema) * multiplier + ema;\n  }\n  return ema;\n}\n\n// Update EMA given previous EMA and the latest price\nexport function updateEMA(prevEMA, price, period) {\n  const multiplier = 2 / (period + 1);\n  return (price - prevEMA) * multiplier + prevEMA;\n}\nconst ema = {\n  sma,\n  calculateInitialEMA,\n  updateEMA\n};\nexport default ema;","map":{"version":3,"names":["sma","values","length","sum","reduce","s","v","calculateInitialEMA","period","Array","isArray","Error","ema","slice","multiplier","i","price","updateEMA","prevEMA"],"sources":["C:/Users/e1it3/Desktop/program/binance_alert/src/utils/ema.js"],"sourcesContent":["// Lightweight EMA utilities\r\nexport function sma(values) {\r\n  if (!values || values.length === 0) return null;\r\n  const sum = values.reduce((s, v) => s + v, 0);\r\n  return sum / values.length;\r\n}\r\n\r\n// Calculate the last EMA value for an array of closing prices.\r\n// values: array of numbers (chronological oldest->newest), period: integer\r\nexport function calculateInitialEMA(values, period) {\r\n  if (!Array.isArray(values) || values.length < period) {\r\n    throw new Error('Not enough data to calculate initial EMA');\r\n  }\r\n\r\n  // Start with SMA of the first `period` values\r\n  let ema = sma(values.slice(0, period));\r\n  const multiplier = 2 / (period + 1);\r\n\r\n  // Apply EMA formula for the rest of the values\r\n  for (let i = period; i < values.length; i++) {\r\n    const price = values[i];\r\n    ema = (price - ema) * multiplier + ema;\r\n  }\r\n\r\n  return ema;\r\n}\r\n\r\n// Update EMA given previous EMA and the latest price\r\nexport function updateEMA(prevEMA, price, period) {\r\n  const multiplier = 2 / (period + 1);\r\n  return (price - prevEMA) * multiplier + prevEMA;\r\n}\r\n\r\nconst ema = { sma, calculateInitialEMA, updateEMA };\r\nexport default ema;\r\n"],"mappings":"AAAA;AACA,OAAO,SAASA,GAAGA,CAACC,MAAM,EAAE;EAC1B,IAAI,CAACA,MAAM,IAAIA,MAAM,CAACC,MAAM,KAAK,CAAC,EAAE,OAAO,IAAI;EAC/C,MAAMC,GAAG,GAAGF,MAAM,CAACG,MAAM,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,GAAGC,CAAC,EAAE,CAAC,CAAC;EAC7C,OAAOH,GAAG,GAAGF,MAAM,CAACC,MAAM;AAC5B;;AAEA;AACA;AACA,OAAO,SAASK,mBAAmBA,CAACN,MAAM,EAAEO,MAAM,EAAE;EAClD,IAAI,CAACC,KAAK,CAACC,OAAO,CAACT,MAAM,CAAC,IAAIA,MAAM,CAACC,MAAM,GAAGM,MAAM,EAAE;IACpD,MAAM,IAAIG,KAAK,CAAC,0CAA0C,CAAC;EAC7D;;EAEA;EACA,IAAIC,GAAG,GAAGZ,GAAG,CAACC,MAAM,CAACY,KAAK,CAAC,CAAC,EAAEL,MAAM,CAAC,CAAC;EACtC,MAAMM,UAAU,GAAG,CAAC,IAAIN,MAAM,GAAG,CAAC,CAAC;;EAEnC;EACA,KAAK,IAAIO,CAAC,GAAGP,MAAM,EAAEO,CAAC,GAAGd,MAAM,CAACC,MAAM,EAAEa,CAAC,EAAE,EAAE;IAC3C,MAAMC,KAAK,GAAGf,MAAM,CAACc,CAAC,CAAC;IACvBH,GAAG,GAAG,CAACI,KAAK,GAAGJ,GAAG,IAAIE,UAAU,GAAGF,GAAG;EACxC;EAEA,OAAOA,GAAG;AACZ;;AAEA;AACA,OAAO,SAASK,SAASA,CAACC,OAAO,EAAEF,KAAK,EAAER,MAAM,EAAE;EAChD,MAAMM,UAAU,GAAG,CAAC,IAAIN,MAAM,GAAG,CAAC,CAAC;EACnC,OAAO,CAACQ,KAAK,GAAGE,OAAO,IAAIJ,UAAU,GAAGI,OAAO;AACjD;AAEA,MAAMN,GAAG,GAAG;EAAEZ,GAAG;EAAEO,mBAAmB;EAAEU;AAAU,CAAC;AACnD,eAAeL,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}