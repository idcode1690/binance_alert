{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\e1it3\\\\Desktop\\\\program\\\\binance_alert\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport './App.css';\nimport React, { useEffect, useRef, useState } from 'react';\nimport useEmaCross from './hooks/useEmaCross';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction beep() {\n  try {\n    const AudioCtx = window.AudioContext || window.webkitAudioContext;\n    const ctx = new AudioCtx();\n    const o = ctx.createOscillator();\n    const g = ctx.createGain();\n    o.type = 'sine';\n    o.frequency.value = 880;\n    o.connect(g);\n    g.connect(ctx.destination);\n    o.start();\n    g.gain.setValueAtTime(0.0001, ctx.currentTime);\n    g.gain.exponentialRampToValueAtTime(0.1, ctx.currentTime + 0.01);\n    g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 0.6);\n    setTimeout(() => {\n      o.stop();\n      try {\n        ctx.close();\n      } catch (e) {}\n    }, 700);\n  } catch (e) {\n    // ignore\n  }\n}\nfunction App() {\n  _s();\n  const [symbol, setSymbol] = useState('BTCUSDT');\n  const [autoStart, setAutoStart] = useState(true);\n  const [symbolValid, setSymbolValid] = useState(null); // null=unknown, true/false\n  const symbolValidateTimer = useRef(null);\n  const [availableSymbols, setAvailableSymbols] = useState(null);\n  const [showDebug, setShowDebug] = useState(false);\n  const [suggestions, setSuggestions] = useState([]);\n  const [marketCheckResult, setMarketCheckResult] = useState(null);\n  // helper to fetch exchangeInfo and populate availableSymbols\n  async function fetchExchangeInfo() {\n    try {\n      // default to Binance Futures (USDT-M) exchangeInfo for symbols\n      const res = await fetch('https://fapi.binance.com/fapi/v1/exchangeInfo');\n      if (!res.ok) {\n        console.warn('exchangeInfo fetch failed', res.status);\n        setAvailableSymbols([]);\n        return;\n      }\n      const data = await res.json();\n      const syms = (data.symbols || []).map(s => s.symbol);\n      setAvailableSymbols(syms);\n    } catch (e) {\n      console.warn('exchangeInfo fetch error', e);\n      setAvailableSymbols([]);\n    }\n  }\n\n  // fetch full symbol list once on mount for reliable validation\n  useEffect(() => {\n    fetchExchangeInfo();\n  }, []);\n\n  // helper to validate a symbol (returns true/false)\n  async function validateSymbolOnce(s) {\n    const q = (s || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n    if (!q) return false;\n    // If we have a cached symbol list, compare using a normalized form (strip non-alnum, uppercase)\n    if (availableSymbols && availableSymbols.length > 0) {\n      const normQ = q;\n      for (const sym of availableSymbols) {\n        const normSym = (sym || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n        if (normSym === normQ) return true;\n      }\n      return false;\n    }\n    // Fallback to exchangeInfo query for the single symbol\n    try {\n      // fallback to Binance Futures exchangeInfo lookup\n      const res = await fetch(`https://fapi.binance.com/fapi/v1/exchangeInfo?symbol=${q}`);\n      if (!res.ok) return false;\n      const data = await res.json();\n      // if API returned an object with matching symbol(s), accept it\n      if (data && Array.isArray(data.symbols) && data.symbols.length > 0) return true;\n      if (data && data.symbol) return true;\n      return false;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  // if symbol becomes invalid, disable autoStart and disconnect to avoid wrong subscriptions\n  // (moved below after hook initialization because it depends on connected/disconnect)\n  const {\n    ema26,\n    ema200,\n    lastPrice,\n    lastCandleClosed,\n    cross,\n    confirmedCross,\n    confirmedSource,\n    connected,\n    status,\n    connect,\n    disconnect,\n    activeSymbol\n  } = useEmaCross({\n    symbol,\n    autoConnect: autoStart,\n    debug: showDebug\n  });\n\n  // 자동 연결: symbol이 유효하고 autoStart가 켜져 있으면 Start 버튼을 누르지 않아도 connect 호출\n  useEffect(() => {\n    try {\n      const q = (symbol || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n      if (q && symbolValid === true && autoStart) {\n        // avoid calling connect if already active for this symbol\n        if (!activeSymbol || activeSymbol.toString().toUpperCase() !== q) {\n          connect(q);\n        }\n      }\n    } catch (e) {\n      // ignore\n    }\n  }, [symbol, symbolValid, autoStart, activeSymbol, connect]);\n  const [events, setEvents] = useState([]);\n  const lastNotified = useRef(null);\n  const importInputRef = useRef(null);\n\n  // Export current alerts as a JSON file\n  function exportAlerts() {\n    try {\n      const data = JSON.stringify(events || [], null, 2);\n      const blob = new Blob([data], {\n        type: 'application/json'\n      });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      const now = new Date();\n      const fname = `alerts-${now.toISOString().slice(0, 10)}.json`;\n      a.href = url;\n      a.download = fname;\n      document.body.appendChild(a);\n      a.click();\n      a.remove();\n      URL.revokeObjectURL(url);\n    } catch (e) {\n      console.warn('export failed', e);\n    }\n  }\n  function handleImportClick() {\n    try {\n      if (importInputRef.current) importInputRef.current.click();\n    } catch (e) {}\n  }\n  function handleFileInputChange(e) {\n    const f = e.target.files && e.target.files[0];\n    if (!f) return;\n    const reader = new FileReader();\n    reader.onload = ev => {\n      try {\n        const txt = ev.target.result;\n        const parsed = JSON.parse(txt);\n        if (!Array.isArray(parsed)) return;\n        // normalize: ensure each item has ts/time\n        const toAdd = parsed.map(it => {\n          const copy = Object.assign({}, it);\n          if (!copy.ts) {\n            const parsedTs = Date.parse(copy.time || '');\n            copy.ts = !isNaN(parsedTs) ? parsedTs : Date.now();\n          }\n          if (!copy.time) copy.time = new Date(copy.ts).toLocaleString();\n          return copy;\n        });\n        // merge (prepend) and limit to 500\n        const merged = [...toAdd, ...events].slice(0, 500);\n        setEvents(merged);\n      } catch (err) {\n        console.warn('import parse error', err);\n      }\n    };\n    reader.readAsText(f);\n    // clear input value so same file can be re-imported if needed\n    e.target.value = '';\n  }\n  function clearAlerts() {\n    setEvents([]);\n    try {\n      localStorage.removeItem(ALERTS_LS_KEY);\n    } catch (e) {}\n  }\n\n  // --- localStorage에 Alerts 저장/복원 헬퍼 ---\n  const ALERTS_LS_KEY = 'alerts';\n  function saveAlertsToLocalStorage(arr) {\n    try {\n      if (!Array.isArray(arr)) return;\n      // 저장 크기 제한을 위해 최신 500개(로컬스토리지라 쿠키보다 여유)\n      const toStore = JSON.stringify(arr.slice(0, 500));\n      localStorage.setItem(ALERTS_LS_KEY, toStore);\n    } catch (e) {\n      // ignore\n    }\n  }\n  function loadAlertsFromLocalStorage() {\n    try {\n      const raw = localStorage.getItem(ALERTS_LS_KEY);\n      if (!raw) return null;\n      const parsed = JSON.parse(raw);\n      if (Array.isArray(parsed)) return parsed;\n      return null;\n    } catch (e) {\n      return null;\n    }\n  }\n\n  // 복원: 마운트 시 localStorage에서 alerts 복원 (7일 초과 항목은 제거)\n  useEffect(() => {\n    try {\n      const saved = loadAlertsFromLocalStorage();\n      if (saved && Array.isArray(saved) && saved.length > 0) {\n        const cutoff = Date.now() - 1000 * 60 * 60 * 24 * 7; // 7 days\n        const filtered = saved.filter(ev => {\n          if (!ev) return false;\n          if (typeof ev.ts === 'number') return ev.ts >= cutoff;\n          // try parse time string as fallback\n          const parsed = Date.parse(ev.time || '');\n          if (!isNaN(parsed)) return parsed >= cutoff;\n          return false;\n        });\n        setEvents(filtered);\n      }\n    } catch (e) {}\n  }, []);\n\n  // 저장: events가 바뀔 때마다 localStorage에 반영 (저장 전에 7일 초과 항목 제거)\n  useEffect(() => {\n    try {\n      const cutoff = Date.now() - 1000 * 60 * 60 * 24 * 7; // 7 days\n      const filtered = (events || []).filter(ev => {\n        if (!ev) return false;\n        if (typeof ev.ts === 'number') return ev.ts >= cutoff;\n        const parsed = Date.parse(ev.time || '');\n        if (!isNaN(parsed)) return parsed >= cutoff;\n        return false;\n      });\n      saveAlertsToLocalStorage(filtered);\n    } catch (e) {}\n  }, [events]);\n\n  // if symbol becomes invalid, disable autoStart and disconnect to avoid wrong subscriptions\n  useEffect(() => {\n    if (symbolValid === false) {\n      if (autoStart) setAutoStart(false);\n      // ensure disconnected\n      if (connected) disconnect();\n    }\n    // include dependencies to avoid stale closures\n  }, [symbolValid, autoStart, connected, disconnect]);\n\n  // Ask for notification permission on first user interaction\n  useEffect(() => {\n    const handle = () => {\n      if ('Notification' in window && Notification.permission === 'default') {\n        Notification.requestPermission().then(() => {});\n      }\n      window.removeEventListener('click', handle);\n    };\n    window.addEventListener('click', handle);\n    return () => window.removeEventListener('click', handle);\n  }, []);\n\n  // react to confirmed cross changes and notify (skip initial)\n  useEffect(() => {\n    if (!confirmedCross) return;\n    if (lastNotified.current == null) {\n      // seed without notifying\n      lastNotified.current = confirmedCross;\n      return;\n    }\n    if (lastNotified.current !== confirmedCross) {\n      const type = confirmedCross === 'bull' ? 'Bullish EMA26 > EMA200' : 'Bearish EMA26 < EMA200';\n      const symToShow = activeSymbol || symbol;\n      const body = `${symToShow} ${type} @ ${lastPrice !== null && lastPrice !== void 0 ? lastPrice : 'N/A'}`;\n\n      // browser notification\n      if ('Notification' in window && Notification.permission === 'granted') {\n        new Notification(type, {\n          body\n        });\n      }\n\n      // beep and log\n      beep();\n      const evObj = {\n        ts: Date.now(),\n        time: new Date().toLocaleString(),\n        type: confirmedCross,\n        price: lastPrice,\n        symbol: symToShow,\n        source: confirmedSource || 'unknown'\n      };\n      setEvents(s => [evObj, ...s].slice(0, 500));\n      lastNotified.current = confirmedCross;\n    }\n  }, [confirmedCross, lastPrice, symbol, activeSymbol, confirmedSource]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"title\",\n            children: \"Binance EMA Cross Alert\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginLeft: 'auto',\n              fontSize: 12,\n              color: '#6b7280'\n            },\n            children: \"5m \\xB7 EMA26 / EMA200\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"controls\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: 8\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: 13\n              },\n              children: \"Symbol\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: symbol,\n              onChange: e => {\n                const v = e.target.value.toUpperCase();\n                setSymbol(v);\n                // reset validation state while typing\n                setSymbolValid(null);\n                if (symbolValidateTimer.current) clearTimeout(symbolValidateTimer.current);\n                symbolValidateTimer.current = setTimeout(() => {\n                  try {\n                    const q = v.replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n                    const pool = availableSymbols || [];\n                    if (pool.length > 0) {\n                      const normQ = q;\n                      // try to find exact match using normalized comparison\n                      const exact = pool.some(sy => (sy || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase() === normQ) || pool.includes(q);\n                      if (exact) {\n                        setSymbolValid(true);\n                        setSuggestions([]);\n                        // if autoStart is enabled, start monitoring immediately for this symbol\n                        try {\n                          if (autoStart) {\n                            connect(q);\n                          }\n                        } catch (e) {\n                          // connect may be stale during initial render; ignore\n                        }\n                        return;\n                      }\n                      const found = pool.filter(s => s.includes(q) || s.startsWith(q) || q.startsWith(s)).slice(0, 8);\n                      setSuggestions(found);\n                      // If we have candidate suggestions, treat validation as \"unknown\" while the user picks one.\n                      // Only mark invalid if there are no suggestions and it's not an exact match.\n                      setSymbolValid(found.length > 0 ? null : false);\n                      return;\n                    }\n                    // fallback: try direct exchangeInfo query\n                    (async () => {\n                      try {\n                        const url = `https://api.binance.com/api/v3/exchangeInfo?symbol=${q}`;\n                        const res = await fetch(url);\n                        if (!res.ok) {\n                          setSymbolValid(false);\n                          return;\n                        }\n                        const data = await res.json();\n                        if (data && (data.symbols || data.symbol)) {\n                          setSymbolValid(true);\n                        } else {\n                          setSymbolValid(false);\n                        }\n                      } catch (err) {\n                        setSymbolValid(false);\n                      }\n                    })();\n                  } catch (err) {\n                    setSymbolValid(false);\n                    setSuggestions([]);\n                  }\n                }, 600);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: !(symbolValid === true) || status === 'reloading',\n            title: !(symbolValid === true) ? '유효한 심볼을 입력하세요' : status === 'reloading' ? '초기화 중...' : 'Start',\n            onClick: async () => {\n              // validate before connecting\n              const ok = await validateSymbolOnce(symbol);\n              if (!ok) {\n                setSymbolValid(false);\n                return;\n              }\n              setSymbolValid(true);\n              connect(symbol);\n            },\n            children: \"Start\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"secondary\",\n            onClick: () => disconnect(),\n            children: \"Stop\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              marginLeft: 12,\n              display: 'flex',\n              alignItems: 'center',\n              gap: 8\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: autoStart,\n              onChange: e => {\n                const val = e.target.checked;\n                setAutoStart(val);\n                // if disabling auto start, disconnect immediately\n                if (!val) disconnect();\n                // if enabling and initialized, connect\n                if (val && status === 'initialized' && !connected) connect();\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: 13\n              },\n              children: \"Auto-start\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              marginLeft: 12,\n              display: 'flex',\n              alignItems: 'center',\n              gap: 8\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: showDebug,\n              onChange: e => setShowDebug(e.target.checked)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: 13\n              },\n              children: \"Debug\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this), status === 'reloading' && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 8,\n            color: '#6b7280',\n            fontSize: 13\n          },\n          children: \"\\uCD08\\uAE30\\uD654 \\uC911... \\uC7A0\\uC2DC\\uB9CC \\uAE30\\uB2E4\\uB824\\uC8FC\\uC138\\uC694\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 13\n        }, this), symbolValid === false && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: '#dc2626',\n            marginTop: 8\n          },\n          children: [\"Invalid symbol \\u2014 please check the trading pair (e.g. BTCUSDT)\", suggestions && suggestions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 8\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: 13,\n                marginBottom: 6,\n                color: '#374151'\n              },\n              children: \"Did you mean:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                gap: 8,\n                flexWrap: 'wrap'\n              },\n              children: suggestions.map(s => /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  setSymbol(s);\n                  setSymbolValid(true);\n                  setSuggestions([]);\n                  try {\n                    if (autoStart) connect(s);\n                  } catch (e) {}\n                },\n                style: {\n                  padding: '6px 8px',\n                  borderRadius: 6,\n                  border: '1px solid #e6e9ef',\n                  background: '#fff',\n                  cursor: 'pointer'\n                },\n                children: s\n              }, s, false, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 13\n        }, this), showDebug && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 12,\n            padding: 10,\n            border: '1px dashed #e6e9ef',\n            borderRadius: 8,\n            background: '#fff'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: 13,\n              color: '#374151',\n              marginBottom: 6\n            },\n            children: \"Debug info\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: 13,\n              color: '#6b7280'\n            },\n            children: [\"Available symbols: \", availableSymbols ? availableSymbols.length : 'loading']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 8,\n              fontSize: 13\n            },\n            children: [\"Normalized match for \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: symbol\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 38\n            }, this), \": \", (() => {\n              try {\n                if (!availableSymbols || availableSymbols.length === 0) return 'no data';\n                const q = (symbol || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n                const found = availableSymbols.some(sy => (sy || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase() === q);\n                return found ? 'YES' : 'NO';\n              } catch (e) {\n                return 'err';\n              }\n            })()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 8,\n              display: 'flex',\n              gap: 8\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => fetchExchangeInfo(),\n              style: {\n                padding: '6px 8px'\n              },\n              children: \"Reload symbols\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => console.log('availableSymbols sample', (availableSymbols || []).slice(0, 50)),\n              style: {\n                padding: '6px 8px'\n              },\n              children: \"Log sample\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: async () => {\n                setMarketCheckResult('checking...');\n                try {\n                  const q = (symbol || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n                  if (!q) {\n                    setMarketCheckResult('No symbol entered');\n                    return;\n                  }\n                  const endpoints = [{\n                    name: 'Spot (api.binance.com)',\n                    url: `https://api.binance.com/api/v3/exchangeInfo`\n                  }, {\n                    name: 'Futures USDT-M (fapi.binance.com)',\n                    url: `https://fapi.binance.com/fapi/v1/exchangeInfo`\n                  }, {\n                    name: 'Futures COIN-M (dapi.binance.com)',\n                    url: `https://dapi.binance.com/dapi/v1/exchangeInfo`\n                  }];\n                  const results = [];\n                  for (const e of endpoints) {\n                    try {\n                      const res = await fetch(e.url);\n                      if (!res.ok) {\n                        results.push(`${e.name}: fetch failed ${res.status}`);\n                        continue;\n                      }\n                      const data = await res.json();\n                      const found = Array.isArray(data.symbols) && data.symbols.some(s => (s.symbol || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase() === q);\n                      results.push(`${e.name}: ${found ? 'FOUND' : 'not found'}`);\n                    } catch (err) {\n                      results.push(`${e.name}: error`);\n                    }\n                  }\n                  setMarketCheckResult(results.join(' | '));\n                  console.log('market check', results);\n                } catch (err) {\n                  setMarketCheckResult('error');\n                }\n              },\n              style: {\n                padding: '6px 8px'\n              },\n              children: \"Check markets\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 15\n          }, this), marketCheckResult && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 8,\n              fontSize: 13,\n              color: '#374151'\n            },\n            children: marketCheckResult\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"status\",\n          children: [\"Status: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: status\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 21\n          }, this), \" \", connected ? /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color: '#059669'\n            },\n            children: \"(connected)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 60\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color: '#6b7280'\n            },\n            children: \"(disconnected)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 116\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"metrics\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"metric\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: 12,\n                color: '#6b7280',\n                display: 'flex',\n                alignItems: 'center',\n                gap: 8\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Last price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 464,\n                columnNumber: 17\n              }, this), activeSymbol === symbol ? lastCandleClosed ? /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"badge closed\",\n                children: \"CLOSED\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"badge open\",\n                children: \"LIVE\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 469,\n                columnNumber: 21\n              }, this) : null]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 463,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: activeSymbol === symbol ? lastPrice !== null && lastPrice !== void 0 ? lastPrice : '—' : '—'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 473,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 462,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"metric\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: 12,\n                color: '#6b7280'\n              },\n              children: \"Cross (live)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: activeSymbol === symbol ? cross !== null && cross !== void 0 ? cross : '—' : '—'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 103\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"metric\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: 12,\n                color: '#6b7280'\n              },\n              children: \"Cross (confirmed)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: activeSymbol === symbol ? confirmedCross !== null && confirmedCross !== void 0 ? confirmedCross : '—' : '—'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 108\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 476,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"metric\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: 12,\n                color: '#6b7280'\n              },\n              children: \"EMA26\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: activeSymbol === symbol && ema26 ? ema26.toFixed(4) : '—'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 96\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 477,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"metric\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: 12,\n                color: '#6b7280'\n              },\n              children: \"EMA200\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: activeSymbol === symbol && ema200 ? ema200.toFixed(4) : '—'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 97\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alerts\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: 14,\n              fontWeight: 600\n            },\n            children: \"Alerts\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 13\n          }, this), events.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 8,\n              color: '#6b7280'\n            },\n            children: \"No alerts yet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 36\n          }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: events.map((ev, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n              style: {\n                padding: '8px',\n                borderBottom: '1px solid #f1f5f9',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'space-between'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  gap: 12,\n                  alignItems: 'center'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `alert-type ${ev.type}`,\n                  style: {\n                    textTransform: 'uppercase'\n                  },\n                  children: ev.type\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 488,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: 13,\n                    color: '#0f172a',\n                    fontWeight: 600\n                  },\n                  children: ev.symbol ? `${ev.symbol}` : ''\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 489,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: 13,\n                    color: '#0f172a',\n                    fontWeight: 600\n                  },\n                  children: ev.price\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 490,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 487,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: 12,\n                  color: '#6b7280'\n                },\n                children: ev.time\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 492,\n                columnNumber: 21\n              }, this)]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 486,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"note\",\n          children: \"Notes: This app uses Binance public REST + websocket. Make sure network allows wss access to stream.binance.com.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 499,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 282,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"n6tQP+SPXmca1CodP3J7SH6DJ+4=\", false, function () {\n  return [useEmaCross];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useEmaCross","jsxDEV","_jsxDEV","beep","AudioCtx","window","AudioContext","webkitAudioContext","ctx","o","createOscillator","g","createGain","type","frequency","value","connect","destination","start","gain","setValueAtTime","currentTime","exponentialRampToValueAtTime","setTimeout","stop","close","e","App","_s","symbol","setSymbol","autoStart","setAutoStart","symbolValid","setSymbolValid","symbolValidateTimer","availableSymbols","setAvailableSymbols","showDebug","setShowDebug","suggestions","setSuggestions","marketCheckResult","setMarketCheckResult","fetchExchangeInfo","res","fetch","ok","console","warn","status","data","json","syms","symbols","map","s","validateSymbolOnce","q","replace","toUpperCase","length","normQ","sym","normSym","Array","isArray","ema26","ema200","lastPrice","lastCandleClosed","cross","confirmedCross","confirmedSource","connected","disconnect","activeSymbol","autoConnect","debug","toString","events","setEvents","lastNotified","importInputRef","exportAlerts","JSON","stringify","blob","Blob","url","URL","createObjectURL","a","document","createElement","now","Date","fname","toISOString","slice","href","download","body","appendChild","click","remove","revokeObjectURL","handleImportClick","current","handleFileInputChange","f","target","files","reader","FileReader","onload","ev","txt","result","parsed","parse","toAdd","it","copy","Object","assign","ts","parsedTs","time","isNaN","toLocaleString","merged","err","readAsText","clearAlerts","localStorage","removeItem","ALERTS_LS_KEY","saveAlertsToLocalStorage","arr","toStore","setItem","loadAlertsFromLocalStorage","raw","getItem","saved","cutoff","filtered","filter","handle","Notification","permission","requestPermission","then","removeEventListener","addEventListener","symToShow","evObj","price","source","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","marginLeft","fontSize","color","display","alignItems","gap","onChange","v","clearTimeout","pool","exact","some","sy","includes","found","startsWith","disabled","title","onClick","checked","val","marginTop","marginBottom","flexWrap","padding","borderRadius","border","background","cursor","log","endpoints","name","results","push","join","toFixed","fontWeight","i","borderBottom","justifyContent","textTransform","_c","$RefreshReg$"],"sources":["C:/Users/e1it3/Desktop/program/binance_alert/src/App.js"],"sourcesContent":["import './App.css';\nimport React, { useEffect, useRef, useState } from 'react';\nimport useEmaCross from './hooks/useEmaCross';\n\nfunction beep() {\n  try {\n    const AudioCtx = window.AudioContext || window.webkitAudioContext;\n    const ctx = new AudioCtx();\n    const o = ctx.createOscillator();\n    const g = ctx.createGain();\n    o.type = 'sine';\n    o.frequency.value = 880;\n    o.connect(g);\n    g.connect(ctx.destination);\n    o.start();\n    g.gain.setValueAtTime(0.0001, ctx.currentTime);\n    g.gain.exponentialRampToValueAtTime(0.1, ctx.currentTime + 0.01);\n    g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 0.6);\n    setTimeout(() => {\n      o.stop();\n      try { ctx.close(); } catch (e) {}\n    }, 700);\n  } catch (e) {\n    // ignore\n  }\n}\n\nfunction App() {\n  const [symbol, setSymbol] = useState('BTCUSDT');\n  const [autoStart, setAutoStart] = useState(true);\n  const [symbolValid, setSymbolValid] = useState(null); // null=unknown, true/false\n  const symbolValidateTimer = useRef(null);\n  const [availableSymbols, setAvailableSymbols] = useState(null);\n  const [showDebug, setShowDebug] = useState(false);\n  const [suggestions, setSuggestions] = useState([]);\n  const [marketCheckResult, setMarketCheckResult] = useState(null);\n  // helper to fetch exchangeInfo and populate availableSymbols\n  async function fetchExchangeInfo() {\n    try {\n      // default to Binance Futures (USDT-M) exchangeInfo for symbols\n      const res = await fetch('https://fapi.binance.com/fapi/v1/exchangeInfo');\n      if (!res.ok) {\n        console.warn('exchangeInfo fetch failed', res.status);\n        setAvailableSymbols([]);\n        return;\n      }\n      const data = await res.json();\n      const syms = (data.symbols || []).map(s => s.symbol);\n      setAvailableSymbols(syms);\n    } catch (e) {\n      console.warn('exchangeInfo fetch error', e);\n      setAvailableSymbols([]);\n    }\n  }\n\n  // fetch full symbol list once on mount for reliable validation\n  useEffect(() => {\n    fetchExchangeInfo();\n  }, []);\n\n  // helper to validate a symbol (returns true/false)\n  async function validateSymbolOnce(s) {\n    const q = (s || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n    if (!q) return false;\n    // If we have a cached symbol list, compare using a normalized form (strip non-alnum, uppercase)\n    if (availableSymbols && availableSymbols.length > 0) {\n      const normQ = q;\n      for (const sym of availableSymbols) {\n        const normSym = (sym || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n        if (normSym === normQ) return true;\n      }\n      return false;\n    }\n    // Fallback to exchangeInfo query for the single symbol\n    try {\n      // fallback to Binance Futures exchangeInfo lookup\n      const res = await fetch(`https://fapi.binance.com/fapi/v1/exchangeInfo?symbol=${q}`);\n      if (!res.ok) return false;\n      const data = await res.json();\n      // if API returned an object with matching symbol(s), accept it\n      if (data && Array.isArray(data.symbols) && data.symbols.length > 0) return true;\n      if (data && data.symbol) return true;\n      return false;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  // if symbol becomes invalid, disable autoStart and disconnect to avoid wrong subscriptions\n  // (moved below after hook initialization because it depends on connected/disconnect)\n  const { ema26, ema200, lastPrice, lastCandleClosed, cross, confirmedCross, confirmedSource, connected, status, connect, disconnect, activeSymbol } = useEmaCross({ symbol, autoConnect: autoStart, debug: showDebug });\n\n  // 자동 연결: symbol이 유효하고 autoStart가 켜져 있으면 Start 버튼을 누르지 않아도 connect 호출\n  useEffect(() => {\n    try {\n      const q = (symbol || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n      if (q && symbolValid === true && autoStart) {\n        // avoid calling connect if already active for this symbol\n        if (!activeSymbol || activeSymbol.toString().toUpperCase() !== q) {\n          connect(q);\n        }\n      }\n    } catch (e) {\n      // ignore\n    }\n  }, [symbol, symbolValid, autoStart, activeSymbol, connect]);\n  const [events, setEvents] = useState([]);\n  const lastNotified = useRef(null);\n  const importInputRef = useRef(null);\n\n  // Export current alerts as a JSON file\n  function exportAlerts() {\n    try {\n      const data = JSON.stringify(events || [], null, 2);\n      const blob = new Blob([data], { type: 'application/json' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      const now = new Date();\n      const fname = `alerts-${now.toISOString().slice(0,10)}.json`;\n      a.href = url;\n      a.download = fname;\n      document.body.appendChild(a);\n      a.click();\n      a.remove();\n      URL.revokeObjectURL(url);\n    } catch (e) {\n      console.warn('export failed', e);\n    }\n  }\n\n  function handleImportClick() {\n    try {\n      if (importInputRef.current) importInputRef.current.click();\n    } catch (e) {}\n  }\n\n  function handleFileInputChange(e) {\n    const f = e.target.files && e.target.files[0];\n    if (!f) return;\n    const reader = new FileReader();\n    reader.onload = (ev) => {\n      try {\n        const txt = ev.target.result;\n        const parsed = JSON.parse(txt);\n        if (!Array.isArray(parsed)) return;\n        // normalize: ensure each item has ts/time\n        const toAdd = parsed.map((it) => {\n          const copy = Object.assign({}, it);\n          if (!copy.ts) {\n            const parsedTs = Date.parse(copy.time || '');\n            copy.ts = !isNaN(parsedTs) ? parsedTs : Date.now();\n          }\n          if (!copy.time) copy.time = new Date(copy.ts).toLocaleString();\n          return copy;\n        });\n        // merge (prepend) and limit to 500\n        const merged = [...toAdd, ...events].slice(0, 500);\n        setEvents(merged);\n      } catch (err) {\n        console.warn('import parse error', err);\n      }\n    };\n    reader.readAsText(f);\n    // clear input value so same file can be re-imported if needed\n    e.target.value = '';\n  }\n\n  function clearAlerts() {\n    setEvents([]);\n    try { localStorage.removeItem(ALERTS_LS_KEY); } catch (e) {}\n  }\n\n  // --- localStorage에 Alerts 저장/복원 헬퍼 ---\n  const ALERTS_LS_KEY = 'alerts';\n  function saveAlertsToLocalStorage(arr) {\n    try {\n      if (!Array.isArray(arr)) return;\n      // 저장 크기 제한을 위해 최신 500개(로컬스토리지라 쿠키보다 여유)\n      const toStore = JSON.stringify(arr.slice(0, 500));\n      localStorage.setItem(ALERTS_LS_KEY, toStore);\n    } catch (e) {\n      // ignore\n    }\n  }\n\n  function loadAlertsFromLocalStorage() {\n    try {\n      const raw = localStorage.getItem(ALERTS_LS_KEY);\n      if (!raw) return null;\n      const parsed = JSON.parse(raw);\n      if (Array.isArray(parsed)) return parsed;\n      return null;\n    } catch (e) {\n      return null;\n    }\n  }\n\n  // 복원: 마운트 시 localStorage에서 alerts 복원 (7일 초과 항목은 제거)\n  useEffect(() => {\n    try {\n      const saved = loadAlertsFromLocalStorage();\n      if (saved && Array.isArray(saved) && saved.length > 0) {\n        const cutoff = Date.now() - 1000 * 60 * 60 * 24 * 7; // 7 days\n        const filtered = saved.filter((ev) => {\n          if (!ev) return false;\n          if (typeof ev.ts === 'number') return ev.ts >= cutoff;\n          // try parse time string as fallback\n          const parsed = Date.parse(ev.time || '');\n          if (!isNaN(parsed)) return parsed >= cutoff;\n          return false;\n        });\n        setEvents(filtered);\n      }\n    } catch (e) {}\n  }, []);\n\n  // 저장: events가 바뀔 때마다 localStorage에 반영 (저장 전에 7일 초과 항목 제거)\n  useEffect(() => {\n    try {\n      const cutoff = Date.now() - 1000 * 60 * 60 * 24 * 7; // 7 days\n      const filtered = (events || []).filter((ev) => {\n        if (!ev) return false;\n        if (typeof ev.ts === 'number') return ev.ts >= cutoff;\n        const parsed = Date.parse(ev.time || '');\n        if (!isNaN(parsed)) return parsed >= cutoff;\n        return false;\n      });\n      saveAlertsToLocalStorage(filtered);\n    } catch (e) {}\n  }, [events]);\n\n  // if symbol becomes invalid, disable autoStart and disconnect to avoid wrong subscriptions\n  useEffect(() => {\n    if (symbolValid === false) {\n      if (autoStart) setAutoStart(false);\n      // ensure disconnected\n      if (connected) disconnect();\n    }\n    // include dependencies to avoid stale closures\n  }, [symbolValid, autoStart, connected, disconnect]);\n\n  // Ask for notification permission on first user interaction\n  useEffect(() => {\n    const handle = () => {\n      if ('Notification' in window && Notification.permission === 'default') {\n        Notification.requestPermission().then(() => {});\n      }\n      window.removeEventListener('click', handle);\n    };\n    window.addEventListener('click', handle);\n    return () => window.removeEventListener('click', handle);\n  }, []);\n\n  // react to confirmed cross changes and notify (skip initial)\n  useEffect(() => {\n    if (!confirmedCross) return;\n    if (lastNotified.current == null) {\n      // seed without notifying\n      lastNotified.current = confirmedCross;\n      return;\n    }\n\n    if (lastNotified.current !== confirmedCross) {\n      const type = confirmedCross === 'bull' ? 'Bullish EMA26 > EMA200' : 'Bearish EMA26 < EMA200';\n      const symToShow = activeSymbol || symbol;\n      const body = `${symToShow} ${type} @ ${lastPrice ?? 'N/A'}`;\n\n      // browser notification\n      if ('Notification' in window && Notification.permission === 'granted') {\n        new Notification(type, { body });\n      }\n\n      // beep and log\n      beep();\n      const evObj = { ts: Date.now(), time: new Date().toLocaleString(), type: confirmedCross, price: lastPrice, symbol: symToShow, source: confirmedSource || 'unknown' };\n      setEvents((s) => [evObj, ...s].slice(0, 500));\n      lastNotified.current = confirmedCross;\n    }\n  }, [confirmedCross, lastPrice, symbol, activeSymbol, confirmedSource]);\n\n  return (\n    <div className=\"App\">\n      <div className=\"container\">\n        <div className=\"card\">\n          <div className=\"header\">\n            <div className=\"title\">Binance EMA Cross Alert</div>\n            <div style={{ marginLeft: 'auto', fontSize: 12, color: '#6b7280' }}>5m · EMA26 / EMA200</div>\n          </div>\n\n          <div className=\"controls\">\n            <label style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n              <span style={{ fontSize: 13 }}>Symbol</span>\n              <input type=\"text\" value={symbol} onChange={(e) => {\n                const v = e.target.value.toUpperCase();\n                setSymbol(v);\n                // reset validation state while typing\n                setSymbolValid(null);\n                if (symbolValidateTimer.current) clearTimeout(symbolValidateTimer.current);\n                symbolValidateTimer.current = setTimeout(() => {\n                  try {\n                    const q = v.replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n                    const pool = availableSymbols || [];\n                    if (pool.length > 0) {\n                      const normQ = q;\n                      // try to find exact match using normalized comparison\n                      const exact = pool.some(sy => (sy || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase() === normQ) || pool.includes(q);\n                      if (exact) {\n                        setSymbolValid(true);\n                        setSuggestions([]);\n                        // if autoStart is enabled, start monitoring immediately for this symbol\n                        try {\n                          if (autoStart) {\n                            connect(q);\n                          }\n                        } catch (e) {\n                          // connect may be stale during initial render; ignore\n                        }\n                        return;\n                      }\n                      const found = pool.filter(s => s.includes(q) || s.startsWith(q) || q.startsWith(s)).slice(0, 8);\n                      setSuggestions(found);\n                      // If we have candidate suggestions, treat validation as \"unknown\" while the user picks one.\n                      // Only mark invalid if there are no suggestions and it's not an exact match.\n                      setSymbolValid(found.length > 0 ? null : false);\n                      return;\n                    }\n                    // fallback: try direct exchangeInfo query\n                    (async () => {\n                      try {\n                        const url = `https://api.binance.com/api/v3/exchangeInfo?symbol=${q}`;\n                        const res = await fetch(url);\n                        if (!res.ok) {\n                          setSymbolValid(false);\n                          return;\n                        }\n                        const data = await res.json();\n                        if (data && (data.symbols || data.symbol)) {\n                          setSymbolValid(true);\n                        } else {\n                          setSymbolValid(false);\n                        }\n                      } catch (err) {\n                        setSymbolValid(false);\n                      }\n                    })();\n                  } catch (err) {\n                    setSymbolValid(false);\n                    setSuggestions([]);\n                  }\n                }, 600);\n              }} />\n            </label>\n            <button disabled={!(symbolValid === true) || status === 'reloading'} title={!(symbolValid === true) ? '유효한 심볼을 입력하세요' : (status === 'reloading' ? '초기화 중...' : 'Start')} onClick={async () => {\n              // validate before connecting\n              const ok = await validateSymbolOnce(symbol);\n              if (!ok) {\n                setSymbolValid(false);\n                return;\n              }\n              setSymbolValid(true);\n              connect(symbol);\n            }}>Start</button>\n            <button className=\"secondary\" onClick={() => disconnect()}>Stop</button>\n            <label style={{ marginLeft: 12, display: 'flex', alignItems: 'center', gap: 8 }}>\n              <input type=\"checkbox\" checked={autoStart} onChange={(e) => {\n                const val = e.target.checked;\n                setAutoStart(val);\n                // if disabling auto start, disconnect immediately\n                if (!val) disconnect();\n                // if enabling and initialized, connect\n                if (val && status === 'initialized' && !connected) connect();\n              }} />\n              <span style={{ fontSize: 13 }}>Auto-start</span>\n            </label>\n            <label style={{ marginLeft: 12, display: 'flex', alignItems: 'center', gap: 8 }}>\n              <input type=\"checkbox\" checked={showDebug} onChange={(e) => setShowDebug(e.target.checked)} />\n              <span style={{ fontSize: 13 }}>Debug</span>\n            </label>\n          </div>\n          {/* 간단한 로딩 표시: 심볼 변경으로 상태가 reloading일 때 보임 */}\n          {status === 'reloading' && (\n            <div style={{ marginTop: 8, color: '#6b7280', fontSize: 13 }}>초기화 중... 잠시만 기다려주세요</div>\n          )}\n          {symbolValid === false && (\n            <div style={{ color: '#dc2626', marginTop: 8 }}>\n              Invalid symbol — please check the trading pair (e.g. BTCUSDT)\n              {suggestions && suggestions.length > 0 && (\n                <div style={{ marginTop: 8 }}>\n                  <div style={{ fontSize: 13, marginBottom: 6, color: '#374151' }}>Did you mean:</div>\n                  <div style={{ display: 'flex', gap: 8, flexWrap: 'wrap' }}>\n                    {suggestions.map((s) => (\n                      <button key={s} onClick={() => {\n                        setSymbol(s);\n                        setSymbolValid(true);\n                        setSuggestions([]);\n                        try { if (autoStart) connect(s); } catch (e) {}\n                      }} style={{ padding: '6px 8px', borderRadius: 6, border: '1px solid #e6e9ef', background: '#fff', cursor: 'pointer' }}>{s}</button>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n\n          {showDebug && (\n            <div style={{ marginTop: 12, padding: 10, border: '1px dashed #e6e9ef', borderRadius: 8, background: '#fff' }}>\n              <div style={{ fontSize: 13, color: '#374151', marginBottom: 6 }}>Debug info</div>\n              <div style={{ fontSize: 13, color: '#6b7280' }}>Available symbols: {availableSymbols ? availableSymbols.length : 'loading'}</div>\n              <div style={{ marginTop: 8, fontSize: 13 }}>\n                Normalized match for <strong>{symbol}</strong>: {\n                  (() => {\n                    try {\n                      if (!availableSymbols || availableSymbols.length === 0) return 'no data';\n                      const q = (symbol || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n                      const found = availableSymbols.some(sy => (sy || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase() === q);\n                      return found ? 'YES' : 'NO';\n                    } catch (e) { return 'err'; }\n                  })()\n                }\n              </div>\n              <div style={{ marginTop: 8, display: 'flex', gap: 8 }}>\n                <button onClick={() => fetchExchangeInfo()} style={{ padding: '6px 8px' }}>Reload symbols</button>\n                <button onClick={() => console.log('availableSymbols sample', (availableSymbols || []).slice(0, 50))} style={{ padding: '6px 8px' }}>Log sample</button>\n                <button onClick={async () => {\n                  setMarketCheckResult('checking...');\n                  try {\n                    const q = (symbol || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n                    if (!q) { setMarketCheckResult('No symbol entered'); return; }\n                    const endpoints = [\n                      { name: 'Spot (api.binance.com)', url: `https://api.binance.com/api/v3/exchangeInfo` },\n                      { name: 'Futures USDT-M (fapi.binance.com)', url: `https://fapi.binance.com/fapi/v1/exchangeInfo` },\n                      { name: 'Futures COIN-M (dapi.binance.com)', url: `https://dapi.binance.com/dapi/v1/exchangeInfo` },\n                    ];\n                    const results = [];\n                    for (const e of endpoints) {\n                      try {\n                        const res = await fetch(e.url);\n                        if (!res.ok) { results.push(`${e.name}: fetch failed ${res.status}`); continue; }\n                        const data = await res.json();\n                        const found = Array.isArray(data.symbols) && data.symbols.some(s => ((s.symbol||'').replace(/[^A-Za-z0-9]/g,'').toUpperCase()) === q);\n                        results.push(`${e.name}: ${found ? 'FOUND' : 'not found'}`);\n                      } catch (err) {\n                        results.push(`${e.name}: error`);\n                      }\n                    }\n                    setMarketCheckResult(results.join(' | '));\n                    console.log('market check', results);\n                  } catch (err) {\n                    setMarketCheckResult('error');\n                  }\n                }} style={{ padding: '6px 8px' }}>Check markets</button>\n              </div>\n              {marketCheckResult && <div style={{ marginTop: 8, fontSize: 13, color: '#374151' }}>{marketCheckResult}</div>}\n            </div>\n          )}\n\n          <div className=\"status\">\n            Status: <strong>{status}</strong> {connected ? <span style={{ color: '#059669' }}>(connected)</span> : <span style={{ color: '#6b7280' }}>(disconnected)</span>}\n          </div>\n\n          <div className=\"metrics\">\n            <div className=\"metric\">\n              <div style={{ fontSize: 12, color: '#6b7280', display: 'flex', alignItems: 'center', gap: 8 }}>\n                <span>Last price</span>\n                {activeSymbol === symbol ? (\n                  lastCandleClosed ? (\n                    <span className=\"badge closed\">CLOSED</span>\n                  ) : (\n                    <span className=\"badge open\">LIVE</span>\n                  )\n                ) : null}\n              </div>\n              <div>{activeSymbol === symbol ? (lastPrice ?? '—') : '—'}</div>\n            </div>\n            <div className=\"metric\"><div style={{ fontSize: 12, color: '#6b7280' }}>Cross (live)</div><div>{activeSymbol === symbol ? (cross ?? '—') : '—'}</div></div>\n            <div className=\"metric\"><div style={{ fontSize: 12, color: '#6b7280' }}>Cross (confirmed)</div><div>{activeSymbol === symbol ? (confirmedCross ?? '—') : '—'}</div></div>\n            <div className=\"metric\"><div style={{ fontSize: 12, color: '#6b7280' }}>EMA26</div><div>{activeSymbol === symbol && ema26 ? ema26.toFixed(4) : '—'}</div></div>\n            <div className=\"metric\"><div style={{ fontSize: 12, color: '#6b7280' }}>EMA200</div><div>{activeSymbol === symbol && ema200 ? ema200.toFixed(4) : '—'}</div></div>\n          </div>\n\n          <div className=\"alerts\">\n            <div style={{ fontSize: 14, fontWeight: 600 }}>Alerts</div>\n            {events.length === 0 ? <div style={{ marginTop: 8, color: '#6b7280' }}>No alerts yet</div> : (\n              <ul>\n                {events.map((ev, i) => (\n                  <li key={i} style={{ padding: '8px', borderBottom: '1px solid #f1f5f9', display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n                    <div style={{ display: 'flex', gap: 12, alignItems: 'center' }}>\n                      <span className={`alert-type ${ev.type}`} style={{ textTransform: 'uppercase' }}>{ev.type}</span>\n                      <div style={{ fontSize: 13, color: '#0f172a', fontWeight: 600 }}>{ev.symbol ? `${ev.symbol}` : ''}</div>\n                      <div style={{ fontSize: 13, color: '#0f172a', fontWeight: 600 }}>{ev.price}</div>\n                    </div>\n                    <div style={{ fontSize: 12, color: '#6b7280' }}>{ev.time}</div>\n                  </li>\n                ))}\n              </ul>\n            )}\n          </div>\n\n          <div className=\"note\">Notes: This app uses Binance public REST + websocket. Make sure network allows wss access to stream.binance.com.</div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}