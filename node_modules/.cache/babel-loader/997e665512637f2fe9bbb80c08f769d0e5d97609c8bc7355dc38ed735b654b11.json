{"ast":null,"code":"import React,{useEffect,useMemo,useState,useRef,useCallback}from'react';import scannerManager from'../lib/scannerManager';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ScannerPage(_ref){let{availableSymbols,fetchExchangeInfo,monitorMinutes,setMonitorMinutes,monitorEma1,setMonitorEma1,monitorEma2,setMonitorEma2}=_ref;const symbols=useMemo(()=>Array.isArray(availableSymbols)?availableSymbols.slice():[],[availableSymbols]);const[state,setState]=useState(scannerManager.getState());// local UI-only scan type to immediately reflect button clicks in the progress bar\nconst[uiScanType,setUiScanType]=useState(null);// Local string inputs so Scanner page inputs are independent from the Alerts/Controls inputs.\n// Initialize from localStorage (scannerDefaults) when available so the Scanner retains its own\n// saved defaults across navigation. IMPORTANT: if no scannerDefaults exist, do NOT read\n// parent `monitor*` props — instead use fixed sane defaults so the Scanner will not follow\n// the Alerts/Controls values.\nfunction readScannerDefaults(){try{const raw=localStorage.getItem('scannerDefaults');if(raw){const p=JSON.parse(raw);return{mins:typeof p.mins!=='undefined'?String(p.mins):'5',ema1:typeof p.ema1!=='undefined'?String(p.ema1):'26',ema2:typeof p.ema2!=='undefined'?String(p.ema2):'200'};}}catch(e){}// NO parent prop usage here — return fixed defaults to avoid following Alerts values\nreturn{mins:'5',ema1:'26',ema2:'200'};}const initialScanner=readScannerDefaults();const[minsStr,setMinsStr]=useState(initialScanner.mins);const[ema1Str,setEma1Str]=useState(initialScanner.ema1);const[ema2Str,setEma2Str]=useState(initialScanner.ema2);// Note: intentionally do NOT re-sync local scanner inputs when parent monitor values change.\n// This keeps Scanner inputs independent from the Alerts/Controls values after initial mount.\nuseEffect(()=>{// provide symbol list provider to manager\nscannerManager.setGetSymbols(()=>symbols||[]);},[symbols]);useEffect(()=>{// ensure we have exchange info loaded\nif((!symbols||symbols.length===0)&&typeof fetchExchangeInfo==='function'){try{fetchExchangeInfo();}catch(e){}}},[symbols,fetchExchangeInfo]);// modal state for newly detected matches (removed modal display; we keep beep only)\nconst shownResultsRef=useRef(new Set());useEffect(()=>{// On mount, migrate old localStorage scanner results that lack the new `type` field.\n// Only run a simple cleanup to avoid showing stale results without scan type.\ntry{const raw=localStorage.getItem('scannerResults');if(raw){const parsed=JSON.parse(raw);if(Array.isArray(parsed)&&parsed.some(r=>!r||typeof r.type==='undefined')){console.info('scannerResults migration: removing old results missing `type` field');localStorage.removeItem('scannerResults');}}}catch(e){// ignore parse errors and continue\n}// subscribe to manager updates\nconst off=scannerManager.onUpdate(s=>setState(s));// initialize state and mark any existing results as already shown so we don't beep on mount\nconst init=scannerManager.getState();setState(init);try{const existing=Array.isArray(init.results)?init.results:[];for(const r of existing){const rid=r&&r.id?r.id:\"\".concat(r&&r.symbol?r.symbol:'',\"::\").concat(r&&r.time?r.time:'',\"::\").concat(r&&r.emaShort?r.emaShort:'',\"::\").concat(r&&r.emaLong?r.emaLong:'');shownResultsRef.current.add(rid);}}catch(e){}return()=>off();},[]);const saveScannerDefaults=useCallback((mins,ema1,ema2)=>{try{const obj={mins:mins,ema1:ema1,ema2:ema2};localStorage.setItem('scannerDefaults',JSON.stringify(obj));}catch(e){}},[]);// Note: do NOT auto-persist parent monitor values on mount; that would copy Alerts values\n// into Scanner and re-create the follow behavior. Scanner defaults are only set when the\n// user explicitly starts a scan (startGolden/startDead) which persists their choices.\nconst startGolden=useCallback(()=>{try{// immediately set UI scan type so progress bar color changes on click\nsetUiScanType('golden');const mins=parseInt(minsStr,10);const ema1=parseInt(ema1Str,10);const ema2=parseInt(ema2Str,10);// validate EMA ordering (short < long)\nif(Number.isFinite(ema1)&&Number.isFinite(ema2)&&ema1>=ema2){// user likely swapped fields; prevent a confusing scan\n// use a simple alert so user notices immediately\ntry{window.alert('Invalid EMA values: EMA1 must be smaller than EMA2');}catch(e){}setUiScanType(null);return;}const intervalVal=Number.isFinite(mins)&&mins>0?mins:monitorMinutes;const opts={interval:intervalVal,emaShort:Number.isFinite(ema1)&&ema1>0?ema1:monitorEma1,emaLong:Number.isFinite(ema2)&&ema2>0?ema2:monitorEma2,// real-time monitoring mode\nmonitor:true,pollIntervalMs:Number.isFinite(intervalVal)?intervalVal*60*1000+5000:undefined,// conservative runtime options to avoid hitting API rate limits on start\nconcurrency:2,batchDelay:200,maxConcurrency:4};scannerManager.start('golden',opts);// persist scanner choices as defaults\nsaveScannerDefaults(opts.interval,opts.emaShort,opts.emaLong);}catch(e){}},[minsStr,ema1Str,ema2Str,monitorMinutes,monitorEma1,monitorEma2,saveScannerDefaults]);const startDead=useCallback(()=>{try{// immediately set UI scan type so progress bar color changes on click\nsetUiScanType('dead');const mins=parseInt(minsStr,10);const ema1=parseInt(ema1Str,10);const ema2=parseInt(ema2Str,10);// validate EMA ordering (short < long)\nif(Number.isFinite(ema1)&&Number.isFinite(ema2)&&ema1>=ema2){try{window.alert('Invalid EMA values: EMA1 must be smaller than EMA2');}catch(e){}setUiScanType(null);return;}const intervalVal2=Number.isFinite(mins)&&mins>0?mins:monitorMinutes;const opts={interval:intervalVal2,emaShort:Number.isFinite(ema1)&&ema1>0?ema1:monitorEma1,emaLong:Number.isFinite(ema2)&&ema2>0?ema2:monitorEma2,monitor:true,pollIntervalMs:Number.isFinite(intervalVal2)?intervalVal2*60*1000+5000:undefined,concurrency:2,batchDelay:200,maxConcurrency:4};scannerManager.start('dead',opts);// persist scanner choices as defaults\nsaveScannerDefaults(opts.interval,opts.emaShort,opts.emaLong);}catch(e){}},[minsStr,ema1Str,ema2Str,monitorMinutes,monitorEma1,monitorEma2,saveScannerDefaults]);function stopScan(){try{scannerManager.stop();}catch(e){}setUiScanType(null);}// keep UI scan type in sync with manager state when manager finishes or changes\nconst managerScanType=state&&state.scanType?state.scanType:null;useEffect(()=>{if(!managerScanType)setUiScanType(null);else setUiScanType(managerScanType);},[managerScanType]);const running=!!state.running;const currentSymbol=state.currentSymbol;const progress=state.progress||{done:0,total:0};// sort results by volume (descending) so high-volume matches appear first\nconst results=useMemo(()=>{const arr=Array.isArray(state.results)?state.results.slice():[];try{arr.sort((a,b)=>{const va=a&&typeof a.volume==='number'?a.volume:a&&a.volume?Number(a.volume):0;const vb=b&&typeof b.volume==='number'?b.volume:b&&b.volume?Number(b.volume):0;return(vb||0)-(va||0);});}catch(e){}return arr;},[state.results]);// use a ticking 'now' so we can compute elapsed from manager's persistent scanStartTime\nconst[now,setNow]=useState(Date.now());useEffect(()=>{const id=setInterval(()=>setNow(Date.now()),1000);return()=>clearInterval(id);},[]);function formatElapsed(ms){if(!ms||ms<=0)return'0:00';const totalSec=Math.floor(ms/1000);const hrs=Math.floor(totalSec/3600);const mins=Math.floor(totalSec%3600/60);const secs=totalSec%60;const pad=n=>n.toString().padStart(2,'0');if(hrs>0)return\"\".concat(hrs,\":\").concat(pad(mins),\":\").concat(pad(secs));return\"\".concat(mins,\":\").concat(pad(secs));}// copied symbol feedback\nconst[copiedSymbol,setCopiedSymbol]=useState(null);// small beep helper (reuse pattern from App.beep)\nfunction beep(){try{const AudioCtx=window.AudioContext||window.webkitAudioContext;const ctx=new AudioCtx();const o=ctx.createOscillator();const g=ctx.createGain();o.type='sine';o.frequency.value=880;o.connect(g);g.connect(ctx.destination);o.start();g.gain.setValueAtTime(0.0001,ctx.currentTime);g.gain.exponentialRampToValueAtTime(0.1,ctx.currentTime+0.01);g.gain.exponentialRampToValueAtTime(0.0001,ctx.currentTime+0.6);setTimeout(()=>{o.stop();try{ctx.close();}catch(e){}},700);}catch(e){// ignore\n}}// play beep when a new match is detected (no modal)\nuseEffect(()=>{try{// prefer active list for monitoring notifications\nconst active=Array.isArray(state.active)?state.active:[];if(active&&active.length>0){const top=active[0];const id=top&&top.id?top.id:\"\".concat(top.symbol||'',\"::\").concat(top.time||'',\"::\").concat(top.emaShort||'',\"::\").concat(top.emaLong||'');if(!shownResultsRef.current.has(id)){shownResultsRef.current.add(id);try{beep();}catch(e){}}}else{// fallback to historical results\nif(!results||results.length===0)return;const top=results[0];if(!top)return;const id=top&&top.id?top.id:\"\".concat(top.symbol||'',\"::\").concat(top.time||'',\"::\").concat(top.emaShort||'',\"::\").concat(top.emaLong||'');if(shownResultsRef.current.has(id))return;shownResultsRef.current.add(id);try{beep();}catch(e){}}}catch(e){}},[results]);function formatVolume(v){try{const n=Number(v||0);if(!Number.isFinite(n))return'-';if(Math.abs(n)>=1e9)return\"\".concat((n/1e9).toFixed(2),\"B\");if(Math.abs(n)>=1e6)return\"\".concat((n/1e6).toFixed(2),\"M\");if(Math.abs(n)>=1e3)return\"\".concat((n/1e3).toFixed(2),\"k\");return n.toString();}catch(e){return'-';}}return/*#__PURE__*/_jsxs(\"div\",{className:\"alerts scanner-root\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"alerts-title\",children:\"Binance EMA Cross Scanner\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"panel scanner-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"scanner-controls-left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"control-inline-label\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Mins (candle interval)\"}),/*#__PURE__*/_jsx(\"div\",{className:\"interval-btns\",style:{display:'inline-flex',gap:6,marginLeft:8},children:[{label:'1m',val:'1'},{label:'5m',val:'5'},{label:'30m',val:'30'},{label:'4h',val:'240'}].map(it=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"small-interval-btn \".concat(String(minsStr)===String(it.val)?'active':''),onClick:()=>{setMinsStr(String(it.val));const p=parseInt(it.val,10);if(Number.isFinite(p)&&p>0)saveScannerDefaults(p,parseInt(ema1Str,10)||'',parseInt(ema2Str,10)||'');},children:it.label},it.val))})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"control-inline-label\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"EMA1\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",inputMode:\"numeric\",pattern:\"\\\\d*\",value:ema1Str,onChange:e=>setEma1Str(e.target.value),onBlur:()=>{const p=parseInt(ema1Str,10);if(Number.isFinite(p)&&p>0)saveScannerDefaults(parseInt(minsStr,10)||'',p,parseInt(ema2Str,10)||'');}})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"control-inline-label\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"EMA2\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",inputMode:\"numeric\",pattern:\"\\\\d*\",value:ema2Str,onChange:e=>setEma2Str(e.target.value),onBlur:()=>{const p=parseInt(ema2Str,10);if(Number.isFinite(p)&&p>0)saveScannerDefaults(parseInt(minsStr,10)||'',parseInt(ema1Str,10)||'',p);}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"scanner-controls\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:startGolden,disabled:running,className:\"scanner-btn green\",children:\"Golden\"}),/*#__PURE__*/_jsx(\"button\",{onClick:startDead,disabled:running,className:\"scanner-btn red\",children:\"Dead\"}),/*#__PURE__*/_jsx(\"button\",{onClick:stopScan,disabled:!running,className:\"scanner-btn stop\",children:\"Stop\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"progress-wrap\",\"aria-hidden\":!running,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"scanner-progress-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"scanner-progress-left\",children:running?\"Scanning: \".concat(currentSymbol||'...'):'Idle'}),/*#__PURE__*/_jsxs(\"div\",{className:\"scanner-progress-right\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"scanner-elapsed\",children:state&&state.scanStartTime&&running?formatElapsed(Math.max(0,now-state.scanStartTime)):''}),/*#__PURE__*/_jsxs(\"span\",{className:\"scanner-progress-numbers\",children:[progress.done,\"/\",progress.total||(symbols||[]).filter(s=>/USDT$/i.test(s)).length]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"progress-track\",children:(()=>{const total=progress&&progress.total?progress.total:(symbols||[]).filter(s=>/USDT$/i.test(s)).length||0;const done=progress&&progress.done?progress.done:0;const pct=total>0?Math.min(100,Math.round(done/total*100)):0;// color progress fill to match scanner type (golden=green, dead=red)\n// prefer immediate UI scan type (set on button click) to reflect the user's action\nconst scanType=uiScanType||(state&&state.scanType?state.scanType:null);const fillClass=\"progress-fill \".concat(scanType==='dead'?'dead':scanType==='golden'?'golden':'').trim();return/*#__PURE__*/_jsx(\"div\",{role:\"progressbar\",\"aria-valuemin\":0,\"aria-valuemax\":100,\"aria-valuenow\":pct,className:fillClass,style:{width:\"\".concat(pct,\"%\")}});})()})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"alerts-list\",children:Array.isArray(state.active)&&state.active.length>0?state.active.map((r,idx)=>/*#__PURE__*/_jsxs(\"li\",{className:\"alert-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert-left\",children:[(()=>{const t=r&&r.type?r.type:state&&state.scanType?state.scanType:null;const cls=t==='dead'?'bear':t==='golden'?'bull':'bull';return/*#__PURE__*/_jsx(\"span\",{className:\"alert-indicator \".concat(cls)});})(),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"alert-symbol copy-btn \".concat(copiedSymbol===r.symbol?'copied':''),title:\"Copy symbol\",onClick:async e=>{e.preventDefault();try{if(navigator&&navigator.clipboard&&navigator.clipboard.writeText){await navigator.clipboard.writeText(r.symbol);}else{const ta=document.createElement('textarea');ta.value=r.symbol;document.body.appendChild(ta);ta.select();document.execCommand('copy');document.body.removeChild(ta);}setCopiedSymbol(r.symbol);setTimeout(()=>setCopiedSymbol(null),1200);}catch(err){}},children:r.symbol})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"alert-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert-info\",children:[(()=>{const tt=r&&r.type?r.type:state&&state.scanType?state.scanType:null;const label=tt==='dead'?'Bear':tt==='golden'?'Bull':'Match';return/*#__PURE__*/_jsx(\"div\",{className:\"alert-type-short\",children:label});})(),/*#__PURE__*/_jsx(\"div\",{className:\"alert-time\",children:r.time})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"alert-right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert-volume\",title:\"Volume: \".concat(r.volume||0),children:[\"Vol: \",formatVolume(r.volume)]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"delete-result\",title:\"Remove from active\",onClick:()=>{try{scannerManager.removeActive(r.symbol);}catch(e){}},children:\"\\u2715\"})]})]})]},r.id||\"\".concat(r.symbol,\"-active-\").concat(idx))):results.length===0?/*#__PURE__*/_jsx(\"li\",{className:\"alert-item no-results\",children:\"No matches yet.\"}):results.map((r,idx)=>/*#__PURE__*/_jsxs(\"li\",{className:\"alert-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert-left\",children:[(()=>{const t=r&&r.type?r.type:state&&state.scanType?state.scanType:null;const cls=t==='dead'?'bear':t==='golden'?'bull':'bull';return/*#__PURE__*/_jsx(\"span\",{className:\"alert-indicator \".concat(cls)});})(),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"alert-symbol copy-btn \".concat(copiedSymbol===r.symbol?'copied':''),title:\"Copy symbol to clipboard\",onClick:async e=>{e.preventDefault();try{if(navigator&&navigator.clipboard&&navigator.clipboard.writeText){await navigator.clipboard.writeText(r.symbol);}else{const ta=document.createElement('textarea');ta.value=r.symbol;document.body.appendChild(ta);ta.select();document.execCommand('copy');document.body.removeChild(ta);}setCopiedSymbol(r.symbol);setTimeout(()=>setCopiedSymbol(null),1200);}catch(err){// ignore copy failures\n}},children:r.symbol})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"alert-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert-info\",children:[(()=>{const tt=r&&r.type?r.type:state&&state.scanType?state.scanType:null;const label=tt==='dead'?'Bear':tt==='golden'?'Bull':'Match';return/*#__PURE__*/_jsx(\"div\",{className:\"alert-type-short\",children:label});})(),/*#__PURE__*/_jsx(\"div\",{className:\"alert-time\",children:r.time})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"alert-right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert-volume\",title:\"Volume: \".concat(r.volume||0),children:[\"Vol: \",formatVolume(r.volume)]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"delete-result\",title:\"Remove\",onClick:()=>{try{scannerManager.removeResult(r.id);}catch(e){}},children:\"\\u2715\"})]})]})]},r.id||\"\".concat(r.symbol,\"-\").concat(idx)))})]});}","map":{"version":3,"names":["React","useEffect","useMemo","useState","useRef","useCallback","scannerManager","jsx","_jsx","jsxs","_jsxs","ScannerPage","_ref","availableSymbols","fetchExchangeInfo","monitorMinutes","setMonitorMinutes","monitorEma1","setMonitorEma1","monitorEma2","setMonitorEma2","symbols","Array","isArray","slice","state","setState","getState","uiScanType","setUiScanType","readScannerDefaults","raw","localStorage","getItem","p","JSON","parse","mins","String","ema1","ema2","e","initialScanner","minsStr","setMinsStr","ema1Str","setEma1Str","ema2Str","setEma2Str","setGetSymbols","length","shownResultsRef","Set","parsed","some","r","type","console","info","removeItem","off","onUpdate","s","init","existing","results","rid","id","concat","symbol","time","emaShort","emaLong","current","add","saveScannerDefaults","obj","setItem","stringify","startGolden","parseInt","Number","isFinite","window","alert","intervalVal","opts","interval","monitor","pollIntervalMs","undefined","concurrency","batchDelay","maxConcurrency","start","startDead","intervalVal2","stopScan","stop","managerScanType","scanType","running","currentSymbol","progress","done","total","arr","sort","a","b","va","volume","vb","now","setNow","Date","setInterval","clearInterval","formatElapsed","ms","totalSec","Math","floor","hrs","secs","pad","n","toString","padStart","copiedSymbol","setCopiedSymbol","beep","AudioCtx","AudioContext","webkitAudioContext","ctx","o","createOscillator","g","createGain","frequency","value","connect","destination","gain","setValueAtTime","currentTime","exponentialRampToValueAtTime","setTimeout","close","active","top","has","formatVolume","v","abs","toFixed","className","children","style","display","gap","marginLeft","label","val","map","it","onClick","inputMode","pattern","onChange","target","onBlur","disabled","scanStartTime","max","filter","test","pct","min","round","fillClass","trim","role","width","idx","t","cls","title","preventDefault","navigator","clipboard","writeText","ta","document","createElement","body","appendChild","select","execCommand","removeChild","err","tt","removeActive","removeResult"],"sources":["C:/Users/e1it3/Desktop/program/binance_alert/src/pages/ScannerPage.js"],"sourcesContent":["import React, { useEffect, useMemo, useState, useRef, useCallback } from 'react';\r\nimport scannerManager from '../lib/scannerManager';\r\n\r\nexport default function ScannerPage({ availableSymbols, fetchExchangeInfo, monitorMinutes, setMonitorMinutes, monitorEma1, setMonitorEma1, monitorEma2, setMonitorEma2 }) {\r\n  const symbols = useMemo(() => (Array.isArray(availableSymbols) ? availableSymbols.slice() : []), [availableSymbols]);\r\n  const [state, setState] = useState(scannerManager.getState());\r\n  // local UI-only scan type to immediately reflect button clicks in the progress bar\r\n  const [uiScanType, setUiScanType] = useState(null);\r\n\r\n  // Local string inputs so Scanner page inputs are independent from the Alerts/Controls inputs.\r\n  // Initialize from localStorage (scannerDefaults) when available so the Scanner retains its own\r\n  // saved defaults across navigation. IMPORTANT: if no scannerDefaults exist, do NOT read\r\n  // parent `monitor*` props — instead use fixed sane defaults so the Scanner will not follow\r\n  // the Alerts/Controls values.\r\n  function readScannerDefaults() {\r\n    try {\r\n      const raw = localStorage.getItem('scannerDefaults');\r\n      if (raw) {\r\n        const p = JSON.parse(raw);\r\n        return {\r\n          mins: typeof p.mins !== 'undefined' ? String(p.mins) : '5',\r\n          ema1: typeof p.ema1 !== 'undefined' ? String(p.ema1) : '26',\r\n          ema2: typeof p.ema2 !== 'undefined' ? String(p.ema2) : '200',\r\n        };\r\n      }\r\n    } catch (e) {}\r\n    // NO parent prop usage here — return fixed defaults to avoid following Alerts values\r\n    return { mins: '5', ema1: '26', ema2: '200' };\r\n  }\r\n\r\n  const initialScanner = readScannerDefaults();\r\n  const [minsStr, setMinsStr] = useState(initialScanner.mins);\r\n  const [ema1Str, setEma1Str] = useState(initialScanner.ema1);\r\n  const [ema2Str, setEma2Str] = useState(initialScanner.ema2);\r\n\r\n  // Note: intentionally do NOT re-sync local scanner inputs when parent monitor values change.\r\n  // This keeps Scanner inputs independent from the Alerts/Controls values after initial mount.\r\n\r\n  useEffect(() => {\r\n    // provide symbol list provider to manager\r\n    scannerManager.setGetSymbols(() => symbols || []);\r\n  }, [symbols]);\r\n\r\n  useEffect(() => {\r\n    // ensure we have exchange info loaded\r\n    if ((!symbols || symbols.length === 0) && typeof fetchExchangeInfo === 'function') {\r\n      try { fetchExchangeInfo(); } catch (e) {}\r\n    }\r\n  }, [symbols, fetchExchangeInfo]);\r\n\r\n  // modal state for newly detected matches (removed modal display; we keep beep only)\r\n  const shownResultsRef = useRef(new Set());\r\n\r\n  useEffect(() => {\r\n    // On mount, migrate old localStorage scanner results that lack the new `type` field.\r\n    // Only run a simple cleanup to avoid showing stale results without scan type.\r\n    try {\r\n      const raw = localStorage.getItem('scannerResults');\r\n      if (raw) {\r\n        const parsed = JSON.parse(raw);\r\n        if (Array.isArray(parsed) && parsed.some((r) => !r || typeof r.type === 'undefined')) {\r\n          console.info('scannerResults migration: removing old results missing `type` field');\r\n          localStorage.removeItem('scannerResults');\r\n        }\r\n      }\r\n    } catch (e) {\r\n      // ignore parse errors and continue\r\n    }\r\n\r\n    // subscribe to manager updates\r\n    const off = scannerManager.onUpdate((s) => setState(s));\r\n    // initialize state and mark any existing results as already shown so we don't beep on mount\r\n    const init = scannerManager.getState();\r\n    setState(init);\r\n    try {\r\n      const existing = Array.isArray(init.results) ? init.results : [];\r\n      for (const r of existing) {\r\n        const rid = (r && r.id) ? r.id : `${r && r.symbol ? r.symbol : ''}::${r && r.time ? r.time : ''}::${r && r.emaShort ? r.emaShort : ''}::${r && r.emaLong ? r.emaLong : ''}`;\r\n        shownResultsRef.current.add(rid);\r\n      }\r\n    } catch (e) {}\r\n    return () => off();\r\n  }, []);\r\n\r\n  const saveScannerDefaults = useCallback((mins, ema1, ema2) => {\r\n    try {\r\n      const obj = { mins: mins, ema1: ema1, ema2: ema2 };\r\n      localStorage.setItem('scannerDefaults', JSON.stringify(obj));\r\n    } catch (e) {}\r\n  }, []);\r\n\r\n  // Note: do NOT auto-persist parent monitor values on mount; that would copy Alerts values\r\n  // into Scanner and re-create the follow behavior. Scanner defaults are only set when the\r\n  // user explicitly starts a scan (startGolden/startDead) which persists their choices.\r\n\r\n  const startGolden = useCallback(() => {\r\n    try {\r\n      // immediately set UI scan type so progress bar color changes on click\r\n      setUiScanType('golden');\r\n      const mins = parseInt(minsStr, 10);\r\n      const ema1 = parseInt(ema1Str, 10);\r\n      const ema2 = parseInt(ema2Str, 10);\r\n      // validate EMA ordering (short < long)\r\n      if (Number.isFinite(ema1) && Number.isFinite(ema2) && ema1 >= ema2) {\r\n        // user likely swapped fields; prevent a confusing scan\r\n        // use a simple alert so user notices immediately\r\n        try { window.alert('Invalid EMA values: EMA1 must be smaller than EMA2'); } catch (e) {}\r\n        setUiScanType(null);\r\n        return;\r\n      }\r\n      const intervalVal = Number.isFinite(mins) && mins > 0 ? mins : monitorMinutes;\r\n      const opts = {\r\n        interval: intervalVal,\r\n        emaShort: Number.isFinite(ema1) && ema1 > 0 ? ema1 : monitorEma1,\r\n        emaLong: Number.isFinite(ema2) && ema2 > 0 ? ema2 : monitorEma2,\r\n        // real-time monitoring mode\r\n        monitor: true,\r\n        pollIntervalMs: (Number.isFinite(intervalVal) ? (intervalVal * 60 * 1000 + 5000) : undefined),\r\n        // conservative runtime options to avoid hitting API rate limits on start\r\n        concurrency: 2,\r\n        batchDelay: 200,\r\n        maxConcurrency: 4,\r\n      };\r\n      scannerManager.start('golden', opts);\r\n      // persist scanner choices as defaults\r\n      saveScannerDefaults(opts.interval, opts.emaShort, opts.emaLong);\r\n    } catch (e) {}\r\n  }, [minsStr, ema1Str, ema2Str, monitorMinutes, monitorEma1, monitorEma2, saveScannerDefaults]);\r\n\r\n  const startDead = useCallback(() => {\r\n    try {\r\n      // immediately set UI scan type so progress bar color changes on click\r\n      setUiScanType('dead');\r\n      const mins = parseInt(minsStr, 10);\r\n      const ema1 = parseInt(ema1Str, 10);\r\n      const ema2 = parseInt(ema2Str, 10);\r\n      // validate EMA ordering (short < long)\r\n      if (Number.isFinite(ema1) && Number.isFinite(ema2) && ema1 >= ema2) {\r\n        try { window.alert('Invalid EMA values: EMA1 must be smaller than EMA2'); } catch (e) {}\r\n        setUiScanType(null);\r\n        return;\r\n      }\r\n      const intervalVal2 = Number.isFinite(mins) && mins > 0 ? mins : monitorMinutes;\r\n      const opts = {\r\n        interval: intervalVal2,\r\n        emaShort: Number.isFinite(ema1) && ema1 > 0 ? ema1 : monitorEma1,\r\n        emaLong: Number.isFinite(ema2) && ema2 > 0 ? ema2 : monitorEma2,\r\n        monitor: true,\r\n        pollIntervalMs: (Number.isFinite(intervalVal2) ? (intervalVal2 * 60 * 1000 + 5000) : undefined),\r\n        concurrency: 2,\r\n        batchDelay: 200,\r\n        maxConcurrency: 4,\r\n      };\r\n      scannerManager.start('dead', opts);\r\n      // persist scanner choices as defaults\r\n      saveScannerDefaults(opts.interval, opts.emaShort, opts.emaLong);\r\n    } catch (e) {}\r\n  }, [minsStr, ema1Str, ema2Str, monitorMinutes, monitorEma1, monitorEma2, saveScannerDefaults]);\r\n  function stopScan() { try { scannerManager.stop(); } catch (e) {} setUiScanType(null); }\r\n\r\n  // keep UI scan type in sync with manager state when manager finishes or changes\r\n  const managerScanType = (state && state.scanType) ? state.scanType : null;\r\n  useEffect(() => {\r\n    if (!managerScanType) setUiScanType(null);\r\n    else setUiScanType(managerScanType);\r\n  }, [managerScanType]);\r\n\r\n  const running = !!state.running;\r\n  const currentSymbol = state.currentSymbol;\r\n  const progress = state.progress || { done: 0, total: 0 };\r\n  // sort results by volume (descending) so high-volume matches appear first\r\n  const results = useMemo(() => {\r\n    const arr = Array.isArray(state.results) ? state.results.slice() : [];\r\n    try {\r\n      arr.sort((a, b) => {\r\n        const va = (a && typeof a.volume === 'number') ? a.volume : (a && a.volume ? Number(a.volume) : 0);\r\n        const vb = (b && typeof b.volume === 'number') ? b.volume : (b && b.volume ? Number(b.volume) : 0);\r\n        return (vb || 0) - (va || 0);\r\n      });\r\n    } catch (e) {}\r\n    return arr;\r\n  }, [state.results]);\r\n\r\n  // use a ticking 'now' so we can compute elapsed from manager's persistent scanStartTime\r\n  const [now, setNow] = useState(Date.now());\r\n  useEffect(() => {\r\n    const id = setInterval(() => setNow(Date.now()), 1000);\r\n    return () => clearInterval(id);\r\n  }, []);\r\n\r\n  function formatElapsed(ms) {\r\n    if (!ms || ms <= 0) return '0:00';\r\n    const totalSec = Math.floor(ms / 1000);\r\n    const hrs = Math.floor(totalSec / 3600);\r\n    const mins = Math.floor((totalSec % 3600) / 60);\r\n    const secs = totalSec % 60;\r\n    const pad = (n) => n.toString().padStart(2, '0');\r\n    if (hrs > 0) return `${hrs}:${pad(mins)}:${pad(secs)}`;\r\n    return `${mins}:${pad(secs)}`;\r\n  }\r\n\r\n  // copied symbol feedback\r\n  const [copiedSymbol, setCopiedSymbol] = useState(null);\r\n\r\n  // small beep helper (reuse pattern from App.beep)\r\n  function beep() {\r\n    try {\r\n      const AudioCtx = window.AudioContext || window.webkitAudioContext;\r\n      const ctx = new AudioCtx();\r\n      const o = ctx.createOscillator();\r\n      const g = ctx.createGain();\r\n      o.type = 'sine';\r\n      o.frequency.value = 880;\r\n      o.connect(g);\r\n      g.connect(ctx.destination);\r\n      o.start();\r\n      g.gain.setValueAtTime(0.0001, ctx.currentTime);\r\n      g.gain.exponentialRampToValueAtTime(0.1, ctx.currentTime + 0.01);\r\n      g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 0.6);\r\n      setTimeout(() => {\r\n        o.stop();\r\n        try { ctx.close(); } catch (e) {}\r\n      }, 700);\r\n    } catch (e) {\r\n      // ignore\r\n    }\r\n  }\r\n\r\n  // play beep when a new match is detected (no modal)\r\n  useEffect(() => {\r\n    try {\r\n      // prefer active list for monitoring notifications\r\n      const active = Array.isArray(state.active) ? state.active : [];\r\n      if (active && active.length > 0) {\r\n        const top = active[0];\r\n        const id = (top && top.id) ? top.id : `${top.symbol || ''}::${top.time || ''}::${top.emaShort || ''}::${top.emaLong || ''}`;\r\n        if (!shownResultsRef.current.has(id)) {\r\n          shownResultsRef.current.add(id);\r\n          try { beep(); } catch (e) {}\r\n        }\r\n      } else {\r\n        // fallback to historical results\r\n        if (!results || results.length === 0) return;\r\n        const top = results[0];\r\n        if (!top) return;\r\n        const id = (top && top.id) ? top.id : `${top.symbol || ''}::${top.time || ''}::${top.emaShort || ''}::${top.emaLong || ''}`;\r\n        if (shownResultsRef.current.has(id)) return;\r\n        shownResultsRef.current.add(id);\r\n        try { beep(); } catch (e) {}\r\n      }\r\n    } catch (e) {}\r\n  }, [results]);\r\n\r\n  function formatVolume(v) {\r\n    try {\r\n      const n = Number(v || 0);\r\n      if (!Number.isFinite(n)) return '-';\r\n      if (Math.abs(n) >= 1e9) return `${(n / 1e9).toFixed(2)}B`;\r\n      if (Math.abs(n) >= 1e6) return `${(n / 1e6).toFixed(2)}M`;\r\n      if (Math.abs(n) >= 1e3) return `${(n / 1e3).toFixed(2)}k`;\r\n      return n.toString();\r\n    } catch (e) { return '-'; }\r\n  }\r\n\r\n  return (\r\n  <div className=\"alerts scanner-root\">\r\n      {/* modal removed: only play beep when a new match is detected */}\r\n      <div className=\"alerts-title\">Binance EMA Cross Scanner</div>\r\n  <div className=\"panel scanner-panel\">\r\n        <div className=\"scanner-controls-left\">\r\n          <div className=\"control-inline-label\">\r\n            <span className=\"label-text\">Mins (candle interval)</span>\r\n            <div className=\"interval-btns\" style={{ display: 'inline-flex', gap: 6, marginLeft: 8 }}>\r\n              {[{ label: '1m', val: '1' }, { label: '5m', val: '5' }, { label: '30m', val: '30' }, { label: '4h', val: '240' }].map((it) => (\r\n                <button key={it.val} type=\"button\" className={`small-interval-btn ${String(minsStr) === String(it.val) ? 'active' : ''}`} onClick={() => {\r\n                  setMinsStr(String(it.val));\r\n                  const p = parseInt(it.val, 10);\r\n                  if (Number.isFinite(p) && p > 0) saveScannerDefaults(p, parseInt(ema1Str, 10) || '', parseInt(ema2Str, 10) || '');\r\n                }}>{it.label}</button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n          <label className=\"control-inline-label\">\r\n            <span className=\"label-text\">EMA1</span>\r\n            <input type=\"text\" inputMode=\"numeric\" pattern=\"\\d*\" value={ema1Str} onChange={(e) => setEma1Str(e.target.value)} onBlur={() => {\r\n              const p = parseInt(ema1Str, 10);\r\n              if (Number.isFinite(p) && p > 0) saveScannerDefaults(parseInt(minsStr, 10) || '', p, parseInt(ema2Str, 10) || '');\r\n            }} />\r\n          </label>\r\n          <label className=\"control-inline-label\">\r\n            <span className=\"label-text\">EMA2</span>\r\n            <input type=\"text\" inputMode=\"numeric\" pattern=\"\\d*\" value={ema2Str} onChange={(e) => setEma2Str(e.target.value)} onBlur={() => {\r\n              const p = parseInt(ema2Str, 10);\r\n              if (Number.isFinite(p) && p > 0) saveScannerDefaults(parseInt(minsStr, 10) || '', parseInt(ema1Str, 10) || '', p);\r\n            }} />\r\n          </label>\r\n        </div>\r\n\r\n        <div className=\"scanner-controls\">\r\n          <button onClick={startGolden} disabled={running} className=\"scanner-btn green\">Golden</button>\r\n          <button onClick={startDead} disabled={running} className=\"scanner-btn red\">Dead</button>\r\n          <button onClick={stopScan} disabled={!running} className=\"scanner-btn stop\">Stop</button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* progress bar: shows scanning progress below the buttons */}\r\n      <div className=\"progress-wrap\" aria-hidden={!running}>\r\n        <div className=\"scanner-progress-container\">\r\n          <div className=\"scanner-progress-left\">{running ? `Scanning: ${currentSymbol || '...'}` : 'Idle'}</div>\r\n          <div className=\"scanner-progress-right\">\r\n            {/* elapsed time shown left of the numeric progress (persists across pages) */}\r\n            <span className=\"scanner-elapsed\">{state && state.scanStartTime && running ? formatElapsed(Math.max(0, now - state.scanStartTime)) : ''}</span>\r\n            <span className=\"scanner-progress-numbers\">{progress.done}/{progress.total || (symbols || []).filter(s => /USDT$/i.test(s)).length}</span>\r\n          </div>\r\n        </div>\r\n        <div className=\"progress-track\">\r\n          {(() => {\r\n            const total = (progress && progress.total) ? progress.total : ((symbols || []).filter(s => /USDT$/i.test(s)).length || 0);\r\n            const done = (progress && progress.done) ? progress.done : 0;\r\n            const pct = total > 0 ? Math.min(100, Math.round((done / total) * 100)) : 0;\r\n            // color progress fill to match scanner type (golden=green, dead=red)\r\n            // prefer immediate UI scan type (set on button click) to reflect the user's action\r\n            const scanType = uiScanType || (state && state.scanType ? state.scanType : null);\r\n            const fillClass = `progress-fill ${scanType === 'dead' ? 'dead' : (scanType === 'golden' ? 'golden' : '')}`.trim();\r\n            return (\r\n              <div role=\"progressbar\" aria-valuemin={0} aria-valuemax={100} aria-valuenow={pct} className={fillClass} style={{ width: `${pct}%` }} />\r\n            );\r\n          })()}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Active monitoring list: shows currently-active crosses (real-time). Falls back to historical results. */}\r\n      <ul className=\"alerts-list\">\r\n        {Array.isArray(state.active) && state.active.length > 0 ? (\r\n          state.active.map((r, idx) => (\r\n            <li key={r.id || `${r.symbol}-active-${idx}`} className=\"alert-item\">\r\n              <div className=\"alert-left\">\r\n                {(() => {\r\n                  const t = (r && r.type) ? r.type : (state && state.scanType ? state.scanType : null);\r\n                  const cls = t === 'dead' ? 'bear' : (t === 'golden' ? 'bull' : 'bull');\r\n                  return <span className={`alert-indicator ${cls}`} />;\r\n                })()}\r\n                <button type=\"button\" className={`alert-symbol copy-btn ${copiedSymbol === r.symbol ? 'copied' : ''}`} title=\"Copy symbol\" onClick={async (e) => { e.preventDefault(); try { if (navigator && navigator.clipboard && navigator.clipboard.writeText) { await navigator.clipboard.writeText(r.symbol); } else { const ta = document.createElement('textarea'); ta.value = r.symbol; document.body.appendChild(ta); ta.select(); document.execCommand('copy'); document.body.removeChild(ta); } setCopiedSymbol(r.symbol); setTimeout(() => setCopiedSymbol(null), 1200); } catch (err) {} }}>\r\n                  {r.symbol}\r\n                </button>\r\n              </div>\r\n              <div className=\"alert-body\">\r\n                <div className=\"alert-info\">\r\n                  {(() => { const tt = (r && r.type) ? r.type : (state && state.scanType ? state.scanType : null); const label = tt === 'dead' ? 'Bear' : (tt === 'golden' ? 'Bull' : 'Match'); return <div className=\"alert-type-short\">{label}</div>; })()}\r\n                  <div className=\"alert-time\">{r.time}</div>\r\n                </div>\r\n                <div className=\"alert-right\">\r\n                  <div className=\"alert-volume\" title={`Volume: ${r.volume || 0}`}>Vol: {formatVolume(r.volume)}</div>\r\n                  <button type=\"button\" className=\"delete-result\" title=\"Remove from active\" onClick={() => { try { scannerManager.removeActive(r.symbol); } catch (e) {} }}>\r\n                    ✕\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </li>\r\n          ))\r\n        ) : (\r\n          results.length === 0 ? (\r\n            <li className=\"alert-item no-results\">No matches yet.</li>\r\n          ) : (\r\n            results.map((r, idx) => (\r\n              <li key={r.id || `${r.symbol}-${idx}`} className=\"alert-item\">\r\n                <div className=\"alert-left\">\r\n                  {(() => {\r\n                    const t = (r && r.type) ? r.type : (state && state.scanType ? state.scanType : null);\r\n                    const cls = t === 'dead' ? 'bear' : (t === 'golden' ? 'bull' : 'bull');\r\n                    return <span className={`alert-indicator ${cls}`} />;\r\n                  })()}\r\n                  <button\r\n                    type=\"button\"\r\n                    className={`alert-symbol copy-btn ${copiedSymbol === r.symbol ? 'copied' : ''}`}\r\n                    title=\"Copy symbol to clipboard\"\r\n                    onClick={async (e) => {\r\n                      e.preventDefault();\r\n                      try {\r\n                        if (navigator && navigator.clipboard && navigator.clipboard.writeText) {\r\n                          await navigator.clipboard.writeText(r.symbol);\r\n                        } else {\r\n                          const ta = document.createElement('textarea');\r\n                          ta.value = r.symbol;\r\n                          document.body.appendChild(ta);\r\n                          ta.select();\r\n                          document.execCommand('copy');\r\n                          document.body.removeChild(ta);\r\n                        }\r\n                        setCopiedSymbol(r.symbol);\r\n                        setTimeout(() => setCopiedSymbol(null), 1200);\r\n                      } catch (err) {\r\n                        // ignore copy failures\r\n                      }\r\n                    }}\r\n                  >\r\n                    {r.symbol}\r\n                  </button>\r\n                </div>\r\n                <div className=\"alert-body\">\r\n                  <div className=\"alert-info\">\r\n                  {(() => {\r\n                    const tt = (r && r.type) ? r.type : (state && state.scanType ? state.scanType : null);\r\n                    const label = tt === 'dead' ? 'Bear' : (tt === 'golden' ? 'Bull' : 'Match');\r\n                    return <div className=\"alert-type-short\">{label}</div>;\r\n                  })()}\r\n                    <div className=\"alert-time\">{r.time}</div>\r\n                  </div>\r\n                    <div className=\"alert-right\">\r\n                    <div className=\"alert-volume\" title={`Volume: ${r.volume || 0}`}>\r\n                      Vol: {formatVolume(r.volume)}\r\n                    </div>\r\n                    <button type=\"button\" className=\"delete-result\" title=\"Remove\" onClick={() => { try { scannerManager.removeResult(r.id); } catch (e) {} }}>\r\n                      ✕\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </li>\r\n            ))\r\n          )\r\n        )}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}