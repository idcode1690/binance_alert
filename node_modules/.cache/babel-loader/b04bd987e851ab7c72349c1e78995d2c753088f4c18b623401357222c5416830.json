{"ast":null,"code":"import React,{useRef,useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Controls(props){const{symbol,setSymbol,symbolValid,setSymbolValid,suggestions,setSuggestions,availableSymbols,validateSymbolOnce,connect,disconnect,status,// optional runtime server controls\nserverUrl,showToast,// monitoring controls (parent values)\nmonitorMinutes,setMonitorMinutes,monitorEma1,setMonitorEma1,monitorEma2,setMonitorEma2,monitorConfirm// kept for internal logic (not displayed)\n// setMonitorConfirm removed from UI and not used\n}=props;const symbolValidateTimer=useRef(null);// reference suggestions to avoid lint 'assigned but not used' when parent passes it\nvoid suggestions;// Local string states to avoid writing parent numeric values on every keystroke.\n// This lets the user clear the field (empty string) and type a single digit without it\n// snapping back to 0. We commit the numeric value to the parent onBlur or when Start is pressed.\nconst[minsStr,setMinsStr]=useState(String(monitorMinutes!==null&&monitorMinutes!==void 0?monitorMinutes:''));const[ema1Str,setEma1Str]=useState(String(monitorEma1!==null&&monitorEma1!==void 0?monitorEma1:''));const[ema2Str,setEma2Str]=useState(String(monitorEma2!==null&&monitorEma2!==void 0?monitorEma2:''));// Confirm 입력 UI 제거: 부모 상태는 다른 컴포넌트/알림 로직에서만 사용됨.\nvoid monitorConfirm;// keep local strings in sync if parent updates (e.g., persisted restore)\nuseEffect(()=>{setMinsStr(String(monitorMinutes!==null&&monitorMinutes!==void 0?monitorMinutes:''));},[monitorMinutes]);useEffect(()=>{setEma1Str(String(monitorEma1!==null&&monitorEma1!==void 0?monitorEma1:''));},[monitorEma1]);useEffect(()=>{setEma2Str(String(monitorEma2!==null&&monitorEma2!==void 0?monitorEma2:''));},[monitorEma2]);// Confirm 값 변화에 따른 로컬 UI 처리 제거됨\n// Server URL local state (prefill from props/localStorage or suggest default)\nconst suggestedDefault='https://binance-alert.idcode1690.workers.dev';const initialServer=(()=>{try{const ls=typeof window!=='undefined'?localStorage.getItem('serverUrl')||'':'';if(ls&&ls.trim())return ls.trim().replace(/\\/$/,'');}catch(e){}if(serverUrl)return serverUrl;return'';})();const[serverStr,setServerStr]=useState(initialServer||suggestedDefault);return/*#__PURE__*/_jsxs(\"div\",{className:\"controls\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"controls-label\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Symbol\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:symbol,onChange:e=>{const v=e.target.value.toUpperCase();setSymbol(v);setSymbolValid(null);if(symbolValidateTimer.current)clearTimeout(symbolValidateTimer.current);symbolValidateTimer.current=setTimeout(()=>{try{const q=v.replace(/[^A-Za-z0-9]/g,'').toUpperCase();const pool=availableSymbols||[];if(pool.length>0){const normQ=q;const exact=pool.some(sy=>(sy||'').replace(/[^A-Za-z0-9]/g,'').toUpperCase()===normQ)||pool.includes(q);if(exact){setSymbolValid(true);setSuggestions([]);return;}const found=pool.filter(s=>s.includes(q)||s.startsWith(q)||q.startsWith(s)).slice(0,8);setSuggestions(found);setSymbolValid(found.length>0?null:false);return;}(async()=>{try{const url=\"https://api.binance.com/api/v3/exchangeInfo?symbol=\".concat(q);const res=await fetch(url);if(!res.ok){setSymbolValid(false);return;}const data=await res.json();if(data&&(data.symbols||data.symbol))setSymbolValid(true);else setSymbolValid(false);}catch(err){setSymbolValid(false);}})();}catch(err){setSymbolValid(false);setSuggestions([]);}},600);}})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"control-inline-label\",style:{marginLeft:8},children:[/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Mins\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",value:minsStr,onChange:e=>{setMinsStr(e.target.value);},onBlur:()=>{// commit only on blur: avoid forcing 0 while typing\nconst p=parseInt(minsStr,10);if(!Number.isFinite(p)||p<=0)return;// don't overwrite parent's valid value with empty/invalid\nsetMonitorMinutes(p);}})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"control-inline-label\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"EMA1\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",value:ema1Str,onChange:e=>{setEma1Str(e.target.value);},onBlur:()=>{const p=parseInt(ema1Str,10);if(!Number.isFinite(p)||p<=0)return;setMonitorEma1(p);}})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"control-inline-label\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"EMA2\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",value:ema2Str,onChange:e=>{setEma2Str(e.target.value);},onBlur:()=>{const p=parseInt(ema2Str,10);if(!Number.isFinite(p)||p<=0)return;setMonitorEma2(p);}})]}),/*#__PURE__*/_jsx(\"button\",{disabled:!(symbolValid===true)||status==='reloading',title:!(symbolValid===true)?'유효한 심볼을 입력하세요':status==='reloading'?'초기화 중...':'Start',onClick:async()=>{const ok=await validateSymbolOnce(symbol);if(!ok){setSymbolValid(false);return;}setSymbolValid(true);// commit any local input values before connecting\nconst mins=parseInt(minsStr,10);const ema1=parseInt(ema1Str,10);const ema2=parseInt(ema2Str,10);if(Number.isFinite(mins)&&mins>0)setMonitorMinutes(mins);if(Number.isFinite(ema1)&&ema1>0)setMonitorEma1(ema1);if(Number.isFinite(ema2)&&ema2>0)setMonitorEma2(ema2);// pass monitoring options to connect (App will accept and forward to server)\ntry{connect(symbol,{interval:mins>0?mins:monitorMinutes,emaShort:ema1>0?ema1:monitorEma1,emaLong:ema2>0?ema2:monitorEma2});}catch(e){connect(symbol);}},children:\"Start\"}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary\",onClick:()=>disconnect(),children:\"Stop\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:10},children:[/*#__PURE__*/_jsxs(\"label\",{className:\"controls-label\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Server URL\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:serverStr,onChange:e=>setServerStr(e.target.value),placeholder:suggestedDefault})]}),/*#__PURE__*/_jsx(\"button\",{className:\"small-btn\",onClick:async()=>{try{const toStore=(serverStr||'').toString().trim().replace(/\\/$/,'');if(!toStore){try{localStorage.removeItem('serverUrl');}catch(e){}try{sessionStorage.removeItem('serverUrlReachable');}catch(e){}try{if(showToast)showToast('Server URL cleared',true);}catch(e){}return;}try{localStorage.setItem('serverUrl',toStore);}catch(e){}// do a quick /health check to mark session reachable\nlet ok=false;try{const ctrl=new AbortController();const to=setTimeout(()=>{try{ctrl.abort();}catch(e){}},1500);try{const h=await fetch(\"\".concat(toStore,\"/health\"),{signal:ctrl.signal});if(h&&h.ok)ok=true;}catch(e){ok=false;}clearTimeout(to);}catch(e){ok=false;}try{if(ok){sessionStorage.setItem('serverUrlReachable','1');if(showToast)showToast('Server saved and reachable',true);}else{if(showToast)showToast('Server saved but unreachable (will be cleared on error)',false);}}catch(e){}}catch(e){try{if(showToast)showToast(\"Failed to set server URL: \".concat(String(e)),false);}catch(ee){}}},children:\"Set\"}),/*#__PURE__*/_jsx(\"button\",{className:\"small-btn\",onClick:()=>{try{localStorage.removeItem('serverUrl');sessionStorage.removeItem('serverUrlReachable');setServerStr('');if(showToast)showToast('Server URL cleared',true);}catch(e){}},children:\"Clear\"})]})]});}","map":{"version":3,"names":["React","useRef","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Controls","props","symbol","setSymbol","symbolValid","setSymbolValid","suggestions","setSuggestions","availableSymbols","validateSymbolOnce","connect","disconnect","status","serverUrl","showToast","monitorMinutes","setMonitorMinutes","monitorEma1","setMonitorEma1","monitorEma2","setMonitorEma2","monitorConfirm","symbolValidateTimer","minsStr","setMinsStr","String","ema1Str","setEma1Str","ema2Str","setEma2Str","suggestedDefault","initialServer","ls","window","localStorage","getItem","trim","replace","e","serverStr","setServerStr","className","children","type","value","onChange","v","target","toUpperCase","current","clearTimeout","setTimeout","q","pool","length","normQ","exact","some","sy","includes","found","filter","s","startsWith","slice","url","concat","res","fetch","ok","data","json","symbols","err","style","marginLeft","min","onBlur","p","parseInt","Number","isFinite","disabled","title","onClick","mins","ema1","ema2","interval","emaShort","emaLong","marginTop","placeholder","toStore","toString","removeItem","sessionStorage","setItem","ctrl","AbortController","to","abort","h","signal","ee"],"sources":["C:/Users/e1it3/Desktop/program/binance_alert/src/components/Controls.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default function Controls(props) {\r\n  const {\r\n    symbol,\r\n    setSymbol,\r\n    symbolValid,\r\n    setSymbolValid,\r\n    suggestions,\r\n    setSuggestions,\r\n    availableSymbols,\r\n    validateSymbolOnce,\r\n    connect,\r\n    disconnect,\r\n  status,\r\n    // optional runtime server controls\r\n    serverUrl,\r\n    showToast,\r\n    // monitoring controls (parent values)\r\n    monitorMinutes,\r\n    setMonitorMinutes,\r\n    monitorEma1,\r\n    setMonitorEma1,\r\n    monitorEma2,\r\n    setMonitorEma2,\r\n  monitorConfirm, // kept for internal logic (not displayed)\r\n  // setMonitorConfirm removed from UI and not used\r\n  } = props;\r\n\r\n  const symbolValidateTimer = useRef(null);\r\n  // reference suggestions to avoid lint 'assigned but not used' when parent passes it\r\n  void suggestions;\r\n\r\n  // Local string states to avoid writing parent numeric values on every keystroke.\r\n  // This lets the user clear the field (empty string) and type a single digit without it\r\n  // snapping back to 0. We commit the numeric value to the parent onBlur or when Start is pressed.\r\n  const [minsStr, setMinsStr] = useState(String(monitorMinutes ?? ''));\r\n  const [ema1Str, setEma1Str] = useState(String(monitorEma1 ?? ''));\r\n  const [ema2Str, setEma2Str] = useState(String(monitorEma2 ?? ''));\r\n  // Confirm 입력 UI 제거: 부모 상태는 다른 컴포넌트/알림 로직에서만 사용됨.\r\n  void monitorConfirm;\r\n\r\n  // keep local strings in sync if parent updates (e.g., persisted restore)\r\n  useEffect(() => { setMinsStr(String(monitorMinutes ?? '')); }, [monitorMinutes]);\r\n  useEffect(() => { setEma1Str(String(monitorEma1 ?? '')); }, [monitorEma1]);\r\n  useEffect(() => { setEma2Str(String(monitorEma2 ?? '')); }, [monitorEma2]);\r\n  // Confirm 값 변화에 따른 로컬 UI 처리 제거됨\r\n\r\n  // Server URL local state (prefill from props/localStorage or suggest default)\r\n  const suggestedDefault = 'https://binance-alert.idcode1690.workers.dev';\r\n  const initialServer = (() => {\r\n    try {\r\n      const ls = (typeof window !== 'undefined') ? (localStorage.getItem('serverUrl') || '') : '';\r\n      if (ls && ls.trim()) return ls.trim().replace(/\\/$/, '');\r\n    } catch (e) {}\r\n    if (serverUrl) return serverUrl;\r\n    return '';\r\n  })();\r\n  const [serverStr, setServerStr] = useState(initialServer || suggestedDefault);\r\n\r\n  return (\r\n    <div className=\"controls\">\r\n      <label className=\"controls-label\">\r\n        <span className=\"label-text\">Symbol</span>\r\n        <input type=\"text\" value={symbol} onChange={(e) => {\r\n          const v = e.target.value.toUpperCase();\r\n          setSymbol(v);\r\n          setSymbolValid(null);\r\n          if (symbolValidateTimer.current) clearTimeout(symbolValidateTimer.current);\r\n          symbolValidateTimer.current = setTimeout(() => {\r\n            try {\r\n              const q = v.replace(/[^A-Za-z0-9]/g, '').toUpperCase();\r\n              const pool = availableSymbols || [];\r\n              if (pool.length > 0) {\r\n                const normQ = q;\r\n                const exact = pool.some(sy => (sy || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase() === normQ) || pool.includes(q);\r\n                if (exact) {\r\n                  setSymbolValid(true);\r\n                  setSuggestions([]);\r\n                  return;\r\n                }\r\n                const found = pool.filter(s => s.includes(q) || s.startsWith(q) || q.startsWith(s)).slice(0, 8);\r\n                setSuggestions(found);\r\n                setSymbolValid(found.length > 0 ? null : false);\r\n                return;\r\n              }\r\n\r\n              (async () => {\r\n                try {\r\n                  const url = `https://api.binance.com/api/v3/exchangeInfo?symbol=${q}`;\r\n                  const res = await fetch(url);\r\n                  if (!res.ok) { setSymbolValid(false);return; }\r\n                  const data = await res.json();\r\n                  if (data && (data.symbols || data.symbol)) setSymbolValid(true);\r\n                  else setSymbolValid(false);\r\n                } catch (err) { setSymbolValid(false); }\r\n              })();\r\n            } catch (err) { setSymbolValid(false); setSuggestions([]); }\r\n          }, 600);\r\n        }} />\r\n      </label>\r\n\r\n      <label className=\"control-inline-label\" style={{marginLeft:8}}>\r\n        <span className=\"label-text\">Mins</span>\r\n        <input type=\"number\" min=\"1\" value={minsStr} onChange={(e) => { setMinsStr(e.target.value); }} onBlur={() => {\r\n          // commit only on blur: avoid forcing 0 while typing\r\n          const p = parseInt(minsStr, 10);\r\n          if (!Number.isFinite(p) || p <= 0) return; // don't overwrite parent's valid value with empty/invalid\r\n          setMonitorMinutes(p);\r\n        }} />\r\n      </label>\r\n\r\n      <label className=\"control-inline-label\">\r\n        <span className=\"label-text\">EMA1</span>\r\n        <input type=\"number\" min=\"1\" value={ema1Str} onChange={(e) => { setEma1Str(e.target.value); }} onBlur={() => {\r\n          const p = parseInt(ema1Str, 10);\r\n          if (!Number.isFinite(p) || p <= 0) return;\r\n          setMonitorEma1(p);\r\n        }} />\r\n      </label>\r\n\r\n      <label className=\"control-inline-label\">\r\n        <span className=\"label-text\">EMA2</span>\r\n        <input type=\"number\" min=\"1\" value={ema2Str} onChange={(e) => { setEma2Str(e.target.value); }} onBlur={() => {\r\n          const p = parseInt(ema2Str, 10);\r\n          if (!Number.isFinite(p) || p <= 0) return;\r\n          setMonitorEma2(p);\r\n        }} />\r\n      </label>\r\n\r\n  {/* Confirm 입력폼 제거됨 (monitorConfirm은 내부 로직만 유지) */}\r\n\r\n      <button disabled={!(symbolValid === true) || status === 'reloading'} title={!(symbolValid === true) ? '유효한 심볼을 입력하세요' : (status === 'reloading' ? '초기화 중...' : 'Start')} onClick={async () => {\r\n        const ok = await validateSymbolOnce(symbol);\r\n        if (!ok) { setSymbolValid(false); return; }\r\n        setSymbolValid(true);\r\n        // commit any local input values before connecting\r\n        const mins = parseInt(minsStr, 10);\r\n        const ema1 = parseInt(ema1Str, 10);\r\n        const ema2 = parseInt(ema2Str, 10);\r\n        if (Number.isFinite(mins) && mins > 0) setMonitorMinutes(mins);\r\n        if (Number.isFinite(ema1) && ema1 > 0) setMonitorEma1(ema1);\r\n        if (Number.isFinite(ema2) && ema2 > 0) setMonitorEma2(ema2);\r\n        // pass monitoring options to connect (App will accept and forward to server)\r\n        try {\r\n          connect(symbol, { interval: mins > 0 ? mins : monitorMinutes, emaShort: ema1 > 0 ? ema1 : monitorEma1, emaLong: ema2 > 0 ? ema2 : monitorEma2 });\r\n        } catch (e) {\r\n          connect(symbol);\r\n        }\r\n      }}>Start</button>\r\n\r\n      <button className=\"secondary\" onClick={() => disconnect()}>Stop</button>\r\n\r\n      <div style={{ marginTop: 10 }}>\r\n        <label className=\"controls-label\">\r\n          <span className=\"label-text\">Server URL</span>\r\n          <input type=\"text\" value={serverStr} onChange={(e) => setServerStr(e.target.value)} placeholder={suggestedDefault} />\r\n        </label>\r\n        <button className=\"small-btn\" onClick={async () => {\r\n          try {\r\n            const toStore = (serverStr || '').toString().trim().replace(/\\/$/, '');\r\n            if (!toStore) {\r\n              try { localStorage.removeItem('serverUrl'); } catch (e) {}\r\n              try { sessionStorage.removeItem('serverUrlReachable'); } catch (e) {}\r\n              try { if (showToast) showToast('Server URL cleared', true); } catch (e) {}\r\n              return;\r\n            }\r\n            try { localStorage.setItem('serverUrl', toStore); } catch (e) {}\r\n            // do a quick /health check to mark session reachable\r\n            let ok = false;\r\n            try {\r\n              const ctrl = new AbortController();\r\n              const to = setTimeout(() => { try { ctrl.abort(); } catch (e) {} }, 1500);\r\n              try {\r\n                const h = await fetch(`${toStore}/health`, { signal: ctrl.signal });\r\n                if (h && h.ok) ok = true;\r\n              } catch (e) { ok = false; }\r\n              clearTimeout(to);\r\n            } catch (e) { ok = false; }\r\n            try { if (ok) { sessionStorage.setItem('serverUrlReachable', '1'); if (showToast) showToast('Server saved and reachable', true); } else { if (showToast) showToast('Server saved but unreachable (will be cleared on error)', false); } } catch (e) {}\r\n          } catch (e) { try { if (showToast) showToast(`Failed to set server URL: ${String(e)}`, false); } catch (ee) {} }\r\n        }}>Set</button>\r\n        <button className=\"small-btn\" onClick={() => { try { localStorage.removeItem('serverUrl'); sessionStorage.removeItem('serverUrlReachable'); setServerStr(''); if (showToast) showToast('Server URL cleared', true); } catch (e) {} }}>Clear</button>\r\n      </div>\r\n\r\n      {/* Set Server URL 및 Test Telegram 버튼 제거 요청에 따라 UI에서 숨김 */}\r\n\r\n      {/* removed Auto-start and Debug checkboxes as requested */}\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nControls.propTypes = {\r\n  symbol: PropTypes.string.isRequired,\r\n  setSymbol: PropTypes.func.isRequired,\r\n  symbolValid: PropTypes.bool,\r\n  setSymbolValid: PropTypes.func.isRequired,\r\n  setSuggestions: PropTypes.func.isRequired,\r\n  availableSymbols: PropTypes.array,\r\n  validateSymbolOnce: PropTypes.func.isRequired,\r\n  connect: PropTypes.func.isRequired,\r\n  disconnect: PropTypes.func.isRequired,\r\n  status: PropTypes.string,\r\n  connected: PropTypes.bool,\r\n  // monitoring props\r\n  monitorMinutes: PropTypes.number.isRequired,\r\n  setMonitorMinutes: PropTypes.func.isRequired,\r\n  monitorEma1: PropTypes.number.isRequired,\r\n  setMonitorEma1: PropTypes.func.isRequired,\r\n  monitorEma2: PropTypes.number.isRequired,\r\n  setMonitorEma2: PropTypes.func.isRequired,\r\n  monitorConfirm: PropTypes.number.isRequired,\r\n  setMonitorConfirm: PropTypes.func.isRequired,\r\n  // optional runtime server controls\r\n  serverUrl: PropTypes.string,\r\n  showToast: PropTypes.func,\r\n};\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,MAAM,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAG3D,cAAe,SAAS,CAAAC,QAAQA,CAACC,KAAK,CAAE,CACtC,KAAM,CACJC,MAAM,CACNC,SAAS,CACTC,WAAW,CACXC,cAAc,CACdC,WAAW,CACXC,cAAc,CACdC,gBAAgB,CAChBC,kBAAkB,CAClBC,OAAO,CACPC,UAAU,CACZC,MAAM,CACJ;AACAC,SAAS,CACTC,SAAS,CACT;AACAC,cAAc,CACdC,iBAAiB,CACjBC,WAAW,CACXC,cAAc,CACdC,WAAW,CACXC,cAAc,CAChBC,cAAgB;AAChB;AACA,CAAC,CAAGpB,KAAK,CAET,KAAM,CAAAqB,mBAAmB,CAAG7B,MAAM,CAAC,IAAI,CAAC,CACxC;AACA,IAAK,CAAAa,WAAW,CAEhB;AACA;AACA;AACA,KAAM,CAACiB,OAAO,CAAEC,UAAU,CAAC,CAAG9B,QAAQ,CAAC+B,MAAM,CAACV,cAAc,SAAdA,cAAc,UAAdA,cAAc,CAAI,EAAE,CAAC,CAAC,CACpE,KAAM,CAACW,OAAO,CAAEC,UAAU,CAAC,CAAGjC,QAAQ,CAAC+B,MAAM,CAACR,WAAW,SAAXA,WAAW,UAAXA,WAAW,CAAI,EAAE,CAAC,CAAC,CACjE,KAAM,CAACW,OAAO,CAAEC,UAAU,CAAC,CAAGnC,QAAQ,CAAC+B,MAAM,CAACN,WAAW,SAAXA,WAAW,UAAXA,WAAW,CAAI,EAAE,CAAC,CAAC,CACjE;AACA,IAAK,CAAAE,cAAc,CAEnB;AACA1B,SAAS,CAAC,IAAM,CAAE6B,UAAU,CAACC,MAAM,CAACV,cAAc,SAAdA,cAAc,UAAdA,cAAc,CAAI,EAAE,CAAC,CAAC,CAAE,CAAC,CAAE,CAACA,cAAc,CAAC,CAAC,CAChFpB,SAAS,CAAC,IAAM,CAAEgC,UAAU,CAACF,MAAM,CAACR,WAAW,SAAXA,WAAW,UAAXA,WAAW,CAAI,EAAE,CAAC,CAAC,CAAE,CAAC,CAAE,CAACA,WAAW,CAAC,CAAC,CAC1EtB,SAAS,CAAC,IAAM,CAAEkC,UAAU,CAACJ,MAAM,CAACN,WAAW,SAAXA,WAAW,UAAXA,WAAW,CAAI,EAAE,CAAC,CAAC,CAAE,CAAC,CAAE,CAACA,WAAW,CAAC,CAAC,CAC1E;AAEA;AACA,KAAM,CAAAW,gBAAgB,CAAG,8CAA8C,CACvE,KAAM,CAAAC,aAAa,CAAG,CAAC,IAAM,CAC3B,GAAI,CACF,KAAM,CAAAC,EAAE,CAAI,MAAO,CAAAC,MAAM,GAAK,WAAW,CAAKC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,EAAI,EAAE,CAAI,EAAE,CAC3F,GAAIH,EAAE,EAAIA,EAAE,CAACI,IAAI,CAAC,CAAC,CAAE,MAAO,CAAAJ,EAAE,CAACI,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,KAAK,CAAE,EAAE,CAAC,CAC1D,CAAE,MAAOC,CAAC,CAAE,CAAC,CACb,GAAIzB,SAAS,CAAE,MAAO,CAAAA,SAAS,CAC/B,MAAO,EAAE,CACX,CAAC,EAAE,CAAC,CACJ,KAAM,CAAC0B,SAAS,CAAEC,YAAY,CAAC,CAAG9C,QAAQ,CAACqC,aAAa,EAAID,gBAAgB,CAAC,CAE7E,mBACE/B,KAAA,QAAK0C,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvB3C,KAAA,UAAO0C,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC/B7C,IAAA,SAAM4C,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,QAAM,CAAM,CAAC,cAC1C7C,IAAA,UAAO8C,IAAI,CAAC,MAAM,CAACC,KAAK,CAAE1C,MAAO,CAAC2C,QAAQ,CAAGP,CAAC,EAAK,CACjD,KAAM,CAAAQ,CAAC,CAAGR,CAAC,CAACS,MAAM,CAACH,KAAK,CAACI,WAAW,CAAC,CAAC,CACtC7C,SAAS,CAAC2C,CAAC,CAAC,CACZzC,cAAc,CAAC,IAAI,CAAC,CACpB,GAAIiB,mBAAmB,CAAC2B,OAAO,CAAEC,YAAY,CAAC5B,mBAAmB,CAAC2B,OAAO,CAAC,CAC1E3B,mBAAmB,CAAC2B,OAAO,CAAGE,UAAU,CAAC,IAAM,CAC7C,GAAI,CACF,KAAM,CAAAC,CAAC,CAAGN,CAAC,CAACT,OAAO,CAAC,eAAe,CAAE,EAAE,CAAC,CAACW,WAAW,CAAC,CAAC,CACtD,KAAM,CAAAK,IAAI,CAAG7C,gBAAgB,EAAI,EAAE,CACnC,GAAI6C,IAAI,CAACC,MAAM,CAAG,CAAC,CAAE,CACnB,KAAM,CAAAC,KAAK,CAAGH,CAAC,CACf,KAAM,CAAAI,KAAK,CAAGH,IAAI,CAACI,IAAI,CAACC,EAAE,EAAI,CAACA,EAAE,EAAI,EAAE,EAAErB,OAAO,CAAC,eAAe,CAAE,EAAE,CAAC,CAACW,WAAW,CAAC,CAAC,GAAKO,KAAK,CAAC,EAAIF,IAAI,CAACM,QAAQ,CAACP,CAAC,CAAC,CAClH,GAAII,KAAK,CAAE,CACTnD,cAAc,CAAC,IAAI,CAAC,CACpBE,cAAc,CAAC,EAAE,CAAC,CAClB,OACF,CACA,KAAM,CAAAqD,KAAK,CAAGP,IAAI,CAACQ,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACH,QAAQ,CAACP,CAAC,CAAC,EAAIU,CAAC,CAACC,UAAU,CAACX,CAAC,CAAC,EAAIA,CAAC,CAACW,UAAU,CAACD,CAAC,CAAC,CAAC,CAACE,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAC/FzD,cAAc,CAACqD,KAAK,CAAC,CACrBvD,cAAc,CAACuD,KAAK,CAACN,MAAM,CAAG,CAAC,CAAG,IAAI,CAAG,KAAK,CAAC,CAC/C,OACF,CAEA,CAAC,SAAY,CACX,GAAI,CACF,KAAM,CAAAW,GAAG,uDAAAC,MAAA,CAAyDd,CAAC,CAAE,CACrE,KAAM,CAAAe,GAAG,CAAG,KAAM,CAAAC,KAAK,CAACH,GAAG,CAAC,CAC5B,GAAI,CAACE,GAAG,CAACE,EAAE,CAAE,CAAEhE,cAAc,CAAC,KAAK,CAAC,CAAC,OAAQ,CAC7C,KAAM,CAAAiE,IAAI,CAAG,KAAM,CAAAH,GAAG,CAACI,IAAI,CAAC,CAAC,CAC7B,GAAID,IAAI,GAAKA,IAAI,CAACE,OAAO,EAAIF,IAAI,CAACpE,MAAM,CAAC,CAAEG,cAAc,CAAC,IAAI,CAAC,CAAC,IAC3D,CAAAA,cAAc,CAAC,KAAK,CAAC,CAC5B,CAAE,MAAOoE,GAAG,CAAE,CAAEpE,cAAc,CAAC,KAAK,CAAC,CAAE,CACzC,CAAC,EAAE,CAAC,CACN,CAAE,MAAOoE,GAAG,CAAE,CAAEpE,cAAc,CAAC,KAAK,CAAC,CAAEE,cAAc,CAAC,EAAE,CAAC,CAAE,CAC7D,CAAC,CAAE,GAAG,CAAC,CACT,CAAE,CAAE,CAAC,EACA,CAAC,cAERR,KAAA,UAAO0C,SAAS,CAAC,sBAAsB,CAACiC,KAAK,CAAE,CAACC,UAAU,CAAC,CAAC,CAAE,CAAAjC,QAAA,eAC5D7C,IAAA,SAAM4C,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,MAAI,CAAM,CAAC,cACxC7C,IAAA,UAAO8C,IAAI,CAAC,QAAQ,CAACiC,GAAG,CAAC,GAAG,CAAChC,KAAK,CAAErB,OAAQ,CAACsB,QAAQ,CAAGP,CAAC,EAAK,CAAEd,UAAU,CAACc,CAAC,CAACS,MAAM,CAACH,KAAK,CAAC,CAAE,CAAE,CAACiC,MAAM,CAAEA,CAAA,GAAM,CAC3G;AACA,KAAM,CAAAC,CAAC,CAAGC,QAAQ,CAACxD,OAAO,CAAE,EAAE,CAAC,CAC/B,GAAI,CAACyD,MAAM,CAACC,QAAQ,CAACH,CAAC,CAAC,EAAIA,CAAC,EAAI,CAAC,CAAE,OAAQ;AAC3C9D,iBAAiB,CAAC8D,CAAC,CAAC,CACtB,CAAE,CAAE,CAAC,EACA,CAAC,cAER/E,KAAA,UAAO0C,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACrC7C,IAAA,SAAM4C,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,MAAI,CAAM,CAAC,cACxC7C,IAAA,UAAO8C,IAAI,CAAC,QAAQ,CAACiC,GAAG,CAAC,GAAG,CAAChC,KAAK,CAAElB,OAAQ,CAACmB,QAAQ,CAAGP,CAAC,EAAK,CAAEX,UAAU,CAACW,CAAC,CAACS,MAAM,CAACH,KAAK,CAAC,CAAE,CAAE,CAACiC,MAAM,CAAEA,CAAA,GAAM,CAC3G,KAAM,CAAAC,CAAC,CAAGC,QAAQ,CAACrD,OAAO,CAAE,EAAE,CAAC,CAC/B,GAAI,CAACsD,MAAM,CAACC,QAAQ,CAACH,CAAC,CAAC,EAAIA,CAAC,EAAI,CAAC,CAAE,OACnC5D,cAAc,CAAC4D,CAAC,CAAC,CACnB,CAAE,CAAE,CAAC,EACA,CAAC,cAER/E,KAAA,UAAO0C,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACrC7C,IAAA,SAAM4C,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,MAAI,CAAM,CAAC,cACxC7C,IAAA,UAAO8C,IAAI,CAAC,QAAQ,CAACiC,GAAG,CAAC,GAAG,CAAChC,KAAK,CAAEhB,OAAQ,CAACiB,QAAQ,CAAGP,CAAC,EAAK,CAAET,UAAU,CAACS,CAAC,CAACS,MAAM,CAACH,KAAK,CAAC,CAAE,CAAE,CAACiC,MAAM,CAAEA,CAAA,GAAM,CAC3G,KAAM,CAAAC,CAAC,CAAGC,QAAQ,CAACnD,OAAO,CAAE,EAAE,CAAC,CAC/B,GAAI,CAACoD,MAAM,CAACC,QAAQ,CAACH,CAAC,CAAC,EAAIA,CAAC,EAAI,CAAC,CAAE,OACnC1D,cAAc,CAAC0D,CAAC,CAAC,CACnB,CAAE,CAAE,CAAC,EACA,CAAC,cAIRjF,IAAA,WAAQqF,QAAQ,CAAE,EAAE9E,WAAW,GAAK,IAAI,CAAC,EAAIQ,MAAM,GAAK,WAAY,CAACuE,KAAK,CAAE,EAAE/E,WAAW,GAAK,IAAI,CAAC,CAAG,eAAe,CAAIQ,MAAM,GAAK,WAAW,CAAG,UAAU,CAAG,OAAS,CAACwE,OAAO,CAAE,KAAAA,CAAA,GAAY,CAC5L,KAAM,CAAAf,EAAE,CAAG,KAAM,CAAA5D,kBAAkB,CAACP,MAAM,CAAC,CAC3C,GAAI,CAACmE,EAAE,CAAE,CAAEhE,cAAc,CAAC,KAAK,CAAC,CAAE,OAAQ,CAC1CA,cAAc,CAAC,IAAI,CAAC,CACpB;AACA,KAAM,CAAAgF,IAAI,CAAGN,QAAQ,CAACxD,OAAO,CAAE,EAAE,CAAC,CAClC,KAAM,CAAA+D,IAAI,CAAGP,QAAQ,CAACrD,OAAO,CAAE,EAAE,CAAC,CAClC,KAAM,CAAA6D,IAAI,CAAGR,QAAQ,CAACnD,OAAO,CAAE,EAAE,CAAC,CAClC,GAAIoD,MAAM,CAACC,QAAQ,CAACI,IAAI,CAAC,EAAIA,IAAI,CAAG,CAAC,CAAErE,iBAAiB,CAACqE,IAAI,CAAC,CAC9D,GAAIL,MAAM,CAACC,QAAQ,CAACK,IAAI,CAAC,EAAIA,IAAI,CAAG,CAAC,CAAEpE,cAAc,CAACoE,IAAI,CAAC,CAC3D,GAAIN,MAAM,CAACC,QAAQ,CAACM,IAAI,CAAC,EAAIA,IAAI,CAAG,CAAC,CAAEnE,cAAc,CAACmE,IAAI,CAAC,CAC3D;AACA,GAAI,CACF7E,OAAO,CAACR,MAAM,CAAE,CAAEsF,QAAQ,CAAEH,IAAI,CAAG,CAAC,CAAGA,IAAI,CAAGtE,cAAc,CAAE0E,QAAQ,CAAEH,IAAI,CAAG,CAAC,CAAGA,IAAI,CAAGrE,WAAW,CAAEyE,OAAO,CAAEH,IAAI,CAAG,CAAC,CAAGA,IAAI,CAAGpE,WAAY,CAAC,CAAC,CAClJ,CAAE,MAAOmB,CAAC,CAAE,CACV5B,OAAO,CAACR,MAAM,CAAC,CACjB,CACF,CAAE,CAAAwC,QAAA,CAAC,OAAK,CAAQ,CAAC,cAEjB7C,IAAA,WAAQ4C,SAAS,CAAC,WAAW,CAAC2C,OAAO,CAAEA,CAAA,GAAMzE,UAAU,CAAC,CAAE,CAAA+B,QAAA,CAAC,MAAI,CAAQ,CAAC,cAExE3C,KAAA,QAAK2E,KAAK,CAAE,CAAEiB,SAAS,CAAE,EAAG,CAAE,CAAAjD,QAAA,eAC5B3C,KAAA,UAAO0C,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC/B7C,IAAA,SAAM4C,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,YAAU,CAAM,CAAC,cAC9C7C,IAAA,UAAO8C,IAAI,CAAC,MAAM,CAACC,KAAK,CAAEL,SAAU,CAACM,QAAQ,CAAGP,CAAC,EAAKE,YAAY,CAACF,CAAC,CAACS,MAAM,CAACH,KAAK,CAAE,CAACgD,WAAW,CAAE9D,gBAAiB,CAAE,CAAC,EAChH,CAAC,cACRjC,IAAA,WAAQ4C,SAAS,CAAC,WAAW,CAAC2C,OAAO,CAAE,KAAAA,CAAA,GAAY,CACjD,GAAI,CACF,KAAM,CAAAS,OAAO,CAAG,CAACtD,SAAS,EAAI,EAAE,EAAEuD,QAAQ,CAAC,CAAC,CAAC1D,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,KAAK,CAAE,EAAE,CAAC,CACtE,GAAI,CAACwD,OAAO,CAAE,CACZ,GAAI,CAAE3D,YAAY,CAAC6D,UAAU,CAAC,WAAW,CAAC,CAAE,CAAE,MAAOzD,CAAC,CAAE,CAAC,CACzD,GAAI,CAAE0D,cAAc,CAACD,UAAU,CAAC,oBAAoB,CAAC,CAAE,CAAE,MAAOzD,CAAC,CAAE,CAAC,CACpE,GAAI,CAAE,GAAIxB,SAAS,CAAEA,SAAS,CAAC,oBAAoB,CAAE,IAAI,CAAC,CAAE,CAAE,MAAOwB,CAAC,CAAE,CAAC,CACzE,OACF,CACA,GAAI,CAAEJ,YAAY,CAAC+D,OAAO,CAAC,WAAW,CAAEJ,OAAO,CAAC,CAAE,CAAE,MAAOvD,CAAC,CAAE,CAAC,CAC/D;AACA,GAAI,CAAA+B,EAAE,CAAG,KAAK,CACd,GAAI,CACF,KAAM,CAAA6B,IAAI,CAAG,GAAI,CAAAC,eAAe,CAAC,CAAC,CAClC,KAAM,CAAAC,EAAE,CAAGjD,UAAU,CAAC,IAAM,CAAE,GAAI,CAAE+C,IAAI,CAACG,KAAK,CAAC,CAAC,CAAE,CAAE,MAAO/D,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,IAAI,CAAC,CACzE,GAAI,CACF,KAAM,CAAAgE,CAAC,CAAG,KAAM,CAAAlC,KAAK,IAAAF,MAAA,CAAI2B,OAAO,YAAW,CAAEU,MAAM,CAAEL,IAAI,CAACK,MAAO,CAAC,CAAC,CACnE,GAAID,CAAC,EAAIA,CAAC,CAACjC,EAAE,CAAEA,EAAE,CAAG,IAAI,CAC1B,CAAE,MAAO/B,CAAC,CAAE,CAAE+B,EAAE,CAAG,KAAK,CAAE,CAC1BnB,YAAY,CAACkD,EAAE,CAAC,CAClB,CAAE,MAAO9D,CAAC,CAAE,CAAE+B,EAAE,CAAG,KAAK,CAAE,CAC1B,GAAI,CAAE,GAAIA,EAAE,CAAE,CAAE2B,cAAc,CAACC,OAAO,CAAC,oBAAoB,CAAE,GAAG,CAAC,CAAE,GAAInF,SAAS,CAAEA,SAAS,CAAC,4BAA4B,CAAE,IAAI,CAAC,CAAE,CAAC,IAAM,CAAE,GAAIA,SAAS,CAAEA,SAAS,CAAC,yDAAyD,CAAE,KAAK,CAAC,CAAE,CAAE,CAAE,MAAOwB,CAAC,CAAE,CAAC,CACvP,CAAE,MAAOA,CAAC,CAAE,CAAE,GAAI,CAAE,GAAIxB,SAAS,CAAEA,SAAS,8BAAAoD,MAAA,CAA8BzC,MAAM,CAACa,CAAC,CAAC,EAAI,KAAK,CAAC,CAAE,CAAE,MAAOkE,EAAE,CAAE,CAAC,CAAE,CACjH,CAAE,CAAA9D,QAAA,CAAC,KAAG,CAAQ,CAAC,cACf7C,IAAA,WAAQ4C,SAAS,CAAC,WAAW,CAAC2C,OAAO,CAAEA,CAAA,GAAM,CAAE,GAAI,CAAElD,YAAY,CAAC6D,UAAU,CAAC,WAAW,CAAC,CAAEC,cAAc,CAACD,UAAU,CAAC,oBAAoB,CAAC,CAAEvD,YAAY,CAAC,EAAE,CAAC,CAAE,GAAI1B,SAAS,CAAEA,SAAS,CAAC,oBAAoB,CAAE,IAAI,CAAC,CAAE,CAAE,MAAOwB,CAAC,CAAE,CAAC,CAAE,CAAE,CAAAI,QAAA,CAAC,OAAK,CAAQ,CAAC,EACjP,CAAC,EAMH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}