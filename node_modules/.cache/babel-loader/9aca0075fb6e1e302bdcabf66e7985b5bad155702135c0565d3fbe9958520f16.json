{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\e1it3\\\\Desktop\\\\program\\\\binance_alert\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\n/* eslint-disable no-unused-vars */\nimport './App.css';\nimport React, { useEffect, useRef, useState } from 'react';\nimport useEmaCross from './hooks/useEmaCross';\nimport Alerts from './components/Alerts';\nimport Metrics from './components/Metrics';\nimport Controls from './components/Controls';\nimport DebugPanel from './components/DebugPanel';\nimport Notes from './components/Notes';\nimport Header from './components/Header';\nimport TopMenu from './components/TopMenu';\nimport ScannerPage from './pages/ScannerPage';\n// 클라이언트 측 스캐너는 서버(Cloudflare Worker) cron 기반으로 대체되므로 임시 비활성화\n// import scannerManager from './lib/scannerManager';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction beep() {\n  try {\n    const AudioCtx = window.AudioContext || window.webkitAudioContext;\n    const ctx = new AudioCtx();\n    const o = ctx.createOscillator();\n    const g = ctx.createGain();\n    o.type = 'sine';\n    o.frequency.value = 880;\n    o.connect(g);\n    g.connect(ctx.destination);\n    o.start();\n    g.gain.setValueAtTime(0.0001, ctx.currentTime);\n    g.gain.exponentialRampToValueAtTime(0.1, ctx.currentTime + 0.01);\n    g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 0.6);\n    setTimeout(() => {\n      o.stop();\n      try {\n        ctx.close();\n      } catch (e) {}\n    }, 700);\n  } catch (e) {\n    // ignore\n  }\n}\nfunction App() {\n  _s();\n  const [symbol, setSymbol] = useState(() => {\n    try {\n      const raw = localStorage.getItem('lastSymbol');\n      if (raw && typeof raw === 'string') return raw.toString().replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n    } catch (e) {}\n    return 'BTCUSDT';\n  });\n  const [autoStart, setAutoStart] = useState(true);\n  const [symbolValid, setSymbolValid] = useState(null); // null=unknown, true/false\n  // symbolValidateTimer moved into Controls component\n  const [availableSymbols, setAvailableSymbols] = useState(null);\n  const [showDebug] = useState(false);\n  const [suggestions, setSuggestions] = useState([]);\n  // monitoring inputs (minutes + EMA short/long)\n  const [monitorMinutes, setMonitorMinutes] = useState(() => {\n    try {\n      const raw = localStorage.getItem('lastMonitor');\n      if (raw) {\n        const parsed = JSON.parse(raw);\n        if (parsed && typeof parsed.monitorMinutes !== 'undefined') return Number(parsed.monitorMinutes) || 5;\n      }\n    } catch (e) {}\n    return 5;\n  });\n  const [monitorEma1, setMonitorEma1] = useState(() => {\n    try {\n      const raw = localStorage.getItem('lastMonitor');\n      if (raw) {\n        const parsed = JSON.parse(raw);\n        if (parsed && typeof parsed.monitorEma1 !== 'undefined') return Number(parsed.monitorEma1) || 26;\n      }\n    } catch (e) {}\n    return 26;\n  });\n  const [monitorEma2, setMonitorEma2] = useState(() => {\n    try {\n      const raw = localStorage.getItem('lastMonitor');\n      if (raw) {\n        const parsed = JSON.parse(raw);\n        if (parsed && typeof parsed.monitorEma2 !== 'undefined') return Number(parsed.monitorEma2) || 200;\n      }\n    } catch (e) {}\n    return 200;\n  });\n  const [monitorConfirm, setMonitorConfirm] = useState(() => {\n    try {\n      const raw = localStorage.getItem('lastMonitor');\n      if (raw) {\n        const parsed = JSON.parse(raw);\n        if (parsed && typeof parsed.monitorConfirm !== 'undefined') return Number(parsed.monitorConfirm) || 1;\n      }\n    } catch (e) {}\n    // increase default confirmation to 2 closed candles to reduce false positives\n    return 2;\n  });\n  const [marketCheckResult, setMarketCheckResult] = useState(null);\n  // helper to fetch exchangeInfo and populate availableSymbols\n  async function fetchExchangeInfo() {\n    try {\n      // default to Binance Futures (USDT-M) exchangeInfo for symbols\n      const res = await fetch('https://fapi.binance.com/fapi/v1/exchangeInfo');\n      if (!res.ok) {\n        console.warn('exchangeInfo fetch failed', res.status);\n        setAvailableSymbols([]);\n        return;\n      }\n      const data = await res.json();\n      const syms = (data.symbols || []).map(s => s.symbol);\n      setAvailableSymbols(syms);\n    } catch (e) {\n      console.warn('exchangeInfo fetch error', e);\n      setAvailableSymbols([]);\n    }\n  }\n\n  // fetch full symbol list once on mount for reliable validation\n  // fetch full symbol list once on mount for reliable validation\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => {\n    fetchExchangeInfo();\n  }, []);\n\n  // helper to validate a symbol (returns true/false)\n  async function validateSymbolOnce(s) {\n    const q = (s || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n    if (!q) return false;\n    // If we have a cached symbol list, compare using a normalized form (strip non-alnum, uppercase)\n    if (availableSymbols && availableSymbols.length > 0) {\n      const normQ = q;\n      for (const sym of availableSymbols) {\n        const normSym = (sym || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n        if (normSym === normQ) return true;\n      }\n      return false;\n    }\n    // Fallback to exchangeInfo query for the single symbol\n    try {\n      // fallback to Binance Futures exchangeInfo lookup\n      const res = await fetch(`https://fapi.binance.com/fapi/v1/exchangeInfo?symbol=${q}`);\n      if (!res.ok) return false;\n      const data = await res.json();\n      // if API returned an object with matching symbol(s), accept it\n      if (data && Array.isArray(data.symbols) && data.symbols.length > 0) return true;\n      if (data && data.symbol) return true;\n      return false;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  // if symbol becomes invalid, disable autoStart and disconnect to avoid wrong subscriptions\n  // (moved below after hook initialization because it depends on connected/disconnect)\n  // Disable hook autoConnect: App will control connecting so we can update server monitor symbol first\n  // Guard against unexpected undefined return (e.g., faulty Jest mock) to keep tests stable.\n  const hookData = useEmaCross({\n    symbol,\n    autoConnect: true,\n    debug: showDebug,\n    interval: `${monitorMinutes}m`,\n    emaShort: monitorEma1,\n    emaLong: monitorEma2,\n    confirmClosedCandles: monitorConfirm\n  }) || {};\n  const {\n    ema9,\n    ema26,\n    lastPrice,\n    lastTick,\n    lastCandleClosed,\n    cross,\n    confirmedCross,\n    confirmedSource,\n    connected,\n    status,\n    connect,\n    disconnect,\n    activeSymbol\n  } = hookData;\n  const [events, setEvents] = useState([]);\n  const [toast, setToast] = useState(null);\n  // Helper: detect duplicate events and add only if not duplicate\n  // Dedup logic: consider events duplicate if symbol + type match and their timestamps are within 5s,\n  // or if price matches exactly and symbol+type match. This helps avoid server+client duplicate alerts.\n  const isDuplicateEvent = React.useCallback((newEv, existing) => {\n    try {\n      if (!existing || !newEv) return false;\n      const aSym = (existing.symbol || '').toString().replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n      const bSym = (newEv.symbol || '').toString().replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n      if (!aSym || !bSym || aSym !== bSym) return false;\n      if ((existing.type || '') !== (newEv.type || '')) return false;\n      // exact price match\n      if (typeof existing.price !== 'undefined' && typeof newEv.price !== 'undefined' && String(existing.price) === String(newEv.price)) return true;\n      // timestamp proximity (use ts if available, otherwise parse time)\n      const aTs = typeof existing.ts === 'number' ? existing.ts : Date.parse(existing.time || '') || 0;\n      const bTs = typeof newEv.ts === 'number' ? newEv.ts : Date.parse(newEv.time || '') || 0;\n      if (aTs && bTs && Math.abs(aTs - bTs) <= 5000) return true;\n    } catch (e) {}\n    return false;\n  }, []);\n  const addEvent = React.useCallback(ev => {\n    setEvents(prev => {\n      try {\n        if (Array.isArray(prev) && prev.some(p => isDuplicateEvent(ev, p))) {\n          if (showDebug) console.debug('[App] suppressed duplicate event', ev);\n          return prev;\n        }\n      } catch (e) {}\n      return [ev, ...prev].slice(0, 500);\n    });\n  }, [isDuplicateEvent, showDebug]);\n  // Inform scannerManager about available symbols.\n  // IMPORTANT: do NOT forward raw scanner \"results\" into the global Alerts/events list here.\n  // Scanner results are shown on the separate Scanner page and should not be mixed with Alerts.\n  // 서버측 Cron 스캐닝 사용: 클라이언트 스캐너 비활성화\n  // useEffect(() => {\n  //   try {\n  //     scannerManager.setGetSymbols(() => availableSymbols || []);\n  //   } catch (e) {}\n  // }, [availableSymbols]);\n  const showToast = React.useCallback((message, ok = true) => {\n    try {\n      setToast({\n        message,\n        ok,\n        ts: Date.now()\n      });\n      // auto-dismiss after 5s\n      setTimeout(() => {\n        try {\n          setToast(null);\n        } catch (e) {}\n      }, 5000);\n    } catch (e) {}\n  }, []);\n  const lastNotified = useRef(null);\n  // Removed SSE/server health state in Pages Functions mode\n  const [view, setView] = useState('alerts');\n  // Resolve serverUrl in this priority:\n  // 1) localStorage 'serverUrl' (allows runtime override without rebuild)\n  // 2) REACT_APP_SERVER_URL (build-time)\n  // 3) same-origin (only works when Pages/Worker share origin)\n  const serverUrl = (() => {\n    try {\n      const ls = typeof window !== 'undefined' ? localStorage.getItem('serverUrl') || '' : '';\n      const lsTrim = (ls || '').trim();\n      if (lsTrim) return lsTrim.replace(/\\/$/, '');\n    } catch (e) {}\n    const envVal = process.env.REACT_APP_SERVER_URL && typeof process.env.REACT_APP_SERVER_URL === 'string' ? process.env.REACT_APP_SERVER_URL : '';\n    const envTrim = (envVal || '').trim();\n    if (envTrim) return envTrim.replace(/\\/$/, '');\n    try {\n      if (typeof window !== 'undefined' && window.location && window.location.origin) {\n        return window.location.origin.replace(/\\/$/, '');\n      }\n    } catch (e) {}\n    return null;\n  })();\n\n  // If no runtime server override exists, attempt to auto-set it to the deployed\n  // Cloudflare Worker so users who open the app without configuring a server stop\n  // hitting stale pages.dev hosts. We do a short health check before persisting.\n  useEffect(() => {\n    try {\n      const lsVal = typeof window !== 'undefined' ? localStorage.getItem('serverUrl') || '' : '';\n      if (lsVal && lsVal.trim()) return; // already set by user\n      const candidate = 'https://binance-alert.idcode1690.workers.dev';\n      (async () => {\n        try {\n          const ctrl = new AbortController();\n          const to = setTimeout(() => {\n            try {\n              ctrl.abort();\n            } catch (e) {}\n          }, 1500);\n          try {\n            const res = await fetch(`${candidate.replace(/\\/$/, '')}/health`, {\n              method: 'GET',\n              signal: ctrl.signal\n            });\n            if (res && res.ok) {\n              try {\n                localStorage.setItem('serverUrl', candidate);\n                sessionStorage.setItem('serverUrlReachable', '1');\n              } catch (e) {}\n              try {\n                if (showToast) showToast('Server URL set to worker (auto)', true);\n              } catch (e) {}\n            }\n          } catch (e) {\n            // health failed -> don't persist anything\n          } finally {\n            clearTimeout(to);\n          }\n        } catch (e) {}\n      })();\n    } catch (e) {}\n  }, [showToast]);\n\n  // quick setter for serverUrl via prompt, stored in localStorage\n  // Removed promptSetServerUrl (Controls component provides Set Server URL)\n\n  // 서버측 스캔 설정을 프론트 변경값과 동기화 (EMA/분) — 프론트에서 한번 설정하면 서버가 값을 유지\n  useEffect(() => {\n    if (!serverUrl) return;\n    // If the runtime serverUrl contains known problematic hostnames (e.g. Pages preview),\n    // don't attempt the automatic POST which causes repeated DNS errors in user's console.\n    try {\n      const lower = (serverUrl || '').toLowerCase();\n      if (lower.includes('pages.dev')) {\n        try {\n          localStorage.removeItem('serverUrl');\n        } catch (e) {}\n        try {\n          showToast('Removed invalid server URL (pages.dev). Please set a valid server URL.', false);\n        } catch (e) {}\n        return;\n      }\n    } catch (e) {}\n\n    // Only auto-sync if the server was previously verified reachable in this session,\n    // or if the server is same-origin. This avoids blind POST attempts to unreachable hosts.\n    const isSameOrigin = (() => {\n      try {\n        return typeof window !== 'undefined' && window.location && window.location.origin && serverUrl === window.location.origin.replace(/\\/$/, '');\n      } catch (e) {\n        return false;\n      }\n    })();\n    const sessionOk = (() => {\n      try {\n        return sessionStorage.getItem('serverUrlReachable') === '1';\n      } catch (e) {\n        return false;\n      }\n    })();\n    const ctrl = new AbortController();\n    const performPost = async () => {\n      try {\n        const payload = {\n          interval: monitorMinutes,\n          emaShort: monitorEma1,\n          emaLong: monitorEma2,\n          scanType: 'both'\n        };\n        const res = await fetch(`${serverUrl}/config`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(payload),\n          signal: ctrl.signal\n        });\n        if (!res.ok) {\n          console.warn('[App] /config sync failed', res.status);\n        }\n      } catch (e) {\n        try {\n          console.warn('[App] /config sync error', e);\n        } catch (err) {}\n        try {\n          localStorage.removeItem('serverUrl');\n        } catch (err) {}\n        try {\n          showToast('Server URL removed due to network error. Please reload the page.', false);\n        } catch (err) {}\n      }\n    };\n    const t = setTimeout(async () => {\n      // If same-origin or we've seen the server reachable in this session, post immediately.\n      if (isSameOrigin || sessionOk) {\n        await performPost();\n        return;\n      }\n\n      // Otherwise, do a lightweight health check with short timeout. If it succeeds, mark session ok and post.\n      let healthOk = false;\n      try {\n        const healthCtrl = new AbortController();\n        const healthTimeout = setTimeout(() => {\n          try {\n            healthCtrl.abort();\n          } catch (e) {}\n        }, 1500);\n        try {\n          const hres = await fetch(`${serverUrl.replace(/\\/$/, '')}/health`, {\n            method: 'GET',\n            signal: healthCtrl.signal\n          });\n          if (hres && hres.ok) {\n            healthOk = true;\n            try {\n              sessionStorage.setItem('serverUrlReachable', '1');\n            } catch (e) {}\n          }\n        } catch (e) {\n          healthOk = false;\n        } finally {\n          clearTimeout(healthTimeout);\n        }\n      } catch (e) {\n        healthOk = false;\n      }\n      if (healthOk) {\n        await performPost();\n      } else {\n        // Avoid attempting the POST if health check failed — remove runtime override to stop further errors\n        try {\n          localStorage.removeItem('serverUrl');\n        } catch (e) {}\n        try {\n          showToast('Server unreachable — cleared configured server URL. Please set a valid server URL.', false);\n        } catch (e) {}\n      }\n    }, 200);\n    return () => {\n      try {\n        ctrl.abort();\n      } catch (e) {}\n      clearTimeout(t);\n    };\n  }, [serverUrl, monitorMinutes, monitorEma1, monitorEma2, showToast]);\n\n  // Debug helper: simulate a confirmed cross from the frontend (calls /send-alert and adds local event)\n  const simulateConfirmedCross = React.useCallback(forceType => {\n    try {\n      const type = forceType || confirmedCross || 'bull';\n      const sym = (activeSymbol || symbol || '').toString().replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n      const price = lastPrice || 0;\n      // Use configured EMA labels (monitorEma1/monitorEma2) in the message text\n      const text = `${sym} ${type === 'bull' ? `Bullish EMA${monitorEma1} > EMA${monitorEma2}` : `Bearish EMA${monitorEma1} < EMA${monitorEma2}`} @ ${price}`;\n      // add local event\n      const ev = {\n        ts: Date.now(),\n        time: new Date().toLocaleString(),\n        type: type === 'bull' ? 'bull' : 'bear',\n        price,\n        symbol: sym,\n        source: 'client-sim'\n      };\n      addEvent(ev);\n      // fire server send\n      (async () => {\n        if (!serverUrl) {\n          // no server configured (static mode): inform user that Telegram relay is disabled\n          try {\n            showToast('Telegram disabled: no server configured', false);\n          } catch (e) {}\n          if (showDebug) console.debug('[App] simulateConfirmedCross skipped POST /send-alert because serverUrl is not set');\n          return;\n        }\n        try {\n          if (showDebug) console.debug('[App] simulate sending /send-alert', {\n            url: `${serverUrl}/send-alert`,\n            payload: {\n              symbol: sym,\n              price,\n              message: text,\n              emaShort: monitorEma1,\n              emaLong: monitorEma2\n            }\n          });\n          const res = await fetch(`${serverUrl}/send-alert`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              symbol: sym,\n              price,\n              message: text,\n              emaShort: monitorEma1,\n              emaLong: monitorEma2\n            })\n          });\n          let json = null;\n          try {\n            json = await res.json();\n          } catch (e) {\n            json = null;\n          }\n          const sendEv = {\n            ts: Date.now(),\n            time: new Date().toLocaleString(),\n            type: 'telegram_send',\n            symbol: sym,\n            source: 'client-send',\n            ok: res.ok,\n            status: res.status,\n            body: json\n          };\n          addEvent(sendEv);\n          // show immediate toast to user\n          try {\n            showToast(res.ok ? `Telegram send OK (${sym})` : `Telegram send failed (${res.status})`, res.ok);\n          } catch (e) {}\n          if (showDebug) console.debug('[App] simulate /send-alert response', sendEv);\n        } catch (e) {\n          const errEv = {\n            ts: Date.now(),\n            time: new Date().toLocaleString(),\n            type: 'telegram_send',\n            symbol: sym,\n            source: 'client-send',\n            ok: false,\n            error: String(e)\n          };\n          addEvent(errEv);\n          try {\n            showToast(`Telegram send error: ${String(e)}`, false);\n          } catch (err) {}\n          if (showDebug) console.debug('[App] simulate send-alert failed', e);\n        }\n      })();\n    } catch (e) {\n      if (showDebug) console.debug('[App] simulateConfirmedCross error', e);\n    }\n  }, [activeSymbol, symbol, lastPrice, addEvent, showDebug, confirmedCross, showToast, serverUrl, monitorEma1, monitorEma2]);\n\n  // Removed SSE subscription: the app runs fully client-side with Pages Functions for Telegram relay.\n\n  // helper to ask server to monitor a symbol, then connect the client\n  const setServerAndConnect = React.useCallback(async (sym, opts) => {\n    const q = (sym || '').toString().replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n    let interval = opts && typeof opts.interval !== 'undefined' ? opts.interval : monitorMinutes;\n    // normalize interval to a string accepted by Binance (e.g., '5m'). If a plain number is provided, treat as minutes.\n    if (typeof interval === 'number' || typeof interval === 'string' && /^\\d+$/.test(String(interval))) {\n      interval = `${interval}m`;\n    }\n    const emaShort = opts && typeof opts.emaShort !== 'undefined' ? opts.emaShort : monitorEma1;\n    const emaLong = opts && typeof opts.emaLong !== 'undefined' ? opts.emaLong : monitorEma2;\n    // confirmCandles retained previously for server sync; now unused after backend removal\n    if (!q) {\n      try {\n        connect(sym);\n      } catch (e) {}\n      return;\n    }\n    // If caller passed monitoring overrides, commit them to parent state so the\n    // `useEmaCross` hook receives updated props on next render. We wait a short\n    // moment to allow React to flush state before calling `connect` which relies\n    // on the hook's `interval`/`emaShort`/`emaLong` values.\n    try {\n      if (opts) {\n        try {\n          if (typeof opts.interval !== 'undefined') {\n            let v = opts.interval;\n            if (typeof v === 'string' && v.endsWith('m')) v = Number(v.replace(/m$/, ''));\n            if (typeof v === 'number' && Number.isFinite(v) && v > 0) setMonitorMinutes(Number(v));\n          }\n        } catch (e) {}\n        try {\n          if (typeof opts.emaShort !== 'undefined' && Number.isFinite(Number(opts.emaShort))) setMonitorEma1(Number(opts.emaShort));\n        } catch (e) {}\n        try {\n          if (typeof opts.emaLong !== 'undefined' && Number.isFinite(Number(opts.emaLong))) setMonitorEma2(Number(opts.emaLong));\n        } catch (e) {}\n      }\n    } catch (e) {}\n\n    // allow React to re-render with new monitor values before connecting\n    try {\n      await new Promise(r => setTimeout(r, 120));\n    } catch (e) {}\n    try {\n      connect(q);\n    } catch (e) {}\n    // persist the last-used monitor inputs so Alerts/Controls can restore them\n    try {\n      const toStore = {\n        monitorMinutes: typeof interval === 'string' && interval.endsWith('m') ? Number(interval.replace(/m$/, '')) : Number(interval),\n        monitorEma1: Number(emaShort),\n        monitorEma2: Number(emaLong),\n        lastSymbol: q\n      };\n      localStorage.setItem('lastMonitor', JSON.stringify(toStore));\n    } catch (e) {}\n  }, [connect, monitorMinutes, monitorEma1, monitorEma2]);\n\n  // 자동 연결: symbol이 유효하고 autoStart가 켜져 있으면 Start 버튼을 누르지 않아도 connect 호출\n  useEffect(() => {\n    try {\n      const q = (symbol || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n      // only attempt auto-start after the hook has initialized its EMA seed\n      if (q && symbolValid === true && autoStart && status === 'initialized') {\n        if (!activeSymbol || activeSymbol.toString().toUpperCase() !== q) {\n          // ensure server monitor symbol is updated before connecting\n          try {\n            setServerAndConnect(q);\n          } catch (e) {\n            connect(q);\n          }\n        }\n      }\n    } catch (e) {\n      // ignore\n    }\n  }, [symbol, symbolValid, autoStart, activeSymbol, connect, setServerAndConnect, status]);\n\n  // Removed server /health polling in simplified Pages-only mode\n\n  // clearAlerts will be handled inline if needed; no export/import UI\n\n  // --- localStorage에 Alerts 저장/복원 헬퍼 ---\n  const ALERTS_LS_KEY = 'alerts';\n  function saveAlertsToLocalStorage(arr) {\n    try {\n      if (!Array.isArray(arr)) return;\n      // 저장 크기 제한을 위해 최신 500개(로컬스토리지라 쿠키보다 여유)\n      const toStore = JSON.stringify(arr.slice(0, 500));\n      localStorage.setItem(ALERTS_LS_KEY, toStore);\n    } catch (e) {\n      // ignore\n    }\n  }\n  function loadAlertsFromLocalStorage() {\n    try {\n      const raw = localStorage.getItem(ALERTS_LS_KEY);\n      if (!raw) return null;\n      const parsed = JSON.parse(raw);\n      if (Array.isArray(parsed)) return parsed;\n      return null;\n    } catch (e) {\n      return null;\n    }\n  }\n\n  // 복원: 마운트 시 localStorage에서 alerts 복원 (7일 초과 항목은 제거)\n  useEffect(() => {\n    try {\n      const saved = loadAlertsFromLocalStorage();\n      if (saved && Array.isArray(saved) && saved.length > 0) {\n        const cutoff = Date.now() - 1000 * 60 * 60 * 24 * 7; // 7 days\n        const normTarget = (symbol || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n        const filtered = saved.filter(ev => {\n          if (!ev) return false;\n          if (typeof ev.ts === 'number' && ev.ts < cutoff) return false;\n          // try parse time string as fallback\n          if (typeof ev.ts !== 'number') {\n            const parsed = Date.parse(ev.time || '');\n            if (isNaN(parsed) || parsed < cutoff) return false;\n          }\n          // require event symbol to match the current selected symbol to avoid showing other-pair alerts\n          const evSym = (ev.symbol || '').toString().replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n          return evSym === normTarget;\n        });\n        setEvents(filtered);\n      }\n    } catch (e) {}\n  }, [symbol]);\n\n  // Persist monitor inputs whenever they change so UI values are remembered\n  useEffect(() => {\n    try {\n      const toStore = {\n        monitorMinutes,\n        monitorEma1,\n        monitorEma2,\n        monitorConfirm,\n        lastSymbol: symbol\n      };\n      localStorage.setItem('lastMonitor', JSON.stringify(toStore));\n    } catch (e) {}\n  }, [monitorMinutes, monitorEma1, monitorEma2, monitorConfirm, symbol]);\n\n  // 저장: events가 바뀔 때마다 localStorage에 반영 (저장 전에 7일 초과 항목 제거)\n  useEffect(() => {\n    try {\n      const cutoff = Date.now() - 1000 * 60 * 60 * 24 * 7; // 7 days\n      const filtered = (events || []).filter(ev => {\n        if (!ev) return false;\n        if (typeof ev.ts === 'number') return ev.ts >= cutoff;\n        const parsed = Date.parse(ev.time || '');\n        if (!isNaN(parsed)) return parsed >= cutoff;\n        return false;\n      });\n      saveAlertsToLocalStorage(filtered);\n    } catch (e) {}\n  }, [events]);\n\n  // Alerts 항목 삭제 핸들러 (ts 기반으로 고유 항목 제거)\n  function removeAlertByTs(ts) {\n    try {\n      const next = (events || []).filter(ev => ev && ev.ts !== ts);\n      setEvents(next);\n    } catch (e) {}\n  }\n\n  // if symbol becomes invalid, disable autoStart and disconnect to avoid wrong subscriptions\n  useEffect(() => {\n    if (symbolValid === false) {\n      if (autoStart) setAutoStart(false);\n      // ensure disconnected\n      if (connected) disconnect();\n    }\n    // include dependencies to avoid stale closures\n  }, [symbolValid, autoStart, connected, disconnect]);\n\n  // Ask for notification permission on first user interaction\n  useEffect(() => {\n    const handle = () => {\n      if ('Notification' in window && Notification.permission === 'default') {\n        Notification.requestPermission().then(() => {});\n      }\n      window.removeEventListener('click', handle);\n    };\n    window.addEventListener('click', handle);\n    return () => window.removeEventListener('click', handle);\n  }, []);\n\n  // react to confirmed cross changes and notify (skip initial)\n  useEffect(() => {\n    if (!confirmedCross) return;\n    // If the confirmed signal came from initial seeding, don't notify — treat as seeded state\n    if (confirmedSource === 'init') {\n      // ensure we don't trigger notification for seed values\n      lastNotified.current = confirmedCross;\n      return;\n    }\n    if (lastNotified.current == null) {\n      // First observed cross. If it's from initialization source ('init') skip notify.\n      // Otherwise (e.g. mock/live source) allow sending alert immediately.\n      if (confirmedSource === 'init') {\n        lastNotified.current = confirmedCross; // seed only\n        return;\n      }\n      // fall through to notify logic below\n    }\n    if (lastNotified.current !== confirmedCross) {\n      const type = confirmedCross === 'bull' ? `Bullish EMA${monitorEma1} > EMA${monitorEma2}` : `Bearish EMA${monitorEma1} < EMA${monitorEma2}`;\n      const symToShowRaw = activeSymbol || symbol || '';\n      const symToShow = (symToShowRaw || '').toString().replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n      // Determine the authoritative price to show/send. Prefer closed-candle `lastPrice`,\n      // but fall back to the most recent live tick (`lastTick`) when a closed price\n      // isn't yet available. Still skip only when this is the initial seeded value.\n      const priceToUse = typeof lastPrice !== 'undefined' && lastPrice !== null ? lastPrice : typeof lastTick !== 'undefined' && lastTick !== null ? lastTick : null;\n      if (confirmedSource === 'init') {\n        // do not notify for seed values\n        lastNotified.current = confirmedCross;\n        return;\n      }\n      if (priceToUse == null) {\n        // If we truly have no price at all, skip but log in debug so user can inspect\n        if (showDebug) console.debug('[App] skipping notification: no price available (lastPrice & lastTick are null)', {\n          confirmedCross,\n          confirmedSource,\n          activeSymbol,\n          symbol\n        });\n        lastNotified.current = confirmedCross;\n        return;\n      }\n      const body = `${symToShow} ${type} @ ${priceToUse}`;\n\n      // Also request the server to send a Telegram message for this confirmed cross.\n      // In static/client-only mode (no serverUrl) skip server relay and show a toast.\n      (async () => {\n        if (!serverUrl) {\n          try {\n            showToast('Telegram disabled: no server configured', false);\n          } catch (e) {}\n          if (showDebug) console.debug('[App] confirmedCross skipped POST /send-alert because serverUrl is not set');\n          return;\n        }\n        // preflight debug\n        try {\n          if (showDebug) console.debug('[App] confirmedCross preparing /send-alert', {\n            serverUrl,\n            payloadPreview: {\n              symbol: symToShow,\n              price: priceToUse\n            }\n          });\n        } catch (e) {}\n        const payload = {\n          symbol: symToShow,\n          price: priceToUse,\n          message: type + ' @ ' + priceToUse,\n          emaShort: monitorEma1,\n          emaLong: monitorEma2\n        };\n        // debug: log state used for send-alert so we can trace mismatched alerts\n        try {\n          console.log('[App] sending /send-alert', {\n            sendSym: symToShow,\n            selectedSymbol: symbol,\n            activeSymbol,\n            confirmedCross,\n            confirmedSource,\n            ema9,\n            ema26,\n            lastPrice,\n            lastTick\n          });\n        } catch (e) {}\n        // also show a brief UI toast with the same debug info so it's visible without DevTools\n        try {\n          const dbg = `${symToShow} ${confirmedCross} | active:${activeSymbol || '—'} | ema:${typeof ema9 === 'number' ? ema9.toFixed(4) : '—'}/${typeof ema26 === 'number' ? ema26.toFixed(4) : '—'} | price:${typeof lastPrice !== 'undefined' && lastPrice !== null ? lastPrice : '—'}`;\n          try {\n            showToast(`[DEBUG] ${dbg}`, true);\n          } catch (e) {\n            console.log('[App] showToast debug failed', e);\n          }\n        } catch (e) {}\n        const maxAttempts = 3;\n        let attempt = 0;\n        let lastError = null;\n        while (attempt < maxAttempts) {\n          attempt += 1;\n          try {\n            if (showDebug) console.debug('[App] confirmedCross sending /send-alert attempt', attempt, payload);\n            const res = await fetch(`${serverUrl}/send-alert`, {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify(payload)\n            });\n            let json = null;\n            try {\n              json = await res.json();\n            } catch (e) {\n              json = null;\n            }\n            const sendEv = {\n              ts: Date.now(),\n              time: new Date().toLocaleString(),\n              type: 'telegram_send',\n              symbol: symToShow,\n              source: 'client-confirmed',\n              ok: res.ok,\n              status: res.status,\n              body: json,\n              attempt\n            };\n            try {\n              addEvent(sendEv);\n            } catch (e) {\n              setEvents(prev => [sendEv, ...prev].slice(0, 500));\n            }\n            try {\n              showToast(res.ok ? `Telegram send OK (${symToShow})` : `Telegram send failed (${res.status})`, res.ok);\n            } catch (e) {}\n            if (res.ok) break; // success\n            lastError = new Error(`HTTP ${res.status}`);\n          } catch (e) {\n            lastError = e;\n            if (showDebug) console.debug('[App] confirmedCross send attempt failed', attempt, e);\n          }\n          // exponential backoff before retrying\n          if (attempt < maxAttempts) {\n            const delay = 500 * Math.pow(2, attempt - 1); // 500ms, 1000ms\n            await new Promise(r => setTimeout(r, delay));\n          }\n        }\n        if (lastError && showDebug) console.debug('[App] confirmedCross final send error', lastError);\n      })();\n\n      // browser notification\n      if ('Notification' in window && Notification.permission === 'granted') {\n        new Notification(type, {\n          body\n        });\n      }\n\n      // Add a lightweight console trace of the cross event for operational debugging\n      try {\n        console.log('[App] confirmedCross event', {\n          symbol: symToShow,\n          direction: confirmedCross,\n          price: priceToUse,\n          serverUrl,\n          confirmClosedCandles: monitorConfirm\n        });\n      } catch (e) {}\n\n      // beep and log\n      beep();\n      const evObj = {\n        ts: Date.now(),\n        time: new Date().toLocaleString(),\n        type: confirmedCross,\n        price: lastPrice,\n        symbol: symToShow,\n        source: confirmedSource || 'unknown'\n      };\n      if (showDebug) console.debug('[App] created confirmedCross event', evObj);\n      setEvents(s => [evObj, ...s].slice(0, 500));\n      lastNotified.current = confirmedCross;\n    }\n  }, [confirmedCross, lastPrice, lastTick, symbol, activeSymbol, confirmedSource, showDebug, addEvent, showToast, ema9, ema26, serverUrl, monitorEma1, monitorEma2, monitorConfirm]);\n\n  // 심볼이 바뀔 때 이전 심볼의 알림 상태가 남아 있어 잘못된 알림이 뜨는 문제 방지\n  // 심볼을 변경하면 lastNotified를 초기화해서 다음 confirmedCross는 초기 시드로 처리되도록 한다.\n  useEffect(() => {\n    try {\n      lastNotified.current = null;\n    } catch (e) {}\n    // also clear displayed events when symbol changes to avoid mixing alerts from different symbols\n    try {\n      setEvents([]);\n    } catch (e) {}\n  }, [symbol]);\n\n  // persist last selected symbol so the app remembers it between sessions\n  useEffect(() => {\n    try {\n      if (!symbol) return;\n      const norm = (symbol || '').toString().replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n      localStorage.setItem('lastSymbol', norm);\n    } catch (e) {}\n  }, [symbol]);\n\n  // theme (darkMode) persisted in localStorage\n  const [darkMode, setDarkMode] = useState(() => {\n    try {\n      return localStorage.getItem('darkMode') === '1';\n    } catch (e) {\n      return false;\n    }\n  });\n  const toggleDark = React.useCallback(() => {\n    try {\n      setDarkMode(d => {\n        const next = !d;\n        try {\n          localStorage.setItem('darkMode', next ? '1' : '0');\n        } catch (e) {}\n        ;\n        return next;\n      });\n    } catch (e) {}\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `App ${darkMode ? 'dark' : ''}`,\n    children: [/*#__PURE__*/_jsxDEV(TopMenu, {\n      onNavigate: setView,\n      view: view,\n      darkMode: darkMode,\n      toggleDark: toggleDark\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 685,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: view === 'scanner' ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card scanner-full\",\n        children: /*#__PURE__*/_jsxDEV(ScannerPage, {\n          availableSymbols: availableSymbols,\n          fetchExchangeInfo: fetchExchangeInfo,\n          monitorMinutes: monitorMinutes,\n          setMonitorMinutes: setMonitorMinutes,\n          monitorEma1: monitorEma1,\n          setMonitorEma1: setMonitorEma1,\n          monitorEma2: monitorEma2,\n          setMonitorEma2: setMonitorEma2\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 689,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 688,\n        columnNumber: 11\n      }, this) : view === 'alerts' ?\n      /*#__PURE__*/\n      // Single-card Alerts view: show controls and alerts inside one card\n      _jsxDEV(\"div\", {\n        className: \"card main-card\",\n        children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 694,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card sidebar-card\",\n          style: {\n            marginTop: 8,\n            marginBottom: 12\n          },\n          children: [/*#__PURE__*/_jsxDEV(Controls, {\n            symbol: symbol,\n            setSymbol: setSymbol,\n            symbolValid: symbolValid,\n            setSymbolValid: setSymbolValid,\n            suggestions: suggestions,\n            setSuggestions: setSuggestions,\n            availableSymbols: availableSymbols,\n            validateSymbolOnce: validateSymbolOnce,\n            connect: setServerAndConnect,\n            disconnect: disconnect,\n            status: status,\n            connected: connected,\n            monitorMinutes: monitorMinutes,\n            setMonitorMinutes: setMonitorMinutes,\n            monitorEma1: monitorEma1,\n            setMonitorEma1: setMonitorEma1,\n            monitorEma2: monitorEma2,\n            setMonitorEma2: setMonitorEma2,\n            monitorConfirm: monitorConfirm,\n            setMonitorConfirm: setMonitorConfirm,\n            serverUrl: serverUrl,\n            showToast: showToast\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 696,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 12\n            },\n            children: /*#__PURE__*/_jsxDEV(Metrics, {\n              activeSymbol: activeSymbol,\n              symbol: symbol,\n              lastPrice: lastPrice,\n              lastTick: lastTick,\n              lastCandleClosed: lastCandleClosed,\n              cross: cross,\n              confirmedCross: confirmedCross,\n              ema9: ema9,\n              ema26: ema26,\n              monitorEma1: monitorEma1,\n              monitorEma2: monitorEma2\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 721,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 720,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 12\n            },\n            children: /*#__PURE__*/_jsxDEV(Notes, {\n              children: \"Notes: This app uses Binance public REST + websocket. Make sure network allows wss access to stream.binance.com.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 724,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 723,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 695,\n          columnNumber: 13\n        }, this), toast && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `toast ${toast.ok ? 'toast-ok' : 'toast-err'}`,\n          role: \"status\",\n          \"aria-live\": \"polite\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"toast-title\",\n            children: toast.ok ? 'Success' : 'Error'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 731,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"toast-body\",\n            children: toast.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 732,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 730,\n          columnNumber: 15\n        }, this), status === 'reloading' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-text\",\n          children: \"\\uCD08\\uAE30\\uD654 \\uC911... \\uC7A0\\uC2DC\\uB9CC \\uAE30\\uB2E4\\uB824\\uC8FC\\uC138\\uC694\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 737,\n          columnNumber: 15\n        }, this), symbolValid === false && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"invalid-msg\",\n          children: \"Invalid symbol \\u2014 please check the trading pair (e.g. BTCUSDT)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 741,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"status\",\n          style: {\n            marginTop: 8\n          },\n          children: [\"Status: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: status\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 747,\n            columnNumber: 23\n          }, this), \" \", connected ? /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"status-connected\",\n            children: \"(connected)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 747,\n            columnNumber: 62\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"status-disconnected\",\n            children: \"(disconnected)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 747,\n            columnNumber: 118\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 746,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Alerts, {\n          events: events,\n          removeAlertByTs: removeAlertByTs,\n          symbol: symbol,\n          symbolValid: symbolValid,\n          status: status,\n          connect: setServerAndConnect,\n          disconnect: disconnect,\n          monitorMinutes: monitorMinutes,\n          monitorEma1: monitorEma1,\n          monitorEma2: monitorEma2,\n          monitorConfirm: monitorConfirm\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 750,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 693,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"layout-grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n          className: \"sidebar\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card sidebar-card\",\n            children: [/*#__PURE__*/_jsxDEV(Controls, {\n              symbol: symbol,\n              setSymbol: setSymbol,\n              symbolValid: symbolValid,\n              setSymbolValid: setSymbolValid,\n              suggestions: suggestions,\n              setSuggestions: setSuggestions,\n              availableSymbols: availableSymbols,\n              validateSymbolOnce: validateSymbolOnce,\n              connect: setServerAndConnect,\n              disconnect: disconnect,\n              status: status,\n              connected: connected,\n              monitorMinutes: monitorMinutes,\n              setMonitorMinutes: setMonitorMinutes,\n              monitorEma1: monitorEma1,\n              setMonitorEma1: setMonitorEma1,\n              monitorEma2: monitorEma2,\n              setMonitorEma2: setMonitorEma2,\n              monitorConfirm: monitorConfirm,\n              setMonitorConfirm: setMonitorConfirm,\n              serverUrl: serverUrl,\n              showToast: showToast\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 768,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: 12\n              },\n              children: /*#__PURE__*/_jsxDEV(Metrics, {\n                activeSymbol: activeSymbol,\n                symbol: symbol,\n                lastPrice: lastPrice,\n                lastTick: lastTick,\n                lastCandleClosed: lastCandleClosed,\n                cross: cross,\n                confirmedCross: confirmedCross,\n                ema9: ema9,\n                ema26: ema26,\n                monitorEma1: monitorEma1,\n                monitorEma2: monitorEma2\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 793,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 792,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: 12\n              },\n              children: /*#__PURE__*/_jsxDEV(Notes, {\n                children: \"Notes: This app uses Binance public REST + websocket. Make sure network allows wss access to stream.binance.com.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 796,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 795,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 767,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 766,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n          className: \"main-area\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card main-card\",\n            children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 802,\n              columnNumber: 17\n            }, this), toast && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `toast ${toast.ok ? 'toast-ok' : 'toast-err'}`,\n              role: \"status\",\n              \"aria-live\": \"polite\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"toast-title\",\n                children: toast.ok ? 'Success' : 'Error'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 806,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"toast-body\",\n                children: toast.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 807,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 805,\n              columnNumber: 19\n            }, this), status === 'reloading' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-text\",\n              children: \"\\uCD08\\uAE30\\uD654 \\uC911... \\uC7A0\\uC2DC\\uB9CC \\uAE30\\uB2E4\\uB824\\uC8FC\\uC138\\uC694\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 813,\n              columnNumber: 19\n            }, this), symbolValid === false && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"invalid-msg\",\n              children: [\"Invalid symbol \\u2014 please check the trading pair (e.g. BTCUSDT)\", suggestions && suggestions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"suggestions-wrap\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"suggestions-title\",\n                  children: \"Did you mean:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 820,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"suggestions-list\",\n                  children: suggestions.map(s => /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"suggestion-btn\",\n                    onClick: () => {\n                      setSymbol(s);\n                      setSymbolValid(true);\n                      setSuggestions([]);\n                      try {\n                        if (autoStart) setServerAndConnect(s);\n                      } catch (e) {}\n                    },\n                    children: s\n                  }, s, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 823,\n                    columnNumber: 29\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 821,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 819,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 816,\n              columnNumber: 19\n            }, this), view === 'debug' ? /*#__PURE__*/_jsxDEV(DebugPanel, {\n              availableSymbols: availableSymbols,\n              fetchExchangeInfo: fetchExchangeInfo,\n              showDebug: showDebug,\n              setMarketCheckResult: setMarketCheckResult,\n              marketCheckResult: marketCheckResult,\n              symbol: symbol,\n              onSimulateAlert: simulateConfirmedCross\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 837,\n              columnNumber: 19\n            }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"status\",\n              children: [\"Status: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: status\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 841,\n                columnNumber: 27\n              }, this), \" \", connected ? /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"status-connected\",\n                children: \"(connected)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 841,\n                columnNumber: 66\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"status-disconnected\",\n                children: \"(disconnected)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 841,\n                columnNumber: 122\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 840,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Alerts, {\n              events: events,\n              removeAlertByTs: removeAlertByTs,\n              symbol: symbol,\n              symbolValid: symbolValid,\n              status: status,\n              connect: setServerAndConnect,\n              disconnect: disconnect,\n              monitorMinutes: monitorMinutes,\n              monitorEma1: monitorEma1,\n              monitorEma2: monitorEma2,\n              monitorConfirm: monitorConfirm\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 844,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 801,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 800,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 765,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 686,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 684,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"fYO4ROfJZP7gIff0WwfHzkBxkAY=\", false, function () {\n  return [useEmaCross];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useEmaCross","Alerts","Metrics","Controls","DebugPanel","Notes","Header","TopMenu","ScannerPage","jsxDEV","_jsxDEV","beep","AudioCtx","window","AudioContext","webkitAudioContext","ctx","o","createOscillator","g","createGain","type","frequency","value","connect","destination","start","gain","setValueAtTime","currentTime","exponentialRampToValueAtTime","setTimeout","stop","close","e","App","_s","symbol","setSymbol","raw","localStorage","getItem","toString","replace","toUpperCase","autoStart","setAutoStart","symbolValid","setSymbolValid","availableSymbols","setAvailableSymbols","showDebug","suggestions","setSuggestions","monitorMinutes","setMonitorMinutes","parsed","JSON","parse","Number","monitorEma1","setMonitorEma1","monitorEma2","setMonitorEma2","monitorConfirm","setMonitorConfirm","marketCheckResult","setMarketCheckResult","fetchExchangeInfo","res","fetch","ok","console","warn","status","data","json","syms","symbols","map","s","validateSymbolOnce","q","length","normQ","sym","normSym","Array","isArray","hookData","autoConnect","debug","interval","emaShort","emaLong","confirmClosedCandles","ema9","ema26","lastPrice","lastTick","lastCandleClosed","cross","confirmedCross","confirmedSource","connected","disconnect","activeSymbol","events","setEvents","toast","setToast","isDuplicateEvent","useCallback","newEv","existing","aSym","bSym","price","String","aTs","ts","Date","time","bTs","Math","abs","addEvent","ev","prev","some","p","slice","showToast","message","now","lastNotified","view","setView","serverUrl","ls","lsTrim","trim","envVal","process","env","REACT_APP_SERVER_URL","envTrim","location","origin","lsVal","candidate","ctrl","AbortController","to","abort","method","signal","setItem","sessionStorage","clearTimeout","lower","toLowerCase","includes","removeItem","isSameOrigin","sessionOk","performPost","payload","scanType","headers","body","stringify","err","t","healthOk","healthCtrl","healthTimeout","hres","simulateConfirmedCross","forceType","text","toLocaleString","source","url","sendEv","errEv","error","setServerAndConnect","opts","test","v","endsWith","isFinite","Promise","r","toStore","lastSymbol","ALERTS_LS_KEY","saveAlertsToLocalStorage","arr","loadAlertsFromLocalStorage","saved","cutoff","normTarget","filtered","filter","isNaN","evSym","removeAlertByTs","next","handle","Notification","permission","requestPermission","then","removeEventListener","addEventListener","current","symToShowRaw","symToShow","priceToUse","payloadPreview","log","sendSym","selectedSymbol","dbg","toFixed","maxAttempts","attempt","lastError","Error","delay","pow","direction","evObj","norm","darkMode","setDarkMode","toggleDark","d","className","children","onNavigate","fileName","_jsxFileName","lineNumber","columnNumber","style","marginTop","marginBottom","role","onClick","onSimulateAlert","_c","$RefreshReg$"],"sources":["C:/Users/e1it3/Desktop/program/binance_alert/src/App.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\r\nimport './App.css';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport useEmaCross from './hooks/useEmaCross';\r\nimport Alerts from './components/Alerts';\r\nimport Metrics from './components/Metrics';\r\nimport Controls from './components/Controls';\r\nimport DebugPanel from './components/DebugPanel';\r\nimport Notes from './components/Notes';\r\nimport Header from './components/Header';\r\nimport TopMenu from './components/TopMenu';\r\nimport ScannerPage from './pages/ScannerPage';\r\n// 클라이언트 측 스캐너는 서버(Cloudflare Worker) cron 기반으로 대체되므로 임시 비활성화\r\n// import scannerManager from './lib/scannerManager';\r\n\r\nfunction beep() {\r\n  try {\r\n    const AudioCtx = window.AudioContext || window.webkitAudioContext;\r\n    const ctx = new AudioCtx();\r\n    const o = ctx.createOscillator();\r\n    const g = ctx.createGain();\r\n    o.type = 'sine';\r\n    o.frequency.value = 880;\r\n    o.connect(g);\r\n    g.connect(ctx.destination);\r\n    o.start();\r\n    g.gain.setValueAtTime(0.0001, ctx.currentTime);\r\n    g.gain.exponentialRampToValueAtTime(0.1, ctx.currentTime + 0.01);\r\n    g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 0.6);\r\n    setTimeout(() => {\r\n      o.stop();\r\n      try { ctx.close(); } catch (e) {}\r\n    }, 700);\r\n  } catch (e) {\r\n    // ignore\r\n  }\r\n}\r\n\r\nfunction App() {\r\n  const [symbol, setSymbol] = useState(() => {\r\n    try {\r\n      const raw = localStorage.getItem('lastSymbol');\r\n      if (raw && typeof raw === 'string') return raw.toString().replace(/[^A-Za-z0-9]/g, '').toUpperCase();\r\n    } catch (e) {}\r\n    return 'BTCUSDT';\r\n  });\r\n  const [autoStart, setAutoStart] = useState(true);\r\n  const [symbolValid, setSymbolValid] = useState(null); // null=unknown, true/false\r\n  // symbolValidateTimer moved into Controls component\r\n  const [availableSymbols, setAvailableSymbols] = useState(null);\r\n  const [showDebug] = useState(false);\r\n  const [suggestions, setSuggestions] = useState([]);\r\n  // monitoring inputs (minutes + EMA short/long)\r\n  const [monitorMinutes, setMonitorMinutes] = useState(() => {\r\n    try {\r\n      const raw = localStorage.getItem('lastMonitor');\r\n      if (raw) {\r\n        const parsed = JSON.parse(raw);\r\n        if (parsed && typeof parsed.monitorMinutes !== 'undefined') return Number(parsed.monitorMinutes) || 5;\r\n      }\r\n    } catch (e) {}\r\n    return 5;\r\n  });\r\n  const [monitorEma1, setMonitorEma1] = useState(() => {\r\n    try {\r\n      const raw = localStorage.getItem('lastMonitor');\r\n      if (raw) {\r\n        const parsed = JSON.parse(raw);\r\n        if (parsed && typeof parsed.monitorEma1 !== 'undefined') return Number(parsed.monitorEma1) || 26;\r\n      }\r\n    } catch (e) {}\r\n    return 26;\r\n  });\r\n  const [monitorEma2, setMonitorEma2] = useState(() => {\r\n    try {\r\n      const raw = localStorage.getItem('lastMonitor');\r\n      if (raw) {\r\n        const parsed = JSON.parse(raw);\r\n        if (parsed && typeof parsed.monitorEma2 !== 'undefined') return Number(parsed.monitorEma2) || 200;\r\n      }\r\n    } catch (e) {}\r\n    return 200;\r\n  });\r\n  const [monitorConfirm, setMonitorConfirm] = useState(() => {\r\n    try {\r\n      const raw = localStorage.getItem('lastMonitor');\r\n      if (raw) {\r\n        const parsed = JSON.parse(raw);\r\n        if (parsed && typeof parsed.monitorConfirm !== 'undefined') return Number(parsed.monitorConfirm) || 1;\r\n      }\r\n    } catch (e) {}\r\n    // increase default confirmation to 2 closed candles to reduce false positives\r\n    return 2;\r\n  });\r\n  const [marketCheckResult, setMarketCheckResult] = useState(null);\r\n  // helper to fetch exchangeInfo and populate availableSymbols\r\n  async function fetchExchangeInfo() {\r\n    try {\r\n      // default to Binance Futures (USDT-M) exchangeInfo for symbols\r\n      const res = await fetch('https://fapi.binance.com/fapi/v1/exchangeInfo');\r\n      if (!res.ok) {\r\n        console.warn('exchangeInfo fetch failed', res.status);\r\n        setAvailableSymbols([]);\r\n        return;\r\n      }\r\n      const data = await res.json();\r\n      const syms = (data.symbols || []).map(s => s.symbol);\r\n      setAvailableSymbols(syms);\r\n    } catch (e) {\r\n      console.warn('exchangeInfo fetch error', e);\r\n      setAvailableSymbols([]);\r\n    }\r\n  }\r\n\r\n  // fetch full symbol list once on mount for reliable validation\r\n  // fetch full symbol list once on mount for reliable validation\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  useEffect(() => {\r\n    fetchExchangeInfo();\r\n  }, []);\r\n\r\n\r\n\r\n  // helper to validate a symbol (returns true/false)\r\n  async function validateSymbolOnce(s) {\r\n    const q = (s || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase();\r\n    if (!q) return false;\r\n    // If we have a cached symbol list, compare using a normalized form (strip non-alnum, uppercase)\r\n    if (availableSymbols && availableSymbols.length > 0) {\r\n      const normQ = q;\r\n      for (const sym of availableSymbols) {\r\n        const normSym = (sym || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase();\r\n        if (normSym === normQ) return true;\r\n      }\r\n      return false;\r\n    }\r\n    // Fallback to exchangeInfo query for the single symbol\r\n    try {\r\n      // fallback to Binance Futures exchangeInfo lookup\r\n      const res = await fetch(`https://fapi.binance.com/fapi/v1/exchangeInfo?symbol=${q}`);\r\n      if (!res.ok) return false;\r\n      const data = await res.json();\r\n      // if API returned an object with matching symbol(s), accept it\r\n      if (data && Array.isArray(data.symbols) && data.symbols.length > 0) return true;\r\n      if (data && data.symbol) return true;\r\n      return false;\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // if symbol becomes invalid, disable autoStart and disconnect to avoid wrong subscriptions\r\n  // (moved below after hook initialization because it depends on connected/disconnect)\r\n  // Disable hook autoConnect: App will control connecting so we can update server monitor symbol first\r\n  // Guard against unexpected undefined return (e.g., faulty Jest mock) to keep tests stable.\r\n  const hookData = useEmaCross({ symbol, autoConnect: true, debug: showDebug, interval: `${monitorMinutes}m`, emaShort: monitorEma1, emaLong: monitorEma2, confirmClosedCandles: monitorConfirm }) || {};\r\n  const { ema9, ema26, lastPrice, lastTick, lastCandleClosed, cross, confirmedCross, confirmedSource, connected, status, connect, disconnect, activeSymbol } = hookData;\r\n\r\n  \r\n  \r\n  const [events, setEvents] = useState([]);\r\n  const [toast, setToast] = useState(null);\r\n  // Helper: detect duplicate events and add only if not duplicate\r\n  // Dedup logic: consider events duplicate if symbol + type match and their timestamps are within 5s,\r\n  // or if price matches exactly and symbol+type match. This helps avoid server+client duplicate alerts.\r\n  const isDuplicateEvent = React.useCallback((newEv, existing) => {\r\n    try {\r\n      if (!existing || !newEv) return false;\r\n      const aSym = (existing.symbol || '').toString().replace(/[^A-Za-z0-9]/g, '').toUpperCase();\r\n      const bSym = (newEv.symbol || '').toString().replace(/[^A-Za-z0-9]/g, '').toUpperCase();\r\n      if (!aSym || !bSym || aSym !== bSym) return false;\r\n      if ((existing.type || '') !== (newEv.type || '')) return false;\r\n      // exact price match\r\n      if (typeof existing.price !== 'undefined' && typeof newEv.price !== 'undefined' && String(existing.price) === String(newEv.price)) return true;\r\n      // timestamp proximity (use ts if available, otherwise parse time)\r\n      const aTs = typeof existing.ts === 'number' ? existing.ts : (Date.parse(existing.time || '') || 0);\r\n      const bTs = typeof newEv.ts === 'number' ? newEv.ts : (Date.parse(newEv.time || '') || 0);\r\n      if (aTs && bTs && Math.abs(aTs - bTs) <= 5000) return true;\r\n    } catch (e) {}\r\n    return false;\r\n  }, []);\r\n\r\n  const addEvent = React.useCallback((ev) => {\r\n    setEvents((prev) => {\r\n      try {\r\n        if (Array.isArray(prev) && prev.some((p) => isDuplicateEvent(ev, p))) {\r\n          if (showDebug) console.debug('[App] suppressed duplicate event', ev);\r\n          return prev;\r\n        }\r\n      } catch (e) {}\r\n      return [ev, ...prev].slice(0, 500);\r\n    });\r\n  }, [isDuplicateEvent, showDebug]);\r\n  // Inform scannerManager about available symbols.\r\n  // IMPORTANT: do NOT forward raw scanner \"results\" into the global Alerts/events list here.\r\n  // Scanner results are shown on the separate Scanner page and should not be mixed with Alerts.\r\n  // 서버측 Cron 스캐닝 사용: 클라이언트 스캐너 비활성화\r\n  // useEffect(() => {\r\n  //   try {\r\n  //     scannerManager.setGetSymbols(() => availableSymbols || []);\r\n  //   } catch (e) {}\r\n  // }, [availableSymbols]);\r\n  const showToast = React.useCallback((message, ok = true) => {\r\n    try {\r\n      setToast({ message, ok, ts: Date.now() });\r\n      // auto-dismiss after 5s\r\n      setTimeout(() => {\r\n        try { setToast(null); } catch (e) {}\r\n      }, 5000);\r\n    } catch (e) {}\r\n  }, []);\r\n  const lastNotified = useRef(null);\r\n  // Removed SSE/server health state in Pages Functions mode\r\n  const [view, setView] = useState('alerts');\r\n  // Resolve serverUrl in this priority:\r\n  // 1) localStorage 'serverUrl' (allows runtime override without rebuild)\r\n  // 2) REACT_APP_SERVER_URL (build-time)\r\n  // 3) same-origin (only works when Pages/Worker share origin)\r\n  const serverUrl = (() => {\r\n    try {\r\n      const ls = (typeof window !== 'undefined') ? (localStorage.getItem('serverUrl') || '') : '';\r\n      const lsTrim = (ls || '').trim();\r\n      if (lsTrim) return lsTrim.replace(/\\/$/, '');\r\n    } catch (e) {}\r\n    const envVal = (process.env.REACT_APP_SERVER_URL && typeof process.env.REACT_APP_SERVER_URL === 'string') ? process.env.REACT_APP_SERVER_URL : '';\r\n    const envTrim = (envVal || '').trim();\r\n    if (envTrim) return envTrim.replace(/\\/$/, '');\r\n    try {\r\n      if (typeof window !== 'undefined' && window.location && window.location.origin) {\r\n        return window.location.origin.replace(/\\/$/, '');\r\n      }\r\n    } catch (e) {}\r\n    return null;\r\n  })();\r\n\r\n  // If no runtime server override exists, attempt to auto-set it to the deployed\r\n  // Cloudflare Worker so users who open the app without configuring a server stop\r\n  // hitting stale pages.dev hosts. We do a short health check before persisting.\r\n  useEffect(() => {\r\n    try {\r\n      const lsVal = (typeof window !== 'undefined') ? (localStorage.getItem('serverUrl') || '') : '';\r\n      if (lsVal && lsVal.trim()) return; // already set by user\r\n      const candidate = 'https://binance-alert.idcode1690.workers.dev';\r\n      (async () => {\r\n        try {\r\n          const ctrl = new AbortController();\r\n          const to = setTimeout(() => { try { ctrl.abort(); } catch (e) {} }, 1500);\r\n          try {\r\n            const res = await fetch(`${candidate.replace(/\\/$/, '')}/health`, { method: 'GET', signal: ctrl.signal });\r\n            if (res && res.ok) {\r\n              try { localStorage.setItem('serverUrl', candidate); sessionStorage.setItem('serverUrlReachable', '1'); } catch (e) {}\r\n              try { if (showToast) showToast('Server URL set to worker (auto)', true); } catch (e) {}\r\n            }\r\n          } catch (e) {\r\n            // health failed -> don't persist anything\r\n          } finally { clearTimeout(to); }\r\n        } catch (e) {}\r\n      })();\r\n    } catch (e) {}\r\n  }, [showToast]);\r\n\r\n  // quick setter for serverUrl via prompt, stored in localStorage\r\n  // Removed promptSetServerUrl (Controls component provides Set Server URL)\r\n\r\n  // 서버측 스캔 설정을 프론트 변경값과 동기화 (EMA/분) — 프론트에서 한번 설정하면 서버가 값을 유지\r\n  useEffect(() => {\r\n    if (!serverUrl) return;\r\n    // If the runtime serverUrl contains known problematic hostnames (e.g. Pages preview),\r\n    // don't attempt the automatic POST which causes repeated DNS errors in user's console.\r\n    try {\r\n      const lower = (serverUrl || '').toLowerCase();\r\n      if (lower.includes('pages.dev')) {\r\n        try { localStorage.removeItem('serverUrl'); } catch (e) {}\r\n        try { showToast('Removed invalid server URL (pages.dev). Please set a valid server URL.', false); } catch (e) {}\r\n        return;\r\n      }\r\n    } catch (e) {}\r\n\r\n    // Only auto-sync if the server was previously verified reachable in this session,\r\n    // or if the server is same-origin. This avoids blind POST attempts to unreachable hosts.\r\n    const isSameOrigin = (() => {\r\n      try { return typeof window !== 'undefined' && window.location && window.location.origin && serverUrl === window.location.origin.replace(/\\/$/, ''); } catch (e) { return false; }\r\n    })();\r\n    const sessionOk = (() => { try { return sessionStorage.getItem('serverUrlReachable') === '1'; } catch (e) { return false; } })();\r\n\r\n    const ctrl = new AbortController();\r\n    const performPost = async () => {\r\n      try {\r\n        const payload = { interval: monitorMinutes, emaShort: monitorEma1, emaLong: monitorEma2, scanType: 'both' };\r\n        const res = await fetch(`${serverUrl}/config`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload), signal: ctrl.signal });\r\n        if (!res.ok) {\r\n          console.warn('[App] /config sync failed', res.status);\r\n        }\r\n      } catch (e) {\r\n        try { console.warn('[App] /config sync error', e); } catch (err) {}\r\n        try { localStorage.removeItem('serverUrl'); } catch (err) {}\r\n        try { showToast('Server URL removed due to network error. Please reload the page.', false); } catch (err) {}\r\n      }\r\n    };\r\n\r\n    const t = setTimeout(async () => {\r\n      // If same-origin or we've seen the server reachable in this session, post immediately.\r\n      if (isSameOrigin || sessionOk) {\r\n        await performPost();\r\n        return;\r\n      }\r\n\r\n      // Otherwise, do a lightweight health check with short timeout. If it succeeds, mark session ok and post.\r\n      let healthOk = false;\r\n      try {\r\n        const healthCtrl = new AbortController();\r\n        const healthTimeout = setTimeout(() => { try { healthCtrl.abort(); } catch (e) {} }, 1500);\r\n        try {\r\n          const hres = await fetch(`${serverUrl.replace(/\\/$/, '')}/health`, { method: 'GET', signal: healthCtrl.signal });\r\n          if (hres && hres.ok) {\r\n            healthOk = true;\r\n            try { sessionStorage.setItem('serverUrlReachable', '1'); } catch (e) {}\r\n          }\r\n        } catch (e) {\r\n          healthOk = false;\r\n        } finally { clearTimeout(healthTimeout); }\r\n      } catch (e) { healthOk = false; }\r\n\r\n      if (healthOk) {\r\n        await performPost();\r\n      } else {\r\n        // Avoid attempting the POST if health check failed — remove runtime override to stop further errors\r\n        try { localStorage.removeItem('serverUrl'); } catch (e) {}\r\n        try { showToast('Server unreachable — cleared configured server URL. Please set a valid server URL.', false); } catch (e) {}\r\n      }\r\n    }, 200);\r\n    return () => { try { ctrl.abort(); } catch (e) {} clearTimeout(t); };\r\n  }, [serverUrl, monitorMinutes, monitorEma1, monitorEma2, showToast]);\r\n\r\n  // Debug helper: simulate a confirmed cross from the frontend (calls /send-alert and adds local event)\r\n  const simulateConfirmedCross = React.useCallback((forceType) => {\r\n    try {\r\n      const type = forceType || (confirmedCross || 'bull');\r\n      const sym = (activeSymbol || symbol || '').toString().replace(/[^A-Za-z0-9]/g, '').toUpperCase();\r\n      const price = lastPrice || 0;\r\n  // Use configured EMA labels (monitorEma1/monitorEma2) in the message text\r\n  const text = `${sym} ${type === 'bull' ? `Bullish EMA${monitorEma1} > EMA${monitorEma2}` : `Bearish EMA${monitorEma1} < EMA${monitorEma2}`} @ ${price}`;\r\n      // add local event\r\n      const ev = { ts: Date.now(), time: new Date().toLocaleString(), type: type === 'bull' ? 'bull' : 'bear', price, symbol: sym, source: 'client-sim' };\r\n      addEvent(ev);\r\n      // fire server send\r\n      (async () => {\r\n        if (!serverUrl) {\r\n          // no server configured (static mode): inform user that Telegram relay is disabled\r\n          try { showToast('Telegram disabled: no server configured', false); } catch (e) {}\r\n          if (showDebug) console.debug('[App] simulateConfirmedCross skipped POST /send-alert because serverUrl is not set');\r\n          return;\r\n        }\r\n        try {\r\n          if (showDebug) console.debug('[App] simulate sending /send-alert', { url: `${serverUrl}/send-alert`, payload: { symbol: sym, price, message: text, emaShort: monitorEma1, emaLong: monitorEma2 } });\r\n          const res = await fetch(`${serverUrl}/send-alert`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ symbol: sym, price, message: text, emaShort: monitorEma1, emaLong: monitorEma2 }) });\r\n          let json = null;\r\n          try { json = await res.json(); } catch (e) { json = null; }\r\n          const sendEv = { ts: Date.now(), time: new Date().toLocaleString(), type: 'telegram_send', symbol: sym, source: 'client-send', ok: res.ok, status: res.status, body: json };\r\n          addEvent(sendEv);\r\n          // show immediate toast to user\r\n          try { showToast(res.ok ? `Telegram send OK (${sym})` : `Telegram send failed (${res.status})`, res.ok); } catch (e) {}\r\n          if (showDebug) console.debug('[App] simulate /send-alert response', sendEv);\r\n        } catch (e) {\r\n          const errEv = { ts: Date.now(), time: new Date().toLocaleString(), type: 'telegram_send', symbol: sym, source: 'client-send', ok: false, error: String(e) };\r\n          addEvent(errEv);\r\n          try { showToast(`Telegram send error: ${String(e)}`, false); } catch (err) {}\r\n          if (showDebug) console.debug('[App] simulate send-alert failed', e);\r\n        }\r\n      })();\r\n    } catch (e) { if (showDebug) console.debug('[App] simulateConfirmedCross error', e); }\r\n  }, [activeSymbol, symbol, lastPrice, addEvent, showDebug, confirmedCross, showToast, serverUrl, monitorEma1, monitorEma2]);\r\n\r\n \r\n\r\n  // Removed SSE subscription: the app runs fully client-side with Pages Functions for Telegram relay.\r\n\r\n  // helper to ask server to monitor a symbol, then connect the client\r\n  const setServerAndConnect = React.useCallback(async (sym, opts) => {\r\n    const q = (sym || '').toString().replace(/[^A-Za-z0-9]/g, '').toUpperCase();\r\n  let interval = (opts && typeof opts.interval !== 'undefined') ? opts.interval : monitorMinutes;\r\n    // normalize interval to a string accepted by Binance (e.g., '5m'). If a plain number is provided, treat as minutes.\r\n    if (typeof interval === 'number' || (typeof interval === 'string' && /^\\d+$/.test(String(interval)))) {\r\n      interval = `${interval}m`;\r\n    }\r\n  const emaShort = (opts && typeof opts.emaShort !== 'undefined') ? opts.emaShort : monitorEma1;\r\n  const emaLong = (opts && typeof opts.emaLong !== 'undefined') ? opts.emaLong : monitorEma2;\r\n  // confirmCandles retained previously for server sync; now unused after backend removal\r\n    if (!q) {\r\n      try { connect(sym); } catch (e) {}\r\n      return;\r\n    }\r\n    // If caller passed monitoring overrides, commit them to parent state so the\r\n    // `useEmaCross` hook receives updated props on next render. We wait a short\r\n    // moment to allow React to flush state before calling `connect` which relies\r\n    // on the hook's `interval`/`emaShort`/`emaLong` values.\r\n    try {\r\n      if (opts) {\r\n        try {\r\n          if (typeof opts.interval !== 'undefined') {\r\n            let v = opts.interval;\r\n            if (typeof v === 'string' && v.endsWith('m')) v = Number(v.replace(/m$/, ''));\r\n            if (typeof v === 'number' && Number.isFinite(v) && v > 0) setMonitorMinutes(Number(v));\r\n          }\r\n        } catch (e) {}\r\n        try { if (typeof opts.emaShort !== 'undefined' && Number.isFinite(Number(opts.emaShort))) setMonitorEma1(Number(opts.emaShort)); } catch (e) {}\r\n        try { if (typeof opts.emaLong !== 'undefined' && Number.isFinite(Number(opts.emaLong))) setMonitorEma2(Number(opts.emaLong)); } catch (e) {}\r\n      }\r\n    } catch (e) {}\r\n\r\n    // allow React to re-render with new monitor values before connecting\r\n    try { await new Promise((r) => setTimeout(r, 120)); } catch (e) {}\r\n\r\n    try { connect(q); } catch (e) {}\r\n    // persist the last-used monitor inputs so Alerts/Controls can restore them\r\n    try {\r\n      const toStore = { monitorMinutes: (typeof interval === 'string' && interval.endsWith('m')) ? Number(interval.replace(/m$/, '')) : Number(interval), monitorEma1: Number(emaShort), monitorEma2: Number(emaLong), lastSymbol: q };\r\n      localStorage.setItem('lastMonitor', JSON.stringify(toStore));\r\n    } catch (e) {}\r\n  }, [connect, monitorMinutes, monitorEma1, monitorEma2]);\r\n\r\n  \r\n\r\n  // 자동 연결: symbol이 유효하고 autoStart가 켜져 있으면 Start 버튼을 누르지 않아도 connect 호출\r\n  useEffect(() => {\r\n    try {\r\n      const q = (symbol || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase();\r\n      // only attempt auto-start after the hook has initialized its EMA seed\r\n      if (q && symbolValid === true && autoStart && status === 'initialized') {\r\n        if (!activeSymbol || activeSymbol.toString().toUpperCase() !== q) {\r\n          // ensure server monitor symbol is updated before connecting\r\n          try { setServerAndConnect(q); } catch (e) { connect(q); }\r\n        }\r\n      }\r\n    } catch (e) {\r\n      // ignore\r\n    }\r\n  }, [symbol, symbolValid, autoStart, activeSymbol, connect, setServerAndConnect, status]);\r\n\r\n  // Removed server /health polling in simplified Pages-only mode\r\n\r\n  // clearAlerts will be handled inline if needed; no export/import UI\r\n\r\n  // --- localStorage에 Alerts 저장/복원 헬퍼 ---\r\n  const ALERTS_LS_KEY = 'alerts';\r\n  function saveAlertsToLocalStorage(arr) {\r\n    try {\r\n      if (!Array.isArray(arr)) return;\r\n      // 저장 크기 제한을 위해 최신 500개(로컬스토리지라 쿠키보다 여유)\r\n      const toStore = JSON.stringify(arr.slice(0, 500));\r\n      localStorage.setItem(ALERTS_LS_KEY, toStore);\r\n    } catch (e) {\r\n      // ignore\r\n    }\r\n  }\r\n\r\n  function loadAlertsFromLocalStorage() {\r\n    try {\r\n      const raw = localStorage.getItem(ALERTS_LS_KEY);\r\n      if (!raw) return null;\r\n      const parsed = JSON.parse(raw);\r\n      if (Array.isArray(parsed)) return parsed;\r\n      return null;\r\n    } catch (e) {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // 복원: 마운트 시 localStorage에서 alerts 복원 (7일 초과 항목은 제거)\r\n  useEffect(() => {\r\n    try {\r\n      const saved = loadAlertsFromLocalStorage();\r\n      if (saved && Array.isArray(saved) && saved.length > 0) {\r\n        const cutoff = Date.now() - 1000 * 60 * 60 * 24 * 7; // 7 days\r\n        const normTarget = (symbol || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase();\r\n        const filtered = saved.filter((ev) => {\r\n          if (!ev) return false;\r\n          if (typeof ev.ts === 'number' && ev.ts < cutoff) return false;\r\n          // try parse time string as fallback\r\n          if (typeof ev.ts !== 'number') {\r\n            const parsed = Date.parse(ev.time || '');\r\n            if (isNaN(parsed) || parsed < cutoff) return false;\r\n          }\r\n          // require event symbol to match the current selected symbol to avoid showing other-pair alerts\r\n          const evSym = (ev.symbol || '').toString().replace(/[^A-Za-z0-9]/g, '').toUpperCase();\r\n          return evSym === normTarget;\r\n        });\r\n        setEvents(filtered);\r\n      }\r\n    } catch (e) {}\r\n  }, [symbol]);\r\n\r\n  // Persist monitor inputs whenever they change so UI values are remembered\r\n  useEffect(() => {\r\n    try {\r\n      const toStore = { monitorMinutes, monitorEma1, monitorEma2, monitorConfirm, lastSymbol: symbol };\r\n      localStorage.setItem('lastMonitor', JSON.stringify(toStore));\r\n    } catch (e) {}\r\n  }, [monitorMinutes, monitorEma1, monitorEma2, monitorConfirm, symbol]);\r\n\r\n  // 저장: events가 바뀔 때마다 localStorage에 반영 (저장 전에 7일 초과 항목 제거)\r\n  useEffect(() => {\r\n    try {\r\n      const cutoff = Date.now() - 1000 * 60 * 60 * 24 * 7; // 7 days\r\n      const filtered = (events || []).filter((ev) => {\r\n        if (!ev) return false;\r\n        if (typeof ev.ts === 'number') return ev.ts >= cutoff;\r\n        const parsed = Date.parse(ev.time || '');\r\n        if (!isNaN(parsed)) return parsed >= cutoff;\r\n        return false;\r\n      });\r\n      saveAlertsToLocalStorage(filtered);\r\n    } catch (e) {}\r\n  }, [events]);\r\n\r\n  // Alerts 항목 삭제 핸들러 (ts 기반으로 고유 항목 제거)\r\n  function removeAlertByTs(ts) {\r\n    try {\r\n      const next = (events || []).filter((ev) => ev && ev.ts !== ts);\r\n      setEvents(next);\r\n    } catch (e) {}\r\n  }\r\n  \r\n\r\n  // if symbol becomes invalid, disable autoStart and disconnect to avoid wrong subscriptions\r\n  useEffect(() => {\r\n    if (symbolValid === false) {\r\n      if (autoStart) setAutoStart(false);\r\n      // ensure disconnected\r\n      if (connected) disconnect();\r\n    }\r\n    // include dependencies to avoid stale closures\r\n  }, [symbolValid, autoStart, connected, disconnect]);\r\n\r\n  // Ask for notification permission on first user interaction\r\n  useEffect(() => {\r\n    const handle = () => {\r\n      if ('Notification' in window && Notification.permission === 'default') {\r\n        Notification.requestPermission().then(() => {});\r\n      }\r\n      window.removeEventListener('click', handle);\r\n    };\r\n    window.addEventListener('click', handle);\r\n    return () => window.removeEventListener('click', handle);\r\n  }, []);\r\n\r\n  // react to confirmed cross changes and notify (skip initial)\r\n  useEffect(() => {\r\n  if (!confirmedCross) return;\r\n    // If the confirmed signal came from initial seeding, don't notify — treat as seeded state\r\n    if (confirmedSource === 'init') {\r\n      // ensure we don't trigger notification for seed values\r\n      lastNotified.current = confirmedCross;\r\n      return;\r\n    }\r\n    if (lastNotified.current == null) {\r\n      // First observed cross. If it's from initialization source ('init') skip notify.\r\n      // Otherwise (e.g. mock/live source) allow sending alert immediately.\r\n      if (confirmedSource === 'init') {\r\n        lastNotified.current = confirmedCross; // seed only\r\n        return;\r\n      }\r\n      // fall through to notify logic below\r\n    }\r\n\r\n    if (lastNotified.current !== confirmedCross) {\r\n  const type = confirmedCross === 'bull' ? `Bullish EMA${monitorEma1} > EMA${monitorEma2}` : `Bearish EMA${monitorEma1} < EMA${monitorEma2}`;\r\n      const symToShowRaw = activeSymbol || symbol || '';\r\n      const symToShow = (symToShowRaw || '').toString().replace(/[^A-Za-z0-9]/g, '').toUpperCase();\r\n        // Determine the authoritative price to show/send. Prefer closed-candle `lastPrice`,\r\n        // but fall back to the most recent live tick (`lastTick`) when a closed price\r\n        // isn't yet available. Still skip only when this is the initial seeded value.\r\n        const priceToUse = (typeof lastPrice !== 'undefined' && lastPrice !== null) ? lastPrice : ((typeof lastTick !== 'undefined' && lastTick !== null) ? lastTick : null);\r\n        if (confirmedSource === 'init') {\r\n          // do not notify for seed values\r\n          lastNotified.current = confirmedCross;\r\n          return;\r\n        }\r\n        if (priceToUse == null) {\r\n          // If we truly have no price at all, skip but log in debug so user can inspect\r\n          if (showDebug) console.debug('[App] skipping notification: no price available (lastPrice & lastTick are null)', { confirmedCross, confirmedSource, activeSymbol, symbol });\r\n          lastNotified.current = confirmedCross;\r\n          return;\r\n        }\r\n        const body = `${symToShow} ${type} @ ${priceToUse}`;\r\n\r\n      // Also request the server to send a Telegram message for this confirmed cross.\r\n      // In static/client-only mode (no serverUrl) skip server relay and show a toast.\r\n      (async () => {\r\n        if (!serverUrl) {\r\n          try { showToast('Telegram disabled: no server configured', false); } catch (e) {}\r\n          if (showDebug) console.debug('[App] confirmedCross skipped POST /send-alert because serverUrl is not set');\r\n          return;\r\n        }\r\n        // preflight debug\r\n        try { if (showDebug) console.debug('[App] confirmedCross preparing /send-alert', { serverUrl, payloadPreview: { symbol: symToShow, price: priceToUse } }); } catch (e) {}\r\n  const payload = { symbol: symToShow, price: priceToUse, message: type + ' @ ' + priceToUse, emaShort: monitorEma1, emaLong: monitorEma2 };\r\n        // debug: log state used for send-alert so we can trace mismatched alerts\r\n        try {\r\n          console.log('[App] sending /send-alert', { sendSym: symToShow, selectedSymbol: symbol, activeSymbol, confirmedCross, confirmedSource, ema9, ema26, lastPrice, lastTick });\r\n        } catch (e) {}\r\n        // also show a brief UI toast with the same debug info so it's visible without DevTools\r\n        try {\r\n          const dbg = `${symToShow} ${confirmedCross} | active:${activeSymbol || '—'} | ema:${(typeof ema9==='number'?ema9.toFixed(4):'—')}/${(typeof ema26==='number'?ema26.toFixed(4):'—')} | price:${(typeof lastPrice!=='undefined'&&lastPrice!==null)?lastPrice:'—'}`;\r\n          try { showToast(`[DEBUG] ${dbg}`, true); } catch (e) { console.log('[App] showToast debug failed', e); }\r\n        } catch (e) {}\r\n        const maxAttempts = 3;\r\n        let attempt = 0;\r\n        let lastError = null;\r\n        while (attempt < maxAttempts) {\r\n          attempt += 1;\r\n          try {\r\n            if (showDebug) console.debug('[App] confirmedCross sending /send-alert attempt', attempt, payload);\r\n            const res = await fetch(`${serverUrl}/send-alert`, {\r\n              method: 'POST',\r\n              headers: { 'Content-Type': 'application/json' },\r\n              body: JSON.stringify(payload),\r\n            });\r\n            let json = null;\r\n            try { json = await res.json(); } catch (e) { json = null; }\r\n            const sendEv = { ts: Date.now(), time: new Date().toLocaleString(), type: 'telegram_send', symbol: symToShow, source: 'client-confirmed', ok: res.ok, status: res.status, body: json, attempt };\r\n            try { addEvent(sendEv); } catch (e) { setEvents((prev) => [sendEv, ...prev].slice(0, 500)); }\r\n            try { showToast(res.ok ? `Telegram send OK (${symToShow})` : `Telegram send failed (${res.status})`, res.ok); } catch (e) {}\r\n            if (res.ok) break; // success\r\n            lastError = new Error(`HTTP ${res.status}`);\r\n          } catch (e) {\r\n            lastError = e;\r\n            if (showDebug) console.debug('[App] confirmedCross send attempt failed', attempt, e);\r\n          }\r\n          // exponential backoff before retrying\r\n          if (attempt < maxAttempts) {\r\n            const delay = 500 * Math.pow(2, attempt - 1); // 500ms, 1000ms\r\n            await new Promise((r) => setTimeout(r, delay));\r\n          }\r\n        }\r\n        if (lastError && showDebug) console.debug('[App] confirmedCross final send error', lastError);\r\n      })();\r\n\r\n      // browser notification\r\n      if ('Notification' in window && Notification.permission === 'granted') {\r\n        new Notification(type, { body });\r\n      }\r\n\r\n      // Add a lightweight console trace of the cross event for operational debugging\r\n  try { console.log('[App] confirmedCross event', { symbol: symToShow, direction: confirmedCross, price: priceToUse, serverUrl, confirmClosedCandles: monitorConfirm }); } catch (e) {}\r\n\r\n      // beep and log\r\n      beep();\r\n      const evObj = { ts: Date.now(), time: new Date().toLocaleString(), type: confirmedCross, price: lastPrice, symbol: symToShow, source: confirmedSource || 'unknown' };\r\n      if (showDebug) console.debug('[App] created confirmedCross event', evObj);\r\n      setEvents((s) => [evObj, ...s].slice(0, 500));\r\n      lastNotified.current = confirmedCross;\r\n    }\r\n  }, [confirmedCross, lastPrice, lastTick, symbol, activeSymbol, confirmedSource, showDebug, addEvent, showToast, ema9, ema26, serverUrl, monitorEma1, monitorEma2, monitorConfirm]);\r\n\r\n  // 심볼이 바뀔 때 이전 심볼의 알림 상태가 남아 있어 잘못된 알림이 뜨는 문제 방지\r\n  // 심볼을 변경하면 lastNotified를 초기화해서 다음 confirmedCross는 초기 시드로 처리되도록 한다.\r\n  useEffect(() => {\r\n    try {\r\n      lastNotified.current = null;\r\n    } catch (e) {}\r\n    // also clear displayed events when symbol changes to avoid mixing alerts from different symbols\r\n    try { setEvents([]); } catch (e) {}\r\n  }, [symbol]);\r\n\r\n  // persist last selected symbol so the app remembers it between sessions\r\n  useEffect(() => {\r\n    try {\r\n      if (!symbol) return;\r\n      const norm = (symbol || '').toString().replace(/[^A-Za-z0-9]/g, '').toUpperCase();\r\n      localStorage.setItem('lastSymbol', norm);\r\n    } catch (e) {}\r\n  }, [symbol]);\r\n\r\n  // theme (darkMode) persisted in localStorage\r\n  const [darkMode, setDarkMode] = useState(() => { try { return localStorage.getItem('darkMode') === '1'; } catch (e) { return false; } });\r\n  const toggleDark = React.useCallback(() => {\r\n    try {\r\n      setDarkMode((d) => { const next = !d; try { localStorage.setItem('darkMode', next ? '1' : '0'); } catch (e) {} ; return next; });\r\n    } catch (e) {}\r\n  }, []);\r\n\r\n  return (\r\n    <div className={`App ${darkMode ? 'dark' : ''}`}>\r\n      <TopMenu onNavigate={setView} view={view} darkMode={darkMode} toggleDark={toggleDark} />\r\n      <div className=\"container\">\r\n        {view === 'scanner' ? (\r\n          <div className=\"card scanner-full\">\r\n            <ScannerPage availableSymbols={availableSymbols} fetchExchangeInfo={fetchExchangeInfo} monitorMinutes={monitorMinutes} setMonitorMinutes={setMonitorMinutes} monitorEma1={monitorEma1} setMonitorEma1={setMonitorEma1} monitorEma2={monitorEma2} setMonitorEma2={setMonitorEma2} />\r\n          </div>\r\n        ) : view === 'alerts' ? (\r\n          // Single-card Alerts view: show controls and alerts inside one card\r\n          <div className=\"card main-card\">\r\n            <Header />\r\n            <div className=\"card sidebar-card\" style={{ marginTop: 8, marginBottom: 12 }}>\r\n              <Controls\r\n                symbol={symbol}\r\n                setSymbol={setSymbol}\r\n                symbolValid={symbolValid}\r\n                setSymbolValid={setSymbolValid}\r\n                suggestions={suggestions}\r\n                setSuggestions={setSuggestions}\r\n                availableSymbols={availableSymbols}\r\n                validateSymbolOnce={validateSymbolOnce}\r\n                connect={setServerAndConnect}\r\n                disconnect={disconnect}\r\n                status={status}\r\n                connected={connected}\r\n                monitorMinutes={monitorMinutes}\r\n                setMonitorMinutes={setMonitorMinutes}\r\n                monitorEma1={monitorEma1}\r\n                setMonitorEma1={setMonitorEma1}\r\n                monitorEma2={monitorEma2}\r\n                setMonitorEma2={setMonitorEma2}\r\n                monitorConfirm={monitorConfirm}\r\n                setMonitorConfirm={setMonitorConfirm}\r\n                serverUrl={serverUrl}\r\n                showToast={showToast}\r\n              />\r\n              <div style={{ marginTop: 12 }}>\r\n                <Metrics activeSymbol={activeSymbol} symbol={symbol} lastPrice={lastPrice} lastTick={lastTick} lastCandleClosed={lastCandleClosed} cross={cross} confirmedCross={confirmedCross} ema9={ema9} ema26={ema26} monitorEma1={monitorEma1} monitorEma2={monitorEma2} />\r\n              </div>\r\n              <div style={{ marginTop: 12 }}>\r\n                <Notes>Notes: This app uses Binance public REST + websocket. Make sure network allows wss access to stream.binance.com.</Notes>\r\n              </div>\r\n            </div>\r\n\r\n            {/* inline toast for quick feedback */}\r\n            {toast && (\r\n              <div className={`toast ${toast.ok ? 'toast-ok' : 'toast-err'}`} role=\"status\" aria-live=\"polite\">\r\n                <div className=\"toast-title\">{toast.ok ? 'Success' : 'Error'}</div>\r\n                <div className=\"toast-body\">{toast.message}</div>\r\n              </div>\r\n            )}\r\n\r\n            {status === 'reloading' && (\r\n              <div className=\"loading-text\">초기화 중... 잠시만 기다려주세요</div>\r\n            )}\r\n\r\n            {symbolValid === false && (\r\n              <div className=\"invalid-msg\">\r\n                Invalid symbol — please check the trading pair (e.g. BTCUSDT)\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"status\" style={{ marginTop: 8 }}>\r\n              Status: <strong>{status}</strong> {connected ? <span className=\"status-connected\">(connected)</span> : <span className=\"status-disconnected\">(disconnected)</span>}\r\n            </div>\r\n\r\n            <Alerts\r\n              events={events}\r\n              removeAlertByTs={removeAlertByTs}\r\n              symbol={symbol}\r\n              symbolValid={symbolValid}\r\n              status={status}\r\n              connect={setServerAndConnect}\r\n              disconnect={disconnect}\r\n              monitorMinutes={monitorMinutes}\r\n              monitorEma1={monitorEma1}\r\n              monitorEma2={monitorEma2}\r\n              monitorConfirm={monitorConfirm}\r\n            />\r\n          </div>\r\n        ) : (\r\n          <div className=\"layout-grid\">\r\n            <aside className=\"sidebar\">\r\n              <div className=\"card sidebar-card\">\r\n                <Controls\r\n                  symbol={symbol}\r\n                  setSymbol={setSymbol}\r\n                  symbolValid={symbolValid}\r\n                  setSymbolValid={setSymbolValid}\r\n                  suggestions={suggestions}\r\n                  setSuggestions={setSuggestions}\r\n                  availableSymbols={availableSymbols}\r\n                  validateSymbolOnce={validateSymbolOnce}\r\n                  connect={setServerAndConnect}\r\n                  disconnect={disconnect}\r\n                  status={status}\r\n                  connected={connected}\r\n                  monitorMinutes={monitorMinutes}\r\n                  setMonitorMinutes={setMonitorMinutes}\r\n                  monitorEma1={monitorEma1}\r\n                  setMonitorEma1={setMonitorEma1}\r\n                  monitorEma2={monitorEma2}\r\n                  setMonitorEma2={setMonitorEma2}\r\n                  monitorConfirm={monitorConfirm}\r\n                  setMonitorConfirm={setMonitorConfirm}\r\n                  serverUrl={serverUrl}\r\n                  showToast={showToast}\r\n                />\r\n                <div style={{ marginTop: 12 }}>\r\n                  <Metrics activeSymbol={activeSymbol} symbol={symbol} lastPrice={lastPrice} lastTick={lastTick} lastCandleClosed={lastCandleClosed} cross={cross} confirmedCross={confirmedCross} ema9={ema9} ema26={ema26} monitorEma1={monitorEma1} monitorEma2={monitorEma2} />\r\n                </div>\r\n                <div style={{ marginTop: 12 }}>\r\n                  <Notes>Notes: This app uses Binance public REST + websocket. Make sure network allows wss access to stream.binance.com.</Notes>\r\n                </div>\r\n              </div>\r\n            </aside>\r\n            <main className=\"main-area\">\r\n              <div className=\"card main-card\">\r\n                <Header />\r\n                {/* inline toast for quick feedback */}\r\n                {toast && (\r\n                  <div className={`toast ${toast.ok ? 'toast-ok' : 'toast-err'}`} role=\"status\" aria-live=\"polite\">\r\n                    <div className=\"toast-title\">{toast.ok ? 'Success' : 'Error'}</div>\r\n                    <div className=\"toast-body\">{toast.message}</div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* 간단한 로딩 표시: 심볼 변경으로 상태가 reloading일 때 보임 */}\r\n                {status === 'reloading' && (\r\n                  <div className=\"loading-text\">초기화 중... 잠시만 기다려주세요</div>\r\n                )}\r\n                {symbolValid === false && (\r\n                  <div className=\"invalid-msg\">\r\n                    Invalid symbol — please check the trading pair (e.g. BTCUSDT)\r\n                    {suggestions && suggestions.length > 0 && (\r\n                      <div className=\"suggestions-wrap\">\r\n                        <div className=\"suggestions-title\">Did you mean:</div>\r\n                        <div className=\"suggestions-list\">\r\n                          {suggestions.map((s) => (\r\n                            <button key={s} className=\"suggestion-btn\" onClick={() => {\r\n                              setSymbol(s);\r\n                              setSymbolValid(true);\r\n                              setSuggestions([]);\r\n                              try { if (autoStart) setServerAndConnect(s); } catch (e) {}\r\n                            }}>{s}</button>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n\r\n                {view === 'debug' ? (\r\n                  <DebugPanel availableSymbols={availableSymbols} fetchExchangeInfo={fetchExchangeInfo} showDebug={showDebug} setMarketCheckResult={setMarketCheckResult} marketCheckResult={marketCheckResult} symbol={symbol} onSimulateAlert={simulateConfirmedCross} />\r\n                ) : null}\r\n\r\n                <div className=\"status\">\r\n                  Status: <strong>{status}</strong> {connected ? <span className=\"status-connected\">(connected)</span> : <span className=\"status-disconnected\">(disconnected)</span>}\r\n                </div>\r\n\r\n                <Alerts\r\n                  events={events}\r\n                  removeAlertByTs={removeAlertByTs}\r\n                  symbol={symbol}\r\n                  symbolValid={symbolValid}\r\n                  status={status}\r\n                  connect={setServerAndConnect}\r\n                  disconnect={disconnect}\r\n                  monitorMinutes={monitorMinutes}\r\n                  monitorEma1={monitorEma1}\r\n                  monitorEma2={monitorEma2}\r\n                  monitorConfirm={monitorConfirm}\r\n                />\r\n              </div>\r\n            </main>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}