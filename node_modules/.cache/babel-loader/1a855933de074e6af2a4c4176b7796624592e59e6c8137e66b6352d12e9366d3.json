{"ast":null,"code":"import React from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function DebugPanel(_ref){let{availableSymbols,fetchExchangeInfo,showDebug,setMarketCheckResult,marketCheckResult,symbol,onSimulateAlert}=_ref;if(!showDebug)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"debug-panel\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"debug-title\",children:\"Debug info\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"debug-available\",children:[\"Available symbols: \",availableSymbols?availableSymbols.length:'loading']}),/*#__PURE__*/_jsxs(\"div\",{className:\"debug-block\",children:[\"Normalized match for \",/*#__PURE__*/_jsx(\"strong\",{children:symbol}),\": \",(()=>{try{if(!availableSymbols||availableSymbols.length===0)return'no data';const q=(symbol||'').replace(/[^A-Za-z0-9]/g,'').toUpperCase();const found=availableSymbols.some(sy=>(sy||'').replace(/[^A-Za-z0-9]/g,'').toUpperCase()===q);return found?'YES':'NO';}catch(e){return'err';}})()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"debug-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"small-btn\",onClick:()=>fetchExchangeInfo(),children:\"Reload symbols\"}),/*#__PURE__*/_jsx(\"button\",{className:\"small-btn\",onClick:()=>console.log('availableSymbols sample',(availableSymbols||[]).slice(0,50)),children:\"Log sample\"}),/*#__PURE__*/_jsx(\"button\",{className:\"small-btn\",onClick:async()=>{setMarketCheckResult('checking...');try{const q=(symbol||'').replace(/[^A-Za-z0-9]/g,'').toUpperCase();if(!q){setMarketCheckResult('No symbol entered');return;}const endpoints=[{name:'Spot (api.binance.com)',url:\"https://api.binance.com/api/v3/exchangeInfo\"},{name:'Futures USDT-M (fapi.binance.com)',url:\"https://fapi.binance.com/fapi/v1/exchangeInfo\"},{name:'Futures COIN-M (dapi.binance.com)',url:\"https://dapi.binance.com/dapi/v1/exchangeInfo\"}];const results=[];for(const e of endpoints){try{const res=await fetch(e.url);if(!res.ok){results.push(\"\".concat(e.name,\": fetch failed \").concat(res.status));continue;}const data=await res.json();const found=Array.isArray(data.symbols)&&data.symbols.some(s=>(s.symbol||'').replace(/[^A-Za-z0-9]/g,'').toUpperCase()===q);results.push(\"\".concat(e.name,\": \").concat(found?'FOUND':'not found'));}catch(err){results.push(\"\".concat(e.name,\": error\"));}}setMarketCheckResult(results.join(' | '));console.log('market check',results);}catch(err){setMarketCheckResult('error');}},children:\"Check markets\"}),/*#__PURE__*/_jsx(\"button\",{className:\"small-btn\",onClick:()=>{try{if(onSimulateAlert)onSimulateAlert();}catch(e){console.debug('simulate error',e);}},children:\"Simulate Alert\"})]}),marketCheckResult&&/*#__PURE__*/_jsx(\"div\",{className:\"market-result\",children:marketCheckResult})]});}","map":{"version":3,"names":["React","jsx","_jsx","jsxs","_jsxs","DebugPanel","_ref","availableSymbols","fetchExchangeInfo","showDebug","setMarketCheckResult","marketCheckResult","symbol","onSimulateAlert","className","children","length","q","replace","toUpperCase","found","some","sy","e","onClick","console","log","slice","endpoints","name","url","results","res","fetch","ok","push","concat","status","data","json","Array","isArray","symbols","s","err","join","debug"],"sources":["C:/Users/e1it3/Desktop/program/binance_alert/src/components/DebugPanel.js"],"sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default function DebugPanel({ availableSymbols, fetchExchangeInfo, showDebug, setMarketCheckResult, marketCheckResult, symbol, onSimulateAlert }) {\r\n  if (!showDebug) return null;\r\n  return (\r\n    <div className=\"debug-panel\">\r\n      <div className=\"debug-title\">Debug info</div>\r\n      <div className=\"debug-available\">Available symbols: {availableSymbols ? availableSymbols.length : 'loading'}</div>\r\n      <div className=\"debug-block\">\r\n        Normalized match for <strong>{symbol}</strong>: {\r\n          (() => {\r\n            try {\r\n              if (!availableSymbols || availableSymbols.length === 0) return 'no data';\r\n              const q = (symbol || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase();\r\n              const found = availableSymbols.some(sy => (sy || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase() === q);\r\n              return found ? 'YES' : 'NO';\r\n            } catch (e) { return 'err'; }\r\n          })()\r\n        }\r\n      </div>\r\n      <div className=\"debug-actions\">\r\n        <button className=\"small-btn\" onClick={() => fetchExchangeInfo()}>Reload symbols</button>\r\n        <button className=\"small-btn\" onClick={() => console.log('availableSymbols sample', (availableSymbols || []).slice(0, 50))}>Log sample</button>\r\n        <button className=\"small-btn\" onClick={async () => {\r\n          setMarketCheckResult('checking...');\r\n          try {\r\n            const q = (symbol || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase();\r\n            if (!q) { setMarketCheckResult('No symbol entered'); return; }\r\n            const endpoints = [\r\n              { name: 'Spot (api.binance.com)', url: `https://api.binance.com/api/v3/exchangeInfo` },\r\n              { name: 'Futures USDT-M (fapi.binance.com)', url: `https://fapi.binance.com/fapi/v1/exchangeInfo` },\r\n              { name: 'Futures COIN-M (dapi.binance.com)', url: `https://dapi.binance.com/dapi/v1/exchangeInfo` },\r\n            ];\r\n            const results = [];\r\n            for (const e of endpoints) {\r\n              try {\r\n                const res = await fetch(e.url);\r\n                if (!res.ok) { results.push(`${e.name}: fetch failed ${res.status}`); continue; }\r\n                const data = await res.json();\r\n                const found = Array.isArray(data.symbols) && data.symbols.some(s => ((s.symbol||'').replace(/[^A-Za-z0-9]/g,'').toUpperCase()) === q);\r\n                results.push(`${e.name}: ${found ? 'FOUND' : 'not found'}`);\r\n              } catch (err) {\r\n                results.push(`${e.name}: error`);\r\n              }\r\n            }\r\n            setMarketCheckResult(results.join(' | '));\r\n            console.log('market check', results);\r\n          } catch (err) {\r\n            setMarketCheckResult('error');\r\n          }\r\n        }}>Check markets</button>\r\n        <button className=\"small-btn\" onClick={() => { try { if (onSimulateAlert) onSimulateAlert(); } catch (e) { console.debug('simulate error', e); } }}>\r\n          Simulate Alert\r\n        </button>\r\n      </div>\r\n      {marketCheckResult && <div className=\"market-result\">{marketCheckResult}</div>}\r\n    </div>\r\n  );\r\n}\r\n\r\nDebugPanel.propTypes = {\r\n  availableSymbols: PropTypes.array,\r\n  fetchExchangeInfo: PropTypes.func.isRequired,\r\n  showDebug: PropTypes.bool.isRequired,\r\n  setMarketCheckResult: PropTypes.func.isRequired,\r\n  marketCheckResult: PropTypes.string,\r\n  symbol: PropTypes.string,\r\n  onSimulateAlert: PropTypes.func,\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}