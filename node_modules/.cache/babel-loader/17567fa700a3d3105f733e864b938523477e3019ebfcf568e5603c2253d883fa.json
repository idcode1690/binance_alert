{"ast":null,"code":"import React,{Suspense,useEffect,useMemo,useState}from'react';import'./App.css';import{useEma}from'./contexts/EmaContext';import Alerts from'./components/Alerts';import Metrics from'./components/Metrics';import Controls from'./components/Controls';import DebugPanel from'./components/DebugPanel';import Notes from'./components/Notes';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ScannerPage=/*#__PURE__*/React.lazy(()=>import('./pages/ScannerPage'));function AppMain(){// simple page switch: \"alerts\" (main) or \"scanner\"\nconst[page,setPage]=useState('alerts');const[showDebug,setShowDebug]=useState(false);// consume shared EMA hook/context\nconst ema=useEma();// persist last selected symbol to localStorage\nuseEffect(()=>{if(!ema)return;const key='lastSymbol';const saved=localStorage.getItem(key);if(saved&&!ema.activeSymbol){ema.setActiveSymbol(saved);}const handle=()=>{if(ema.activeSymbol)localStorage.setItem(key,ema.activeSymbol);};// listen to changes via polling on activeSymbol (no event emitter here)\nconst id=setInterval(handle,1000);return()=>clearInterval(id);},[ema]);const header=useMemo(()=>'5m · EMA26 / EMA200',[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:header}),/*#__PURE__*/_jsxs(\"nav\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage('alerts'),children:\"Alerts\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage('scanner'),children:\"Scanner\"}),/*#__PURE__*/_jsxs(\"label\",{style:{marginLeft:12},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:showDebug,onChange:e=>setShowDebug(e.target.checked)}),\"Debug\"]})]})]}),/*#__PURE__*/_jsxs(\"main\",{style:{padding:12},children:[page==='alerts'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:12},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(Metrics,{ema:ema}),/*#__PURE__*/_jsx(Controls,{ema:ema})]}),/*#__PURE__*/_jsxs(\"div\",{style:{width:380},children:[/*#__PURE__*/_jsx(Alerts,{ema:ema}),/*#__PURE__*/_jsx(Notes,{})]})]}),showDebug&&/*#__PURE__*/_jsx(DebugPanel,{ema:ema})]}),page==='scanner'&&/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(\"div\",{children:\"Loading scanner...\"}),children:/*#__PURE__*/_jsx(ScannerPage,{})})]})]});}export default AppMain;","map":{"version":3,"names":["React","Suspense","useEffect","useMemo","useState","useEma","Alerts","Metrics","Controls","DebugPanel","Notes","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ScannerPage","lazy","AppMain","page","setPage","showDebug","setShowDebug","ema","key","saved","localStorage","getItem","activeSymbol","setActiveSymbol","handle","setItem","id","setInterval","clearInterval","header","className","children","onClick","style","marginLeft","type","checked","onChange","e","target","padding","display","gap","flex","width","fallback"],"sources":["C:/Users/e1it3/Desktop/program/binance_alert/src/AppMain.js"],"sourcesContent":["import React, { Suspense, useEffect, useMemo, useState } from 'react';\r\nimport './App.css';\r\nimport { useEma } from './contexts/EmaContext';\r\nimport Alerts from './components/Alerts';\r\nimport Metrics from './components/Metrics';\r\nimport Controls from './components/Controls';\r\nimport DebugPanel from './components/DebugPanel';\r\nimport Notes from './components/Notes';\r\n\r\nconst ScannerPage = React.lazy(() => import('./pages/ScannerPage'));\r\n\r\nfunction AppMain() {\r\n  // simple page switch: \"alerts\" (main) or \"scanner\"\r\n  const [page, setPage] = useState('alerts');\r\n  const [showDebug, setShowDebug] = useState(false);\r\n\r\n  // consume shared EMA hook/context\r\n  const ema = useEma();\r\n\r\n  // persist last selected symbol to localStorage\r\n  useEffect(() => {\r\n    if (!ema) return;\r\n    const key = 'lastSymbol';\r\n    const saved = localStorage.getItem(key);\r\n    if (saved && !ema.activeSymbol) {\r\n      ema.setActiveSymbol(saved);\r\n    }\r\n    const handle = () => {\r\n      if (ema.activeSymbol) localStorage.setItem(key, ema.activeSymbol);\r\n    };\r\n    // listen to changes via polling on activeSymbol (no event emitter here)\r\n    const id = setInterval(handle, 1000);\r\n    return () => clearInterval(id);\r\n  }, [ema]);\r\n\r\n  const header = useMemo(() => '5m · EMA26 / EMA200', []);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"App-header\">\r\n        <h1>{header}</h1>\r\n        <nav>\r\n          <button onClick={() => setPage('alerts')}>Alerts</button>\r\n          <button onClick={() => setPage('scanner')}>Scanner</button>\r\n          <label style={{ marginLeft: 12 }}>\r\n            <input type=\"checkbox\" checked={showDebug} onChange={(e) => setShowDebug(e.target.checked)} />\r\n            Debug\r\n          </label>\r\n        </nav>\r\n      </header>\r\n\r\n      <main style={{ padding: 12 }}>\r\n        {page === 'alerts' && (\r\n          <>\r\n            <div style={{ display: 'flex', gap: 12 }}>\r\n              <div style={{ flex: 1 }}>\r\n                <Metrics ema={ema} />\r\n                <Controls ema={ema} />\r\n              </div>\r\n              <div style={{ width: 380 }}>\r\n                <Alerts ema={ema} />\r\n                <Notes />\r\n              </div>\r\n            </div>\r\n            {showDebug && <DebugPanel ema={ema} />}\r\n          </>\r\n        )}\r\n\r\n        {page === 'scanner' && (\r\n          <Suspense fallback={<div>Loading scanner...</div>}>\r\n            <ScannerPage />\r\n          </Suspense>\r\n        )}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AppMain;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,OAAO,CAAEC,QAAQ,KAAQ,OAAO,CACrE,MAAO,WAAW,CAClB,OAASC,MAAM,KAAQ,uBAAuB,CAC9C,MAAO,CAAAC,MAAM,KAAM,qBAAqB,CACxC,MAAO,CAAAC,OAAO,KAAM,sBAAsB,CAC1C,MAAO,CAAAC,QAAQ,KAAM,uBAAuB,CAC5C,MAAO,CAAAC,UAAU,KAAM,yBAAyB,CAChD,MAAO,CAAAC,KAAK,KAAM,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEvC,KAAM,CAAAC,WAAW,cAAGjB,KAAK,CAACkB,IAAI,CAAC,IAAM,MAAM,CAAC,qBAAqB,CAAC,CAAC,CAEnE,QAAS,CAAAC,OAAOA,CAAA,CAAG,CACjB;AACA,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGjB,QAAQ,CAAC,QAAQ,CAAC,CAC1C,KAAM,CAACkB,SAAS,CAAEC,YAAY,CAAC,CAAGnB,QAAQ,CAAC,KAAK,CAAC,CAEjD;AACA,KAAM,CAAAoB,GAAG,CAAGnB,MAAM,CAAC,CAAC,CAEpB;AACAH,SAAS,CAAC,IAAM,CACd,GAAI,CAACsB,GAAG,CAAE,OACV,KAAM,CAAAC,GAAG,CAAG,YAAY,CACxB,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAACH,GAAG,CAAC,CACvC,GAAIC,KAAK,EAAI,CAACF,GAAG,CAACK,YAAY,CAAE,CAC9BL,GAAG,CAACM,eAAe,CAACJ,KAAK,CAAC,CAC5B,CACA,KAAM,CAAAK,MAAM,CAAGA,CAAA,GAAM,CACnB,GAAIP,GAAG,CAACK,YAAY,CAAEF,YAAY,CAACK,OAAO,CAACP,GAAG,CAAED,GAAG,CAACK,YAAY,CAAC,CACnE,CAAC,CACD;AACA,KAAM,CAAAI,EAAE,CAAGC,WAAW,CAACH,MAAM,CAAE,IAAI,CAAC,CACpC,MAAO,IAAMI,aAAa,CAACF,EAAE,CAAC,CAChC,CAAC,CAAE,CAACT,GAAG,CAAC,CAAC,CAET,KAAM,CAAAY,MAAM,CAAGjC,OAAO,CAAC,IAAM,qBAAqB,CAAE,EAAE,CAAC,CAEvD,mBACEW,KAAA,QAAKuB,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClBxB,KAAA,WAAQuB,SAAS,CAAC,YAAY,CAAAC,QAAA,eAC5B1B,IAAA,OAAA0B,QAAA,CAAKF,MAAM,CAAK,CAAC,cACjBtB,KAAA,QAAAwB,QAAA,eACE1B,IAAA,WAAQ2B,OAAO,CAAEA,CAAA,GAAMlB,OAAO,CAAC,QAAQ,CAAE,CAAAiB,QAAA,CAAC,QAAM,CAAQ,CAAC,cACzD1B,IAAA,WAAQ2B,OAAO,CAAEA,CAAA,GAAMlB,OAAO,CAAC,SAAS,CAAE,CAAAiB,QAAA,CAAC,SAAO,CAAQ,CAAC,cAC3DxB,KAAA,UAAO0B,KAAK,CAAE,CAAEC,UAAU,CAAE,EAAG,CAAE,CAAAH,QAAA,eAC/B1B,IAAA,UAAO8B,IAAI,CAAC,UAAU,CAACC,OAAO,CAAErB,SAAU,CAACsB,QAAQ,CAAGC,CAAC,EAAKtB,YAAY,CAACsB,CAAC,CAACC,MAAM,CAACH,OAAO,CAAE,CAAE,CAAC,QAEhG,EAAO,CAAC,EACL,CAAC,EACA,CAAC,cAET7B,KAAA,SAAM0B,KAAK,CAAE,CAAEO,OAAO,CAAE,EAAG,CAAE,CAAAT,QAAA,EAC1BlB,IAAI,GAAK,QAAQ,eAChBN,KAAA,CAAAE,SAAA,EAAAsB,QAAA,eACExB,KAAA,QAAK0B,KAAK,CAAE,CAAEQ,OAAO,CAAE,MAAM,CAAEC,GAAG,CAAE,EAAG,CAAE,CAAAX,QAAA,eACvCxB,KAAA,QAAK0B,KAAK,CAAE,CAAEU,IAAI,CAAE,CAAE,CAAE,CAAAZ,QAAA,eACtB1B,IAAA,CAACL,OAAO,EAACiB,GAAG,CAAEA,GAAI,CAAE,CAAC,cACrBZ,IAAA,CAACJ,QAAQ,EAACgB,GAAG,CAAEA,GAAI,CAAE,CAAC,EACnB,CAAC,cACNV,KAAA,QAAK0B,KAAK,CAAE,CAAEW,KAAK,CAAE,GAAI,CAAE,CAAAb,QAAA,eACzB1B,IAAA,CAACN,MAAM,EAACkB,GAAG,CAAEA,GAAI,CAAE,CAAC,cACpBZ,IAAA,CAACF,KAAK,GAAE,CAAC,EACN,CAAC,EACH,CAAC,CACLY,SAAS,eAAIV,IAAA,CAACH,UAAU,EAACe,GAAG,CAAEA,GAAI,CAAE,CAAC,EACtC,CACH,CAEAJ,IAAI,GAAK,SAAS,eACjBR,IAAA,CAACX,QAAQ,EAACmD,QAAQ,cAAExC,IAAA,QAAA0B,QAAA,CAAK,oBAAkB,CAAK,CAAE,CAAAA,QAAA,cAChD1B,IAAA,CAACK,WAAW,GAAE,CAAC,CACP,CACX,EACG,CAAC,EACJ,CAAC,CAEV,CAEA,cAAe,CAAAE,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}