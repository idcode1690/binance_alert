{"ast":null,"code":"import _objectSpread from\"C:/Users/e1it3/Desktop/program/binance_alert/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// Optimized singleton scanner manager to run scans independent of React component lifecycle.\nconst scannerManager=(()=>{let running=false;let currentSymbol=null;let scanType=null;let progress={done:0,total:0};let results=[];try{if(typeof window!=='undefined'&&window.localStorage){const raw=window.localStorage.getItem('scannerResults');if(raw)results=JSON.parse(raw)||[];}}catch(e){results=[];}let cancel=false;let scanStartTime=null;let currentAbortControllers=new Set();let listeners=new Set();let getSymbolsFn=null;// throttle notifications to reduce render overhead\nlet lastNotifyTs=0;let pendingNotify=false;function stateSnapshot(){return{running,currentSymbol,scanType,progress:_objectSpread({},progress),results:results.slice(),scanStartTime};}function notifyNow(){const s=stateSnapshot();for(const cb of listeners){try{cb(s);}catch(e){}}try{if(typeof window!=='undefined'&&window.localStorage){window.localStorage.setItem('scannerResults',JSON.stringify(results.slice(0,200)));}}catch(e){}}function notifyThrottled(){let force=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;const now=Date.now();if(force||now-lastNotifyTs>=100){lastNotifyTs=now;pendingNotify=false;notifyNow();return;}if(!pendingNotify){pendingNotify=true;const wait=Math.max(0,100-(now-lastNotifyTs));setTimeout(()=>{lastNotifyTs=Date.now();pendingNotify=false;notifyNow();},wait);}}function onUpdate(cb){listeners.add(cb);return()=>listeners.delete(cb);}function setGetSymbols(fn){getSymbolsFn=fn;}const sleep=ms=>new Promise(r=>setTimeout(r,ms));function calculateEma(values,period){if(!Array.isArray(values)||values.length===0)return[];const k=2/(period+1);const out=[];let ema=null;for(let i=0;i<values.length;i++){const v=Number(values[i]);if(isNaN(v)){out.push(null);continue;}if(ema===null){if(i+1>=period){const slice=values.slice(i+1-period,i+1).map(Number);ema=slice.reduce((a,b)=>a+b,0)/period;out.push(ema);}else{out.push(null);}}else{ema=v*k+ema*(1-k);out.push(ema);}}return out;}async function start(type){let opts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(running)return;if(typeof getSymbolsFn!=='function')throw new Error('scannerManager: getSymbolsFn not set');running=true;cancel=false;results=[];progress={done:0,total:0};currentSymbol=null;scanType=type||null;scanStartTime=Date.now();notifyThrottled(true);const list=(await Promise.resolve(getSymbolsFn()))||[];let interval=opts&&typeof opts.interval!=='undefined'?opts.interval:'5m';if(typeof interval==='number'||typeof interval==='string'&&/^\\d+$/.test(String(interval)))interval=\"\".concat(interval,\"m\");const emaShort=opts&&typeof opts.emaShort!=='undefined'?parseInt(opts.emaShort,10):26;const emaLong=opts&&typeof opts.emaLong!=='undefined'?parseInt(opts.emaLong,10):200;const filtered=Array.isArray(list)?list.filter(s=>typeof s==='string'&&/USDT$/i.test(s)):[];progress.total=filtered.length;notifyThrottled(true);const endpointBase='https://fapi.binance.com/fapi/v1/klines';const concurrencyDefault=opts&&typeof opts.concurrency==='number'?Math.max(1,opts.concurrency):8;const batchDelayBase=opts&&typeof opts.batchDelay==='number'?Math.max(0,opts.batchDelay):120;let concurrencyCurrent=concurrencyDefault;let batchDelayCurrent=batchDelayBase;const maxConcurrency=opts&&typeof opts.maxConcurrency==='number'?Math.max(1,opts.maxConcurrency):12;let backoffCount=0;let consecutiveSuccesses=0;const successThreshold=opts&&typeof opts.rampSuccessThreshold==='number'?Math.max(1,opts.rampSuccessThreshold):3;const minBatchDelay=opts&&typeof opts.minBatchDelay==='number'?Math.max(50,opts.minBatchDelay):60;const neededCandles=Math.max(emaShort,emaLong)+10;const candleLimit=Math.min(1000,Math.max(neededCandles+10,120));const processSymbol=async sym=>{if(cancel)return;currentSymbol=sym;notifyThrottled();const url=\"\".concat(endpointBase,\"?symbol=\").concat(encodeURIComponent(sym),\"&interval=\").concat(encodeURIComponent(interval),\"&limit=\").concat(candleLimit);let localAbort=null;try{localAbort=new AbortController();currentAbortControllers.add(localAbort);}catch(e){}try{const r=await fetch(url,localAbort?{signal:localAbort.signal}:undefined);if(!r.ok){if(r.status===429){backoffCount+=1;consecutiveSuccesses=0;concurrencyCurrent=Math.max(1,Math.floor(concurrencyCurrent*0.6));batchDelayCurrent=Math.min(30000,Math.floor(batchDelayCurrent*1.6));const backoffMs=Math.min(30000,1000*Math.pow(2,Math.min(backoffCount,6))+Math.floor(Math.random()*1000));await sleep(backoffMs);}return;}const data=await r.json();backoffCount=Math.max(0,backoffCount-1);consecutiveSuccesses+=1;if(consecutiveSuccesses>=successThreshold){consecutiveSuccesses=0;if(concurrencyCurrent<maxConcurrency)concurrencyCurrent+=1;batchDelayCurrent=Math.max(minBatchDelay,Math.floor(batchDelayCurrent*0.85));}const closes=Array.isArray(data)?data.map(d=>parseFloat(d[4])):[];if(!Array.isArray(closes)||closes.length<neededCandles)return;const emaShortArr=calculateEma(closes,emaShort);const emaLongArr=calculateEma(closes,emaLong);const lastIdx=closes.length-1;const prevIdx=lastIdx-1;const prevShort=emaShortArr[prevIdx];const prevLong=emaLongArr[prevIdx];const lastShort=emaShortArr[lastIdx];const lastLong=emaLongArr[lastIdx];let matched=false;if(typeof prevShort==='number'&&typeof prevLong==='number'&&typeof lastShort==='number'&&typeof lastLong==='number'){if(scanType==='golden')matched=prevShort<=prevLong&&lastShort>lastLong;else if(scanType==='dead')matched=prevShort>=prevLong&&lastShort<lastLong;}if(matched){const lastVolume=Array.isArray(data)&&data[lastIdx]&&data[lastIdx][5]!=null?parseFloat(data[lastIdx][5]):0;const ev={id:\"\".concat(sym,\"-\").concat(Date.now(),\"-\").concat(Math.random().toString(36).slice(2,8)),symbol:sym,lastShort,lastLong,time:new Date().toLocaleString(),interval,emaShort,emaLong,type:scanType,volume:lastVolume};results.unshift(ev);if(results.length>500)results=results.slice(0,500);notifyThrottled();}}catch(e){/* ignore */}finally{if(localAbort)currentAbortControllers.delete(localAbort);progress.done+=1;notifyThrottled();}};let i=0;try{while(i<filtered.length){if(cancel)break;const currentConcurrency=Math.max(1,Math.floor(concurrencyCurrent));const batch=filtered.slice(i,i+currentConcurrency);if(!batch.length)break;await Promise.all(batch.map(sym=>processSymbol(sym)));if(cancel)break;i+=batch.length;if(i<filtered.length){const jitter=Math.floor(Math.random()*Math.min(120,Math.max(10,Math.floor(batchDelayCurrent*0.5))));const delay=Math.max(0,batchDelayCurrent+jitter);await sleep(delay);}}}catch(err){try{console.error('scannerManager.start error',err&&err.message?err.message:err);}catch(e){}}finally{try{for(const c of currentAbortControllers){try{c.abort();}catch(e){}}}catch(e){}currentAbortControllers.clear();running=false;currentSymbol=null;cancel=false;scanStartTime=null;scanType=null;notifyThrottled(true);}}function stop(){cancel=true;try{for(const c of currentAbortControllers){try{c.abort();}catch(e){}}currentAbortControllers.clear();}catch(e){}running=false;currentSymbol=null;scanStartTime=null;scanType=null;notifyThrottled(true);}function getState(){return stateSnapshot();}function removeResult(id){if(!id)return;results=results.filter(r=>r.id!==id);notifyThrottled();}function clearResults(){results=[];notifyThrottled(true);}return{onUpdate,setGetSymbols,start,stop,getState,removeResult,clearResults};})();export default scannerManager;","map":{"version":3,"names":["scannerManager","running","currentSymbol","scanType","progress","done","total","results","window","localStorage","raw","getItem","JSON","parse","e","cancel","scanStartTime","currentAbortControllers","Set","listeners","getSymbolsFn","lastNotifyTs","pendingNotify","stateSnapshot","_objectSpread","slice","notifyNow","s","cb","setItem","stringify","notifyThrottled","force","arguments","length","undefined","now","Date","wait","Math","max","setTimeout","onUpdate","add","delete","setGetSymbols","fn","sleep","ms","Promise","r","calculateEma","values","period","Array","isArray","k","out","ema","i","v","Number","isNaN","push","map","reduce","a","b","start","type","opts","Error","list","resolve","interval","test","String","concat","emaShort","parseInt","emaLong","filtered","filter","endpointBase","concurrencyDefault","concurrency","batchDelayBase","batchDelay","concurrencyCurrent","batchDelayCurrent","maxConcurrency","backoffCount","consecutiveSuccesses","successThreshold","rampSuccessThreshold","minBatchDelay","neededCandles","candleLimit","min","processSymbol","sym","url","encodeURIComponent","localAbort","AbortController","fetch","signal","ok","status","floor","backoffMs","pow","random","data","json","closes","d","parseFloat","emaShortArr","emaLongArr","lastIdx","prevIdx","prevShort","prevLong","lastShort","lastLong","matched","lastVolume","ev","id","toString","symbol","time","toLocaleString","volume","unshift","currentConcurrency","batch","all","jitter","delay","err","console","error","message","c","abort","clear","stop","getState","removeResult","clearResults"],"sources":["C:/Users/e1it3/Desktop/program/binance_alert/src/lib/scannerManager.js"],"sourcesContent":["// Optimized singleton scanner manager to run scans independent of React component lifecycle.\r\nconst scannerManager = (() => {\r\n  let running = false;\r\n  let currentSymbol = null;\r\n  let scanType = null;\r\n  let progress = { done: 0, total: 0 };\r\n  let results = [];\r\n  try { if (typeof window !== 'undefined' && window.localStorage) { const raw = window.localStorage.getItem('scannerResults'); if (raw) results = JSON.parse(raw) || []; } } catch (e) { results = []; }\r\n  let cancel = false;\r\n  let scanStartTime = null;\r\n  let currentAbortControllers = new Set();\r\n  let listeners = new Set();\r\n  let getSymbolsFn = null;\r\n  // throttle notifications to reduce render overhead\r\n  let lastNotifyTs = 0; let pendingNotify = false;\r\n\r\n  function stateSnapshot() { return { running, currentSymbol, scanType, progress: { ...progress }, results: results.slice(), scanStartTime }; }\r\n  function notifyNow() {\r\n    const s = stateSnapshot();\r\n    for (const cb of listeners) { try { cb(s); } catch (e) {} }\r\n    try { if (typeof window !== 'undefined' && window.localStorage) { window.localStorage.setItem('scannerResults', JSON.stringify(results.slice(0, 200))); } } catch (e) {}\r\n  }\r\n  function notifyThrottled(force = false) {\r\n    const now = Date.now();\r\n    if (force || now - lastNotifyTs >= 100) { lastNotifyTs = now; pendingNotify = false; notifyNow(); return; }\r\n    if (!pendingNotify) { pendingNotify = true; const wait = Math.max(0, 100 - (now - lastNotifyTs)); setTimeout(() => { lastNotifyTs = Date.now(); pendingNotify = false; notifyNow(); }, wait); }\r\n  }\r\n\r\n  function onUpdate(cb) { listeners.add(cb); return () => listeners.delete(cb); }\r\n  function setGetSymbols(fn) { getSymbolsFn = fn; }\r\n  const sleep = (ms) => new Promise(r => setTimeout(r, ms));\r\n\r\n  function calculateEma(values, period) {\r\n    if (!Array.isArray(values) || values.length === 0) return [];\r\n    const k = 2 / (period + 1); const out = []; let ema = null;\r\n    for (let i = 0; i < values.length; i++) {\r\n      const v = Number(values[i]); if (isNaN(v)) { out.push(null); continue; }\r\n      if (ema === null) { if (i + 1 >= period) { const slice = values.slice(i + 1 - period, i + 1).map(Number); ema = slice.reduce((a,b)=>a+b,0)/period; out.push(ema); } else { out.push(null); } }\r\n      else { ema = v * k + ema * (1 - k); out.push(ema); }\r\n    }\r\n    return out;\r\n  }\r\n\r\n  async function start(type, opts = {}) {\r\n    if (running) return;\r\n    if (typeof getSymbolsFn !== 'function') throw new Error('scannerManager: getSymbolsFn not set');\r\n    running = true; cancel = false; results = []; progress = { done: 0, total: 0 }; currentSymbol = null; scanType = type || null; scanStartTime = Date.now();\r\n    notifyThrottled(true);\r\n    const list = (await Promise.resolve(getSymbolsFn())) || [];\r\n    let interval = (opts && typeof opts.interval !== 'undefined') ? opts.interval : '5m';\r\n    if (typeof interval === 'number' || (typeof interval === 'string' && /^\\d+$/.test(String(interval)))) interval = `${interval}m`;\r\n    const emaShort = (opts && typeof opts.emaShort !== 'undefined') ? parseInt(opts.emaShort, 10) : 26;\r\n    const emaLong = (opts && typeof opts.emaLong !== 'undefined') ? parseInt(opts.emaLong, 10) : 200;\r\n    const filtered = (Array.isArray(list) ? list.filter(s => typeof s === 'string' && /USDT$/i.test(s)) : []);\r\n    progress.total = filtered.length; notifyThrottled(true);\r\n    const endpointBase = 'https://fapi.binance.com/fapi/v1/klines';\r\n\r\n    const concurrencyDefault = (opts && typeof opts.concurrency === 'number') ? Math.max(1, opts.concurrency) : 8;\r\n    const batchDelayBase = (opts && typeof opts.batchDelay === 'number') ? Math.max(0, opts.batchDelay) : 120;\r\n    let concurrencyCurrent = concurrencyDefault; let batchDelayCurrent = batchDelayBase;\r\n    const maxConcurrency = (opts && typeof opts.maxConcurrency === 'number') ? Math.max(1, opts.maxConcurrency) : 12;\r\n    let backoffCount = 0; let consecutiveSuccesses = 0;\r\n    const successThreshold = (opts && typeof opts.rampSuccessThreshold === 'number') ? Math.max(1, opts.rampSuccessThreshold) : 3;\r\n    const minBatchDelay = (opts && typeof opts.minBatchDelay === 'number') ? Math.max(50, opts.minBatchDelay) : 60;\r\n    const neededCandles = Math.max(emaShort, emaLong) + 10;\r\n    const candleLimit = Math.min(1000, Math.max(neededCandles + 10, 120));\r\n\r\n    const processSymbol = async (sym) => {\r\n      if (cancel) return;\r\n      currentSymbol = sym; notifyThrottled();\r\n      const url = `${endpointBase}?symbol=${encodeURIComponent(sym)}&interval=${encodeURIComponent(interval)}&limit=${candleLimit}`;\r\n      let localAbort = null; try { localAbort = new AbortController(); currentAbortControllers.add(localAbort); } catch (e) {}\r\n      try {\r\n        const r = await fetch(url, localAbort ? { signal: localAbort.signal } : undefined);\r\n        if (!r.ok) {\r\n          if (r.status === 429) {\r\n            backoffCount += 1; consecutiveSuccesses = 0; concurrencyCurrent = Math.max(1, Math.floor(concurrencyCurrent * 0.6)); batchDelayCurrent = Math.min(30000, Math.floor(batchDelayCurrent * 1.6));\r\n            const backoffMs = Math.min(30000, 1000 * Math.pow(2, Math.min(backoffCount, 6)) + Math.floor(Math.random() * 1000));\r\n            await sleep(backoffMs);\r\n          }\r\n          return;\r\n        }\r\n        const data = await r.json();\r\n        backoffCount = Math.max(0, backoffCount - 1); consecutiveSuccesses += 1;\r\n        if (consecutiveSuccesses >= successThreshold) { consecutiveSuccesses = 0; if (concurrencyCurrent < maxConcurrency) concurrencyCurrent += 1; batchDelayCurrent = Math.max(minBatchDelay, Math.floor(batchDelayCurrent * 0.85)); }\r\n        const closes = Array.isArray(data) ? data.map(d => parseFloat(d[4])) : [];\r\n        if (!Array.isArray(closes) || closes.length < neededCandles) return;\r\n        const emaShortArr = calculateEma(closes, emaShort); const emaLongArr = calculateEma(closes, emaLong);\r\n        const lastIdx = closes.length - 1; const prevIdx = lastIdx - 1;\r\n        const prevShort = emaShortArr[prevIdx]; const prevLong = emaLongArr[prevIdx];\r\n        const lastShort = emaShortArr[lastIdx]; const lastLong = emaLongArr[lastIdx];\r\n        let matched = false;\r\n        if (typeof prevShort === 'number' && typeof prevLong === 'number' && typeof lastShort === 'number' && typeof lastLong === 'number') {\r\n          if (scanType === 'golden') matched = (prevShort <= prevLong && lastShort > lastLong);\r\n          else if (scanType === 'dead') matched = (prevShort >= prevLong && lastShort < lastLong);\r\n        }\r\n        if (matched) {\r\n          const lastVolume = (Array.isArray(data) && data[lastIdx] && data[lastIdx][5] != null) ? parseFloat(data[lastIdx][5]) : 0;\r\n          const ev = { id: `${sym}-${Date.now()}-${Math.random().toString(36).slice(2,8)}`, symbol: sym, lastShort, lastLong, time: new Date().toLocaleString(), interval, emaShort, emaLong, type: scanType, volume: lastVolume };\r\n          results.unshift(ev); if (results.length > 500) results = results.slice(0, 500);\r\n          notifyThrottled();\r\n        }\r\n      } catch (e) { /* ignore */ }\r\n      finally { if (localAbort) currentAbortControllers.delete(localAbort); progress.done += 1; notifyThrottled(); }\r\n    };\r\n\r\n    let i = 0;\r\n    try {\r\n      while (i < filtered.length) {\r\n        if (cancel) break;\r\n        const currentConcurrency = Math.max(1, Math.floor(concurrencyCurrent));\r\n        const batch = filtered.slice(i, i + currentConcurrency); if (!batch.length) break;\r\n        await Promise.all(batch.map(sym => processSymbol(sym)));\r\n        if (cancel) break; i += batch.length;\r\n        if (i < filtered.length) { const jitter = Math.floor(Math.random() * Math.min(120, Math.max(10, Math.floor(batchDelayCurrent * 0.5)))); const delay = Math.max(0, batchDelayCurrent + jitter); await sleep(delay); }\r\n      }\r\n    } catch (err) { try { console.error('scannerManager.start error', err && err.message ? err.message : err); } catch (e) {} }\r\n    finally { try { for (const c of currentAbortControllers) { try { c.abort(); } catch (e) {} } } catch (e) {} currentAbortControllers.clear(); running = false; currentSymbol = null; cancel = false; scanStartTime = null; scanType = null; notifyThrottled(true); }\r\n  }\r\n\r\n  function stop() { cancel = true; try { for (const c of currentAbortControllers) { try { c.abort(); } catch (e) {} } currentAbortControllers.clear(); } catch (e) {} running = false; currentSymbol = null; scanStartTime = null; scanType = null; notifyThrottled(true); }\r\n  function getState() { return stateSnapshot(); }\r\n  function removeResult(id) { if (!id) return; results = results.filter(r => r.id !== id); notifyThrottled(); }\r\n  function clearResults() { results = []; notifyThrottled(true); }\r\n\r\n  return { onUpdate, setGetSymbols, start, stop, getState, removeResult, clearResults };\r\n})();\r\n\r\nexport default scannerManager;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}