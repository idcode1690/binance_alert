{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\e1it3\\\\Desktop\\\\program\\\\binance_alert\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport './App.css';\nimport React, { useEffect, useRef, useState } from 'react';\nimport useEmaCross from './hooks/useEmaCross';\nimport Alerts from './components/Alerts';\nimport Metrics from './components/Metrics';\nimport Controls from './components/Controls';\nimport DebugPanel from './components/DebugPanel';\nimport Notes from './components/Notes';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction beep() {\n  try {\n    const AudioCtx = window.AudioContext || window.webkitAudioContext;\n    const ctx = new AudioCtx();\n    const o = ctx.createOscillator();\n    const g = ctx.createGain();\n    o.type = 'sine';\n    o.frequency.value = 880;\n    o.connect(g);\n    g.connect(ctx.destination);\n    o.start();\n    g.gain.setValueAtTime(0.0001, ctx.currentTime);\n    g.gain.exponentialRampToValueAtTime(0.1, ctx.currentTime + 0.01);\n    g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 0.6);\n    setTimeout(() => {\n      o.stop();\n      try {\n        ctx.close();\n      } catch (e) {}\n    }, 700);\n  } catch (e) {\n    // ignore\n  }\n}\nfunction App() {\n  _s();\n  const [symbol, setSymbol] = useState('BTCUSDT');\n  const [autoStart, setAutoStart] = useState(true);\n  const [symbolValid, setSymbolValid] = useState(null); // null=unknown, true/false\n  // symbolValidateTimer moved into Controls component\n  const [availableSymbols, setAvailableSymbols] = useState(null);\n  const [showDebug, setShowDebug] = useState(false);\n  const [suggestions, setSuggestions] = useState([]);\n  const [marketCheckResult, setMarketCheckResult] = useState(null);\n  // helper to fetch exchangeInfo and populate availableSymbols\n  async function fetchExchangeInfo() {\n    try {\n      // default to Binance Futures (USDT-M) exchangeInfo for symbols\n      const res = await fetch('https://fapi.binance.com/fapi/v1/exchangeInfo');\n      if (!res.ok) {\n        console.warn('exchangeInfo fetch failed', res.status);\n        setAvailableSymbols([]);\n        return;\n      }\n      const data = await res.json();\n      const syms = (data.symbols || []).map(s => s.symbol);\n      setAvailableSymbols(syms);\n    } catch (e) {\n      console.warn('exchangeInfo fetch error', e);\n      setAvailableSymbols([]);\n    }\n  }\n\n  // fetch full symbol list once on mount for reliable validation\n  useEffect(() => {\n    fetchExchangeInfo();\n  }, []);\n\n  // helper to validate a symbol (returns true/false)\n  async function validateSymbolOnce(s) {\n    const q = (s || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n    if (!q) return false;\n    // If we have a cached symbol list, compare using a normalized form (strip non-alnum, uppercase)\n    if (availableSymbols && availableSymbols.length > 0) {\n      const normQ = q;\n      for (const sym of availableSymbols) {\n        const normSym = (sym || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n        if (normSym === normQ) return true;\n      }\n      return false;\n    }\n    // Fallback to exchangeInfo query for the single symbol\n    try {\n      // fallback to Binance Futures exchangeInfo lookup\n      const res = await fetch(`https://fapi.binance.com/fapi/v1/exchangeInfo?symbol=${q}`);\n      if (!res.ok) return false;\n      const data = await res.json();\n      // if API returned an object with matching symbol(s), accept it\n      if (data && Array.isArray(data.symbols) && data.symbols.length > 0) return true;\n      if (data && data.symbol) return true;\n      return false;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  // if symbol becomes invalid, disable autoStart and disconnect to avoid wrong subscriptions\n  // (moved below after hook initialization because it depends on connected/disconnect)\n  const {\n    ema9,\n    ema26,\n    lastPrice,\n    lastCandleClosed,\n    cross,\n    confirmedCross,\n    confirmedSource,\n    connected,\n    status,\n    connect,\n    disconnect,\n    activeSymbol\n  } = useEmaCross({\n    symbol,\n    autoConnect: autoStart,\n    debug: showDebug\n  });\n\n  // 자동 연결: symbol이 유효하고 autoStart가 켜져 있으면 Start 버튼을 누르지 않아도 connect 호출\n  useEffect(() => {\n    try {\n      const q = (symbol || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n      if (q && symbolValid === true && autoStart) {\n        // avoid calling connect if already active for this symbol\n        if (!activeSymbol || activeSymbol.toString().toUpperCase() !== q) {\n          connect(q);\n        }\n      }\n    } catch (e) {\n      // ignore\n    }\n  }, [symbol, symbolValid, autoStart, activeSymbol, connect]);\n  const [events, setEvents] = useState([]);\n  const lastNotified = useRef(null);\n\n  // Subscribe to server-sent events from server (realtime alerts emitted by server)\n  useEffect(() => {\n    const serverUrl = process.env.REACT_APP_SERVER_URL || 'http://localhost:3001';\n    if (!window.EventSource) return;\n    let es;\n    try {\n      es = new EventSource(`${serverUrl}/events`);\n      es.onmessage = e => {\n        try {\n          const obj = JSON.parse(e.data);\n          if (!obj) return;\n          // only consider alert events\n          if (obj.type === 'alert') {\n            // prefer the activeSymbol from the hook, fallback to the selected symbol\n            const current = (activeSymbol || symbol || '').toString().replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n            const incoming = (obj.symbol || '').toString().replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n            // if incoming alert is for a different symbol, ignore it\n            if (incoming && current && incoming !== current) return;\n            const evObj = {\n              ts: obj.ts || Date.now(),\n              time: obj.when ? new Date(obj.when).toLocaleString() : new Date().toLocaleString(),\n              type: obj.alert === 'bull' ? 'bull' : 'bear',\n              price: obj.price,\n              symbol: obj.symbol || symbol,\n              source: 'server'\n            };\n            setEvents(prev => {\n              try {\n                if (evObj.ts && prev.some(p => p && p.ts === evObj.ts)) return prev;\n              } catch (e) {}\n              return [evObj, ...prev].slice(0, 500);\n            });\n          }\n        } catch (err) {}\n      };\n      es.onerror = () => {\n        try {\n          es.close();\n        } catch (e) {}\n      };\n    } catch (e) {}\n    return () => {\n      try {\n        es && es.close();\n      } catch (e) {}\n    };\n  }, [symbol]);\n\n  // clearAlerts will be handled inline if needed; no export/import UI\n\n  // --- localStorage에 Alerts 저장/복원 헬퍼 ---\n  const ALERTS_LS_KEY = 'alerts';\n  function saveAlertsToLocalStorage(arr) {\n    try {\n      if (!Array.isArray(arr)) return;\n      // 저장 크기 제한을 위해 최신 500개(로컬스토리지라 쿠키보다 여유)\n      const toStore = JSON.stringify(arr.slice(0, 500));\n      localStorage.setItem(ALERTS_LS_KEY, toStore);\n    } catch (e) {\n      // ignore\n    }\n  }\n  function loadAlertsFromLocalStorage() {\n    try {\n      const raw = localStorage.getItem(ALERTS_LS_KEY);\n      if (!raw) return null;\n      const parsed = JSON.parse(raw);\n      if (Array.isArray(parsed)) return parsed;\n      return null;\n    } catch (e) {\n      return null;\n    }\n  }\n\n  // 복원: 마운트 시 localStorage에서 alerts 복원 (7일 초과 항목은 제거)\n  useEffect(() => {\n    try {\n      const saved = loadAlertsFromLocalStorage();\n      if (saved && Array.isArray(saved) && saved.length > 0) {\n        const cutoff = Date.now() - 1000 * 60 * 60 * 24 * 7; // 7 days\n        const filtered = saved.filter(ev => {\n          if (!ev) return false;\n          if (typeof ev.ts === 'number') return ev.ts >= cutoff;\n          // try parse time string as fallback\n          const parsed = Date.parse(ev.time || '');\n          if (!isNaN(parsed)) return parsed >= cutoff;\n          return false;\n        });\n        setEvents(filtered);\n      }\n    } catch (e) {}\n  }, []);\n\n  // 저장: events가 바뀔 때마다 localStorage에 반영 (저장 전에 7일 초과 항목 제거)\n  useEffect(() => {\n    try {\n      const cutoff = Date.now() - 1000 * 60 * 60 * 24 * 7; // 7 days\n      const filtered = (events || []).filter(ev => {\n        if (!ev) return false;\n        if (typeof ev.ts === 'number') return ev.ts >= cutoff;\n        const parsed = Date.parse(ev.time || '');\n        if (!isNaN(parsed)) return parsed >= cutoff;\n        return false;\n      });\n      saveAlertsToLocalStorage(filtered);\n    } catch (e) {}\n  }, [events]);\n\n  // Alerts 항목 삭제 핸들러 (ts 기반으로 고유 항목 제거)\n  function removeAlertByTs(ts) {\n    try {\n      const next = (events || []).filter(ev => ev && ev.ts !== ts);\n      setEvents(next);\n    } catch (e) {}\n  }\n\n  // if symbol becomes invalid, disable autoStart and disconnect to avoid wrong subscriptions\n  useEffect(() => {\n    if (symbolValid === false) {\n      if (autoStart) setAutoStart(false);\n      // ensure disconnected\n      if (connected) disconnect();\n    }\n    // include dependencies to avoid stale closures\n  }, [symbolValid, autoStart, connected, disconnect]);\n\n  // Ask for notification permission on first user interaction\n  useEffect(() => {\n    const handle = () => {\n      if ('Notification' in window && Notification.permission === 'default') {\n        Notification.requestPermission().then(() => {});\n      }\n      window.removeEventListener('click', handle);\n    };\n    window.addEventListener('click', handle);\n    return () => window.removeEventListener('click', handle);\n  }, []);\n\n  // react to confirmed cross changes and notify (skip initial)\n  useEffect(() => {\n    if (!confirmedCross) return;\n    // If the confirmed signal came from initial seeding, don't notify — treat as seeded state\n    if (confirmedSource === 'init') {\n      // ensure we don't trigger notification for seed values\n      lastNotified.current = confirmedCross;\n      return;\n    }\n    if (lastNotified.current == null) {\n      // seed without notifying\n      lastNotified.current = confirmedCross;\n      return;\n    }\n    if (lastNotified.current !== confirmedCross) {\n      const type = confirmedCross === 'bull' ? 'Bullish EMA9 > EMA26' : 'Bearish EMA9 < EMA26';\n      const symToShow = activeSymbol || symbol;\n      const body = `${symToShow} ${type} @ ${lastPrice !== null && lastPrice !== void 0 ? lastPrice : 'N/A'}`;\n\n      // browser notification\n      if ('Notification' in window && Notification.permission === 'granted') {\n        new Notification(type, {\n          body\n        });\n      }\n\n      // beep and log\n      beep();\n      const evObj = {\n        ts: Date.now(),\n        time: new Date().toLocaleString(),\n        type: confirmedCross,\n        price: lastPrice,\n        symbol: symToShow,\n        source: confirmedSource || 'unknown'\n      };\n      setEvents(s => [evObj, ...s].slice(0, 500));\n      lastNotified.current = confirmedCross;\n    }\n  }, [confirmedCross, lastPrice, symbol, activeSymbol, confirmedSource]);\n\n  // 심볼이 바뀔 때 이전 심볼의 알림 상태가 남아 있어 잘못된 알림이 뜨는 문제 방지\n  // 심볼을 변경하면 lastNotified를 초기화해서 다음 confirmedCross는 초기 시드로 처리되도록 한다.\n  useEffect(() => {\n    try {\n      lastNotified.current = null;\n    } catch (e) {}\n  }, [symbol]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"title\",\n            children: \"Binance EMA Cross Alert\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"header-right\",\n            children: \"1m \\xB7 EMA9 / EMA26\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Controls, {\n          symbol: symbol,\n          setSymbol: setSymbol,\n          autoStart: autoStart,\n          setAutoStart: setAutoStart,\n          symbolValid: symbolValid,\n          setSymbolValid: setSymbolValid,\n          suggestions: suggestions,\n          setSuggestions: setSuggestions,\n          availableSymbols: availableSymbols,\n          validateSymbolOnce: validateSymbolOnce,\n          connect: connect,\n          disconnect: disconnect,\n          status: status,\n          connected: connected,\n          showDebug: showDebug,\n          setShowDebug: setShowDebug\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this), status === 'reloading' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-text\",\n          children: \"\\uCD08\\uAE30\\uD654 \\uC911... \\uC7A0\\uC2DC\\uB9CC \\uAE30\\uB2E4\\uB824\\uC8FC\\uC138\\uC694\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 13\n        }, this), symbolValid === false && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"invalid-msg\",\n          children: [\"Invalid symbol \\u2014 please check the trading pair (e.g. BTCUSDT)\", suggestions && suggestions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"suggestions-wrap\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"suggestions-title\",\n              children: \"Did you mean:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"suggestions-list\",\n              children: suggestions.map(s => /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"suggestion-btn\",\n                onClick: () => {\n                  setSymbol(s);\n                  setSymbolValid(true);\n                  setSuggestions([]);\n                  try {\n                    if (autoStart) connect(s);\n                  } catch (e) {}\n                },\n                children: s\n              }, s, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DebugPanel, {\n          availableSymbols: availableSymbols,\n          fetchExchangeInfo: fetchExchangeInfo,\n          showDebug: showDebug,\n          setMarketCheckResult: setMarketCheckResult,\n          marketCheckResult: marketCheckResult,\n          symbol: symbol\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"status\",\n          children: [\"Status: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: status\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 21\n          }, this), \" \", connected ? /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"status-connected\",\n            children: \"(connected)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 60\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"status-disconnected\",\n            children: \"(disconnected)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 116\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Metrics, {\n          activeSymbol: activeSymbol,\n          symbol: symbol,\n          lastPrice: lastPrice,\n          lastCandleClosed: lastCandleClosed,\n          cross: cross,\n          confirmedCross: confirmedCross,\n          ema9: ema9,\n          ema26: ema26\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Alerts, {\n          events: events,\n          removeAlertByTs: removeAlertByTs\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Notes, {\n          children: \"Notes: This app uses Binance public REST + websocket. Make sure network allows wss access to stream.binance.com.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 284,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"2Kle0mUOBY0RxkJ7vBl27RErFAw=\", false, function () {\n  return [useEmaCross];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useEmaCross","Alerts","Metrics","Controls","DebugPanel","Notes","jsxDEV","_jsxDEV","beep","AudioCtx","window","AudioContext","webkitAudioContext","ctx","o","createOscillator","g","createGain","type","frequency","value","connect","destination","start","gain","setValueAtTime","currentTime","exponentialRampToValueAtTime","setTimeout","stop","close","e","App","_s","symbol","setSymbol","autoStart","setAutoStart","symbolValid","setSymbolValid","availableSymbols","setAvailableSymbols","showDebug","setShowDebug","suggestions","setSuggestions","marketCheckResult","setMarketCheckResult","fetchExchangeInfo","res","fetch","ok","console","warn","status","data","json","syms","symbols","map","s","validateSymbolOnce","q","replace","toUpperCase","length","normQ","sym","normSym","Array","isArray","ema9","ema26","lastPrice","lastCandleClosed","cross","confirmedCross","confirmedSource","connected","disconnect","activeSymbol","autoConnect","debug","toString","events","setEvents","lastNotified","serverUrl","process","env","REACT_APP_SERVER_URL","EventSource","es","onmessage","obj","JSON","parse","current","incoming","evObj","ts","Date","now","time","when","toLocaleString","alert","price","source","prev","some","p","slice","err","onerror","ALERTS_LS_KEY","saveAlertsToLocalStorage","arr","toStore","stringify","localStorage","setItem","loadAlertsFromLocalStorage","raw","getItem","parsed","saved","cutoff","filtered","filter","ev","isNaN","removeAlertByTs","next","handle","Notification","permission","requestPermission","then","removeEventListener","addEventListener","symToShow","body","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["C:/Users/e1it3/Desktop/program/binance_alert/src/App.js"],"sourcesContent":["import './App.css';\nimport React, { useEffect, useRef, useState } from 'react';\nimport useEmaCross from './hooks/useEmaCross';\nimport Alerts from './components/Alerts';\nimport Metrics from './components/Metrics';\nimport Controls from './components/Controls';\nimport DebugPanel from './components/DebugPanel';\nimport Notes from './components/Notes';\n\nfunction beep() {\n  try {\n    const AudioCtx = window.AudioContext || window.webkitAudioContext;\n    const ctx = new AudioCtx();\n    const o = ctx.createOscillator();\n    const g = ctx.createGain();\n    o.type = 'sine';\n    o.frequency.value = 880;\n    o.connect(g);\n    g.connect(ctx.destination);\n    o.start();\n    g.gain.setValueAtTime(0.0001, ctx.currentTime);\n    g.gain.exponentialRampToValueAtTime(0.1, ctx.currentTime + 0.01);\n    g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 0.6);\n    setTimeout(() => {\n      o.stop();\n      try { ctx.close(); } catch (e) {}\n    }, 700);\n  } catch (e) {\n    // ignore\n  }\n}\n\nfunction App() {\n  const [symbol, setSymbol] = useState('BTCUSDT');\n  const [autoStart, setAutoStart] = useState(true);\n  const [symbolValid, setSymbolValid] = useState(null); // null=unknown, true/false\n  // symbolValidateTimer moved into Controls component\n  const [availableSymbols, setAvailableSymbols] = useState(null);\n  const [showDebug, setShowDebug] = useState(false);\n  const [suggestions, setSuggestions] = useState([]);\n  const [marketCheckResult, setMarketCheckResult] = useState(null);\n  // helper to fetch exchangeInfo and populate availableSymbols\n  async function fetchExchangeInfo() {\n    try {\n      // default to Binance Futures (USDT-M) exchangeInfo for symbols\n      const res = await fetch('https://fapi.binance.com/fapi/v1/exchangeInfo');\n      if (!res.ok) {\n        console.warn('exchangeInfo fetch failed', res.status);\n        setAvailableSymbols([]);\n        return;\n      }\n      const data = await res.json();\n      const syms = (data.symbols || []).map(s => s.symbol);\n      setAvailableSymbols(syms);\n    } catch (e) {\n      console.warn('exchangeInfo fetch error', e);\n      setAvailableSymbols([]);\n    }\n  }\n\n  // fetch full symbol list once on mount for reliable validation\n  useEffect(() => {\n    fetchExchangeInfo();\n  }, []);\n\n  // helper to validate a symbol (returns true/false)\n  async function validateSymbolOnce(s) {\n    const q = (s || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n    if (!q) return false;\n    // If we have a cached symbol list, compare using a normalized form (strip non-alnum, uppercase)\n    if (availableSymbols && availableSymbols.length > 0) {\n      const normQ = q;\n      for (const sym of availableSymbols) {\n        const normSym = (sym || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n        if (normSym === normQ) return true;\n      }\n      return false;\n    }\n    // Fallback to exchangeInfo query for the single symbol\n    try {\n      // fallback to Binance Futures exchangeInfo lookup\n      const res = await fetch(`https://fapi.binance.com/fapi/v1/exchangeInfo?symbol=${q}`);\n      if (!res.ok) return false;\n      const data = await res.json();\n      // if API returned an object with matching symbol(s), accept it\n      if (data && Array.isArray(data.symbols) && data.symbols.length > 0) return true;\n      if (data && data.symbol) return true;\n      return false;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  // if symbol becomes invalid, disable autoStart and disconnect to avoid wrong subscriptions\n  // (moved below after hook initialization because it depends on connected/disconnect)\n  const { ema9, ema26, lastPrice, lastCandleClosed, cross, confirmedCross, confirmedSource, connected, status, connect, disconnect, activeSymbol } = useEmaCross({ symbol, autoConnect: autoStart, debug: showDebug });\n\n  // 자동 연결: symbol이 유효하고 autoStart가 켜져 있으면 Start 버튼을 누르지 않아도 connect 호출\n  useEffect(() => {\n    try {\n      const q = (symbol || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n      if (q && symbolValid === true && autoStart) {\n        // avoid calling connect if already active for this symbol\n        if (!activeSymbol || activeSymbol.toString().toUpperCase() !== q) {\n          connect(q);\n        }\n      }\n    } catch (e) {\n      // ignore\n    }\n  }, [symbol, symbolValid, autoStart, activeSymbol, connect]);\n  const [events, setEvents] = useState([]);\n  const lastNotified = useRef(null);\n\n  // Subscribe to server-sent events from server (realtime alerts emitted by server)\n  useEffect(() => {\n    const serverUrl = process.env.REACT_APP_SERVER_URL || 'http://localhost:3001';\n    if (!window.EventSource) return;\n    let es;\n    try {\n      es = new EventSource(`${serverUrl}/events`);\n      es.onmessage = (e) => {\n        try {\n          const obj = JSON.parse(e.data);\n          if (!obj) return;\n          // only consider alert events\n          if (obj.type === 'alert') {\n            // prefer the activeSymbol from the hook, fallback to the selected symbol\n            const current = (activeSymbol || symbol || '').toString().replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n            const incoming = (obj.symbol || '').toString().replace(/[^A-Za-z0-9]/g, '').toUpperCase();\n            // if incoming alert is for a different symbol, ignore it\n            if (incoming && current && incoming !== current) return;\n\n            const evObj = { ts: obj.ts || Date.now(), time: obj.when ? new Date(obj.when).toLocaleString() : new Date().toLocaleString(), type: obj.alert === 'bull' ? 'bull' : 'bear', price: obj.price, symbol: obj.symbol || symbol, source: 'server' };\n            setEvents((prev) => {\n              try {\n                if (evObj.ts && prev.some((p) => p && p.ts === evObj.ts)) return prev;\n              } catch (e) {}\n              return [evObj, ...prev].slice(0, 500);\n            });\n          }\n        } catch (err) {}\n      };\n      es.onerror = () => {\n        try { es.close(); } catch (e) {}\n      };\n    } catch (e) {}\n    return () => { try { es && es.close(); } catch (e) {} };\n  }, [symbol]);\n\n  // clearAlerts will be handled inline if needed; no export/import UI\n\n  // --- localStorage에 Alerts 저장/복원 헬퍼 ---\n  const ALERTS_LS_KEY = 'alerts';\n  function saveAlertsToLocalStorage(arr) {\n    try {\n      if (!Array.isArray(arr)) return;\n      // 저장 크기 제한을 위해 최신 500개(로컬스토리지라 쿠키보다 여유)\n      const toStore = JSON.stringify(arr.slice(0, 500));\n      localStorage.setItem(ALERTS_LS_KEY, toStore);\n    } catch (e) {\n      // ignore\n    }\n  }\n\n  function loadAlertsFromLocalStorage() {\n    try {\n      const raw = localStorage.getItem(ALERTS_LS_KEY);\n      if (!raw) return null;\n      const parsed = JSON.parse(raw);\n      if (Array.isArray(parsed)) return parsed;\n      return null;\n    } catch (e) {\n      return null;\n    }\n  }\n\n  // 복원: 마운트 시 localStorage에서 alerts 복원 (7일 초과 항목은 제거)\n  useEffect(() => {\n    try {\n      const saved = loadAlertsFromLocalStorage();\n      if (saved && Array.isArray(saved) && saved.length > 0) {\n        const cutoff = Date.now() - 1000 * 60 * 60 * 24 * 7; // 7 days\n        const filtered = saved.filter((ev) => {\n          if (!ev) return false;\n          if (typeof ev.ts === 'number') return ev.ts >= cutoff;\n          // try parse time string as fallback\n          const parsed = Date.parse(ev.time || '');\n          if (!isNaN(parsed)) return parsed >= cutoff;\n          return false;\n        });\n        setEvents(filtered);\n      }\n    } catch (e) {}\n  }, []);\n\n  // 저장: events가 바뀔 때마다 localStorage에 반영 (저장 전에 7일 초과 항목 제거)\n  useEffect(() => {\n    try {\n      const cutoff = Date.now() - 1000 * 60 * 60 * 24 * 7; // 7 days\n      const filtered = (events || []).filter((ev) => {\n        if (!ev) return false;\n        if (typeof ev.ts === 'number') return ev.ts >= cutoff;\n        const parsed = Date.parse(ev.time || '');\n        if (!isNaN(parsed)) return parsed >= cutoff;\n        return false;\n      });\n      saveAlertsToLocalStorage(filtered);\n    } catch (e) {}\n  }, [events]);\n\n  // Alerts 항목 삭제 핸들러 (ts 기반으로 고유 항목 제거)\n  function removeAlertByTs(ts) {\n    try {\n      const next = (events || []).filter((ev) => ev && ev.ts !== ts);\n      setEvents(next);\n    } catch (e) {}\n  }\n\n  // if symbol becomes invalid, disable autoStart and disconnect to avoid wrong subscriptions\n  useEffect(() => {\n    if (symbolValid === false) {\n      if (autoStart) setAutoStart(false);\n      // ensure disconnected\n      if (connected) disconnect();\n    }\n    // include dependencies to avoid stale closures\n  }, [symbolValid, autoStart, connected, disconnect]);\n\n  // Ask for notification permission on first user interaction\n  useEffect(() => {\n    const handle = () => {\n      if ('Notification' in window && Notification.permission === 'default') {\n        Notification.requestPermission().then(() => {});\n      }\n      window.removeEventListener('click', handle);\n    };\n    window.addEventListener('click', handle);\n    return () => window.removeEventListener('click', handle);\n  }, []);\n\n  // react to confirmed cross changes and notify (skip initial)\n  useEffect(() => {\n    if (!confirmedCross) return;\n    // If the confirmed signal came from initial seeding, don't notify — treat as seeded state\n    if (confirmedSource === 'init') {\n      // ensure we don't trigger notification for seed values\n      lastNotified.current = confirmedCross;\n      return;\n    }\n    if (lastNotified.current == null) {\n      // seed without notifying\n      lastNotified.current = confirmedCross;\n      return;\n    }\n\n    if (lastNotified.current !== confirmedCross) {\n      const type = confirmedCross === 'bull' ? 'Bullish EMA9 > EMA26' : 'Bearish EMA9 < EMA26';\n      const symToShow = activeSymbol || symbol;\n      const body = `${symToShow} ${type} @ ${lastPrice ?? 'N/A'}`;\n\n      // browser notification\n      if ('Notification' in window && Notification.permission === 'granted') {\n        new Notification(type, { body });\n      }\n\n      // beep and log\n      beep();\n      const evObj = { ts: Date.now(), time: new Date().toLocaleString(), type: confirmedCross, price: lastPrice, symbol: symToShow, source: confirmedSource || 'unknown' };\n      setEvents((s) => [evObj, ...s].slice(0, 500));\n      lastNotified.current = confirmedCross;\n    }\n  }, [confirmedCross, lastPrice, symbol, activeSymbol, confirmedSource]);\n\n  // 심볼이 바뀔 때 이전 심볼의 알림 상태가 남아 있어 잘못된 알림이 뜨는 문제 방지\n  // 심볼을 변경하면 lastNotified를 초기화해서 다음 confirmedCross는 초기 시드로 처리되도록 한다.\n  useEffect(() => {\n    try {\n      lastNotified.current = null;\n    } catch (e) {}\n  }, [symbol]);\n\n  return (\n    <div className=\"App\">\n      <div className=\"container\">\n        <div className=\"card\">\n          <div className=\"header\">\n            <div className=\"title\">Binance EMA Cross Alert</div>\n            <div className=\"header-right\">1m · EMA9 / EMA26</div>\n          </div>\n\n          <Controls\n            symbol={symbol}\n            setSymbol={setSymbol}\n            autoStart={autoStart}\n            setAutoStart={setAutoStart}\n            symbolValid={symbolValid}\n            setSymbolValid={setSymbolValid}\n            suggestions={suggestions}\n            setSuggestions={setSuggestions}\n            availableSymbols={availableSymbols}\n            validateSymbolOnce={validateSymbolOnce}\n            connect={connect}\n            disconnect={disconnect}\n            status={status}\n            connected={connected}\n            showDebug={showDebug}\n            setShowDebug={setShowDebug}\n          />\n          {/* 간단한 로딩 표시: 심볼 변경으로 상태가 reloading일 때 보임 */}\n          {status === 'reloading' && (\n            <div className=\"loading-text\">초기화 중... 잠시만 기다려주세요</div>\n          )}\n          {symbolValid === false && (\n            <div className=\"invalid-msg\">\n              Invalid symbol — please check the trading pair (e.g. BTCUSDT)\n              {suggestions && suggestions.length > 0 && (\n                <div className=\"suggestions-wrap\">\n                  <div className=\"suggestions-title\">Did you mean:</div>\n                  <div className=\"suggestions-list\">\n                    {suggestions.map((s) => (\n                      <button key={s} className=\"suggestion-btn\" onClick={() => {\n                        setSymbol(s);\n                        setSymbolValid(true);\n                        setSuggestions([]);\n                        try { if (autoStart) connect(s); } catch (e) {}\n                      }}>{s}</button>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n\n          <DebugPanel availableSymbols={availableSymbols} fetchExchangeInfo={fetchExchangeInfo} showDebug={showDebug} setMarketCheckResult={setMarketCheckResult} marketCheckResult={marketCheckResult} symbol={symbol} />\n\n          <div className=\"status\">\n            Status: <strong>{status}</strong> {connected ? <span className=\"status-connected\">(connected)</span> : <span className=\"status-disconnected\">(disconnected)</span>}\n          </div>\n\n          <Metrics activeSymbol={activeSymbol} symbol={symbol} lastPrice={lastPrice} lastCandleClosed={lastCandleClosed} cross={cross} confirmedCross={confirmedCross} ema9={ema9} ema26={ema26} />\n\n          <Alerts events={events} removeAlertByTs={removeAlertByTs} />\n\n          <Notes>Notes: This app uses Binance public REST + websocket. Make sure network allows wss access to stream.binance.com.</Notes>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}