{"ast":null,"code":"import React,{useRef}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Controls(props){const{symbol,setSymbol,autoStart,setAutoStart,symbolValid,setSymbolValid,suggestions,setSuggestions,availableSymbols,validateSymbolOnce,connect,disconnect,status,connected,showDebug,setShowDebug}=props;const symbolValidateTimer=useRef(null);// reference suggestions to avoid lint 'assigned but not used' when parent passes it\nvoid suggestions;return/*#__PURE__*/_jsxs(\"div\",{className:\"controls\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"controls-label\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Symbol\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:symbol,onChange:e=>{const v=e.target.value.toUpperCase();setSymbol(v);setSymbolValid(null);if(symbolValidateTimer.current)clearTimeout(symbolValidateTimer.current);symbolValidateTimer.current=setTimeout(()=>{try{const q=v.replace(/[^A-Za-z0-9]/g,'').toUpperCase();const pool=availableSymbols||[];if(pool.length>0){const normQ=q;const exact=pool.some(sy=>(sy||'').replace(/[^A-Za-z0-9]/g,'').toUpperCase()===normQ)||pool.includes(q);if(exact){setSymbolValid(true);setSuggestions([]);try{if(autoStart)connect(q);}catch(e){}return;}const found=pool.filter(s=>s.includes(q)||s.startsWith(q)||q.startsWith(s)).slice(0,8);setSuggestions(found);setSymbolValid(found.length>0?null:false);return;}(async()=>{try{const url=\"https://api.binance.com/api/v3/exchangeInfo?symbol=\".concat(q);const res=await fetch(url);if(!res.ok){setSymbolValid(false);return;}const data=await res.json();if(data&&(data.symbols||data.symbol))setSymbolValid(true);else setSymbolValid(false);}catch(err){setSymbolValid(false);}})();}catch(err){setSymbolValid(false);setSuggestions([]);}},600);}})]}),/*#__PURE__*/_jsx(\"button\",{disabled:!(symbolValid===true)||status==='reloading',title:!(symbolValid===true)?'유효한 심볼을 입력하세요':status==='reloading'?'초기화 중...':'Start',onClick:async()=>{const ok=await validateSymbolOnce(symbol);if(!ok){setSymbolValid(false);return;}setSymbolValid(true);connect(symbol);},children:\"Start\"}),/*#__PURE__*/_jsx(\"button\",{className:\"secondary\",onClick:()=>disconnect(),children:\"Stop\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"control-inline-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:autoStart,onChange:e=>{const val=e.target.checked;setAutoStart(val);if(!val)disconnect();if(val&&status==='initialized'&&!connected)connect();}}),/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Auto-start\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"control-inline-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:showDebug,onChange:e=>setShowDebug(e.target.checked)}),/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Debug\"})]})]});}","map":{"version":3,"names":["React","useRef","jsx","_jsx","jsxs","_jsxs","Controls","props","symbol","setSymbol","autoStart","setAutoStart","symbolValid","setSymbolValid","suggestions","setSuggestions","availableSymbols","validateSymbolOnce","connect","disconnect","status","connected","showDebug","setShowDebug","symbolValidateTimer","className","children","type","value","onChange","e","v","target","toUpperCase","current","clearTimeout","setTimeout","q","replace","pool","length","normQ","exact","some","sy","includes","found","filter","s","startsWith","slice","url","concat","res","fetch","ok","data","json","symbols","err","disabled","title","onClick","checked","val"],"sources":["C:/Users/e1it3/Desktop/program/binance_alert/src/components/Controls.js"],"sourcesContent":["import React, { useRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default function Controls(props) {\r\n  const {\r\n    symbol,\r\n    setSymbol,\r\n    autoStart,\r\n    setAutoStart,\r\n    symbolValid,\r\n  setSymbolValid,\r\n  suggestions,\r\n  setSuggestions,\r\n    availableSymbols,\r\n    validateSymbolOnce,\r\n    connect,\r\n    disconnect,\r\n    status,\r\n    connected,\r\n    showDebug,\r\n    setShowDebug,\r\n  } = props;\r\n\r\n  const symbolValidateTimer = useRef(null);\r\n  // reference suggestions to avoid lint 'assigned but not used' when parent passes it\r\n  void suggestions;\r\n\r\n  return (\r\n    <div className=\"controls\">\r\n      <label className=\"controls-label\">\r\n        <span className=\"label-text\">Symbol</span>\r\n        <input type=\"text\" value={symbol} onChange={(e) => {\r\n          const v = e.target.value.toUpperCase();\r\n          setSymbol(v);\r\n          setSymbolValid(null);\r\n          if (symbolValidateTimer.current) clearTimeout(symbolValidateTimer.current);\r\n          symbolValidateTimer.current = setTimeout(() => {\r\n            try {\r\n              const q = v.replace(/[^A-Za-z0-9]/g, '').toUpperCase();\r\n              const pool = availableSymbols || [];\r\n              if (pool.length > 0) {\r\n                const normQ = q;\r\n                const exact = pool.some(sy => (sy || '').replace(/[^A-Za-z0-9]/g, '').toUpperCase() === normQ) || pool.includes(q);\r\n                if (exact) {\r\n                  setSymbolValid(true);\r\n                  setSuggestions([]);\r\n                  try { if (autoStart) connect(q); } catch (e) {}\r\n                  return;\r\n                }\r\n                const found = pool.filter(s => s.includes(q) || s.startsWith(q) || q.startsWith(s)).slice(0, 8);\r\n                setSuggestions(found);\r\n                setSymbolValid(found.length > 0 ? null : false);\r\n                return;\r\n              }\r\n\r\n              (async () => {\r\n                try {\r\n                  const url = `https://api.binance.com/api/v3/exchangeInfo?symbol=${q}`;\r\n                  const res = await fetch(url);\r\n                  if (!res.ok) { setSymbolValid(false);return; }\r\n                  const data = await res.json();\r\n                  if (data && (data.symbols || data.symbol)) setSymbolValid(true);\r\n                  else setSymbolValid(false);\r\n                } catch (err) { setSymbolValid(false); }\r\n              })();\r\n            } catch (err) { setSymbolValid(false); setSuggestions([]); }\r\n          }, 600);\r\n        }} />\r\n      </label>\r\n\r\n      <button disabled={!(symbolValid === true) || status === 'reloading'} title={!(symbolValid === true) ? '유효한 심볼을 입력하세요' : (status === 'reloading' ? '초기화 중...' : 'Start')} onClick={async () => {\r\n        const ok = await validateSymbolOnce(symbol);\r\n        if (!ok) { setSymbolValid(false); return; }\r\n        setSymbolValid(true);\r\n        connect(symbol);\r\n      }}>Start</button>\r\n\r\n      <button className=\"secondary\" onClick={() => disconnect()}>Stop</button>\r\n\r\n      <label className=\"control-inline-label\">\r\n        <input type=\"checkbox\" checked={autoStart} onChange={(e) => {\r\n          const val = e.target.checked;\r\n          setAutoStart(val);\r\n          if (!val) disconnect();\r\n          if (val && status === 'initialized' && !connected) connect();\r\n        }} />\r\n        <span className=\"label-text\">Auto-start</span>\r\n      </label>\r\n\r\n      <label className=\"control-inline-label\">\r\n        <input type=\"checkbox\" checked={showDebug} onChange={(e) => setShowDebug(e.target.checked)} />\r\n        <span className=\"label-text\">Debug</span>\r\n      </label>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nControls.propTypes = {\r\n  symbol: PropTypes.string.isRequired,\r\n  setSymbol: PropTypes.func.isRequired,\r\n  autoStart: PropTypes.bool.isRequired,\r\n  setAutoStart: PropTypes.func.isRequired,\r\n  symbolValid: PropTypes.bool,\r\n  setSymbolValid: PropTypes.func.isRequired,\r\n  setSuggestions: PropTypes.func.isRequired,\r\n  availableSymbols: PropTypes.array,\r\n  validateSymbolOnce: PropTypes.func.isRequired,\r\n  connect: PropTypes.func.isRequired,\r\n  disconnect: PropTypes.func.isRequired,\r\n  status: PropTypes.string,\r\n  connected: PropTypes.bool,\r\n  showDebug: PropTypes.bool.isRequired,\r\n  setShowDebug: PropTypes.func.isRequired,\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}